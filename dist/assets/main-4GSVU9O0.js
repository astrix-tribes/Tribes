const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Dashboard-ApMIErfF.js","assets/vendor-CwV3sy3V.js"])))=>i.map(i=>d[i]);
var hn=Object.defineProperty;var wn=(t,s,n)=>s in t?hn(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n;var L=(t,s,n)=>wn(t,typeof s!="symbol"?s+"":s,n);import{d as je,c as xn,h as Me,a as Ys,b as Xs,_ as Ds,B as Nn,r as m,u as Qs,e as yn,f as ce,g as js,R as Y,j as e,M as gn,C as jt,L as Dn,i as En,k as Vt,l as It,m as vn,n as Tn,o as kn,p as Cn,q as Zs,t as Un,s as ne,v as St,w as Ne,A as At,I as vs,U as Pe,G as ts,x as He,y as ns,z as Xe,D as we,E as Mt,F as Qe,H as Pn,J as jn,K as Vn,N as In,O as Sn,X as De,P as dt,Q as Ms,S as An,T as Mn,V as Fn,W as On,Y as Ts,Z as Rn,$ as Ln,a0 as Bn,a1 as Ft,a2 as $n,a3 as Ot,a4 as _n,a5 as Rt,a6 as zn,a7 as Wn,a8 as $e,a9 as Kn,aa as qn,ab as Jn,ac as Hn,ad as Gn,ae as Lt,af as Yn,ag as Xn,ah as Qn,ai as Zn,aj as Ee,ak as er,al as sr,am as Bt,an as tr,ao as $t,ap as nr,aq as ze,ar as rs,as,at as is,au as os,av as ct,aw as rr,ax as ar,ay as ir,az as or,aA as lr,aB as ur,aC as mt,aD as ft,aE as dr,aF as cr,aG as pt,aH as mr,aI as fr,aJ as pr,aK as br,aL as hr,aM as _t,aN as zt,aO as Wt,aP as Kt,aQ as qt,aR as Jt,aS as bt,aT as Ht,aU as wr,aV as xr,aW as ht,aX as Nr,aY as yr,aZ as Gt,a_ as gr,a$ as Yt,b0 as Dr,b1 as Er,b2 as de,b3 as vr,b4 as Tr,b5 as kr,b6 as Cr,b7 as Ur,b8 as Pr,b9 as jr}from"./vendor-CwV3sy3V.js";import".prisma/client/index-browser";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(a){if(a.ep)return;a.ep=!0;const o=n(a);fetch(a.href,o)}})();const Vr=1264453517,Ir=50312,Sr=2741,Ar=11124,K=je({id:10143,name:"Monad Testnet",network:"monad-testnet",nativeCurrency:{decimals:18,name:"MON",symbol:"MON"},rpcUrls:{default:{http:["https://monad-testnet.g.alchemy.com/v2/5OeRT0SHza89NcfCn83h1lQmRY8iGjsw"]},public:{http:["https://monad-testnet.g.alchemy.com/v2/5OeRT0SHza89NcfCn83h1lQmRY8iGjsw"]}},blockExplorers:{default:{name:"MonadExplorer",url:"https://explorer-devnet.monadinfra.com"}},testnet:!0}),xe=je({id:Ir,name:"Somnia Testnet",network:"somnia-testnet",nativeCurrency:{decimals:18,name:"Somnia",symbol:"STT"},rpcUrls:{default:{http:["https://dream-rpc.somnia.network/"]},public:{http:["https://dream-rpc.somnia.network/"]}},blockExplorers:{default:{name:"SomniaExplorer",url:"https://shannon-explorer.somnia.network/"}},testnet:!0}),se=je({id:Vr,name:"Flash Testnet",network:"fuse-ember",nativeCurrency:{decimals:18,name:"Fuse",symbol:"FUSE"},rpcUrls:{default:{http:["/fuse-rpc"]},public:{http:["/fuse-rpc"]}},blockExplorers:{default:{name:"FuseExplorer",url:"https://explorer.flash.fuse.io"}},testnet:!0}),ke=je({id:88888,name:"Chiliz Chain",network:"Chiliz Mainnet",nativeCurrency:{decimals:18,name:"Chiliz",symbol:"CHZ"},rpcUrls:{default:{http:["https://rpc.chiliz.com"]},public:{http:["https://rpc.chiliz.com"]}},blockExplorers:{default:{name:"Chiliz Chain Explorer",url:"https://chiliscan.com/"}},testnet:!0}),Ce=je({id:3441006,name:"Manta Pacific Sepolia Testnet",network:"Manta Testnet",nativeCurrency:{decimals:18,name:"MANTA",symbol:"MANTA"},rpcUrls:{default:{http:["https://pacific-rpc.sepolia-testnet.manta.network/http"]},public:{http:["https://pacific-rpc.sepolia-testnet.manta.network/http"]}},blockExplorers:{default:{name:"Manta Sepolia Explorer",url:"https://pacific-explorer.sepolia-testnet.manta.network"}},testnet:!0}),qe=je({id:421614,name:"Arbitrum Sepolia Testnet",network:"Arbitrum Testnet",nativeCurrency:{decimals:18,name:"ETH",symbol:"ETH"},rpcUrls:{default:{http:["https://arbitrum-sepolia-rpc.publicnode.com"]},public:{http:["https://arbitrum-sepolia-rpc.publicnode.com"]}},blockExplorers:{default:{name:"Arbitrum Sepolia Explorer",url:"https://sepolia.arbiscan.io"}},testnet:!0}),zs=je({id:Sr,name:"Abstract",network:"abstract",nativeCurrency:{decimals:18,name:"ETH",symbol:"ETH"},rpcUrls:{default:{http:["https://api.mainnet.abs.xyz"]},public:{http:["https://api.mainnet.abs.xyz"]}},blockExplorers:{default:{name:"Abstract Explorer",url:"https://abscan.org/"}},testnet:!1}),Ws=je({id:Ar,name:"Abstract Testnet",network:"abstract-testnet",nativeCurrency:{decimals:18,name:"ETH",symbol:"ETH"},rpcUrls:{default:{http:["https://api.testnet.abs.xyz"]},public:{http:["https://api.testnet.abs.xyz"]}},blockExplorers:{default:{name:"Abstract Testnet Explorer",url:"https://sepolia.abscan.org/"}},testnet:!0}),me=[K,se,ke,Ce,qe,xe,zs,Ws];K.name,K.nativeCurrency,K.rpcUrls.default.http[0],K.blockExplorers.default.url;se.name,se.nativeCurrency,se.rpcUrls.default.http[0],se.blockExplorers.default.url;xe.name,xe.nativeCurrency,xe.rpcUrls.default.http[0],xe.blockExplorers.default.url;const Te=async()=>{if(typeof window>"u"||!window.ethereum)return console.warn("No ethereum provider found"),null;try{return await window.ethereum.request({method:"eth_chainId"}),window.ethereum}catch(t){return console.error("Error initializing ethereum provider:",t),null}},Mr=[{inputs:[{internalType:"address",name:"_roleManager",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"address",name:"owner",type:"address"}],name:"ERC721IncorrectOwner",type:"error"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ERC721InsufficientApproval",type:"error"},{inputs:[{internalType:"address",name:"approver",type:"address"}],name:"ERC721InvalidApprover",type:"error"},{inputs:[{internalType:"address",name:"operator",type:"address"}],name:"ERC721InvalidOperator",type:"error"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"ERC721InvalidOwner",type:"error"},{inputs:[{internalType:"address",name:"receiver",type:"address"}],name:"ERC721InvalidReceiver",type:"error"},{inputs:[{internalType:"address",name:"sender",type:"address"}],name:"ERC721InvalidSender",type:"error"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ERC721NonexistentToken",type:"error"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"OwnableInvalidOwner",type:"error"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"OwnableUnauthorizedAccount",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"approved",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"_fromTokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"_toTokenId",type:"uint256"}],name:"BatchMetadataUpdate",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"_tokenId",type:"uint256"}],name:"MetadataUpdate",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!1,internalType:"string",name:"username",type:"string"}],name:"ProfileCreated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"string",name:"newMetadataURI",type:"string"}],name:"ProfileMetadataUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"username",type:"string"},{internalType:"string",name:"metadataURI",type:"string"}],name:"createProfile",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getProfileByTokenId",outputs:[{internalType:"string",name:"username",type:"string"},{internalType:"string",name:"metadataURI",type:"string"},{internalType:"address",name:"owner",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"username",type:"string"}],name:"getTokenIdByUsername",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"roleManager",outputs:[{internalType:"contract RoleManager",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"string",name:"newMetadataURI",type:"string"}],name:"updateProfileMetadata",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"username",type:"string"}],name:"usernameExists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"}],Fr=[{inputs:[{internalType:"address",name:"_roleManager",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"InvalidInitialization",type:"error"},{inputs:[],name:"NotInitializing",type:"error"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint64",name:"version",type:"uint64"}],name:"Initialized",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tribeId",type:"uint256"},{indexed:!0,internalType:"bytes32",name:"codeHash",type:"bytes32"},{indexed:!1,internalType:"uint256",name:"maxUses",type:"uint256"},{indexed:!1,internalType:"uint256",name:"expiryTime",type:"uint256"}],name:"InviteCodeCreated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tribeId",type:"uint256"},{indexed:!0,internalType:"bytes32",name:"codeHash",type:"bytes32"}],name:"InviteCodeRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tribeId",type:"uint256"},{indexed:!0,internalType:"address",name:"member",type:"address"}],name:"MemberJoined",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tribeId",type:"uint256"},{indexed:!0,internalType:"address",name:"member",type:"address"},{indexed:!1,internalType:"enum ITribeController.MemberStatus",name:"status",type:"uint8"}],name:"MembershipUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"requestId",type:"uint256"}],name:"MergeApproved",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"requestId",type:"uint256"}],name:"MergeCancelled",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"requestId",type:"uint256"},{indexed:!0,internalType:"uint256",name:"sourceTribeId",type:"uint256"},{indexed:!0,internalType:"uint256",name:"targetTribeId",type:"uint256"}],name:"MergeExecuted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"requestId",type:"uint256"},{indexed:!0,internalType:"uint256",name:"sourceTribeId",type:"uint256"},{indexed:!0,internalType:"uint256",name:"targetTribeId",type:"uint256"}],name:"MergeRequested",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tribeId",type:"uint256"},{indexed:!1,internalType:"enum ITribeController.JoinType",name:"joinType",type:"uint8"},{indexed:!1,internalType:"uint256",name:"entryFee",type:"uint256"}],name:"TribeConfigUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tribeId",type:"uint256"},{indexed:!0,internalType:"address",name:"creator",type:"address"},{indexed:!1,internalType:"string",name:"tribeName",type:"string"},{indexed:!1,internalType:"enum ITribeController.JoinType",name:"joinType",type:"uint8"}],name:"TribeCreated",type:"event"},{inputs:[{internalType:"uint256",name:"tribeId",type:"uint256"},{internalType:"address",name:"member",type:"address"}],name:"approveMember",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"mergeRequestId",type:"uint256"}],name:"approveMerge",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tribeId",type:"uint256"},{internalType:"address",name:"member",type:"address"}],name:"banMember",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"mergeRequestId",type:"uint256"}],name:"cancelMerge",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tribeId",type:"uint256"},{internalType:"string",name:"code",type:"string"},{internalType:"uint256",name:"maxUses",type:"uint256"},{internalType:"uint256",name:"expiryTime",type:"uint256"}],name:"createInviteCode",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"metadata",type:"string"},{internalType:"address[]",name:"admins",type:"address[]"},{internalType:"enum ITribeController.JoinType",name:"joinType",type:"uint8"},{internalType:"uint256",name:"entryFee",type:"uint256"},{components:[{internalType:"address",name:"nftContract",type:"address"},{internalType:"enum ITribeController.NFTType",name:"nftType",type:"uint8"},{internalType:"bool",name:"isMandatory",type:"bool"},{internalType:"uint256",name:"minAmount",type:"uint256"},{internalType:"uint256[]",name:"tokenIds",type:"uint256[]"}],internalType:"struct ITribeController.NFTRequirement[]",name:"nftRequirements",type:"tuple[]"}],name:"createTribe",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"mergeRequestId",type:"uint256"}],name:"executeMerge",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tribeId",type:"uint256"},{internalType:"string",name:"code",type:"string"}],name:"getInviteCodeStatus",outputs:[{internalType:"bool",name:"valid",type:"bool"},{internalType:"uint256",name:"remainingUses",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tribeId",type:"uint256"}],name:"getMemberCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tribeId",type:"uint256"},{internalType:"address",name:"member",type:"address"}],name:"getMemberStatus",outputs:[{internalType:"enum ITribeController.MemberStatus",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"requestId",type:"uint256"}],name:"getMergeRequest",outputs:[{components:[{internalType:"uint256",name:"sourceTribeId",type:"uint256"},{internalType:"uint256",name:"targetTribeId",type:"uint256"},{internalType:"uint256",name:"requestTime",type:"uint256"},{internalType:"bool",name:"approved",type:"bool"}],internalType:"struct ITribeController.MergeRequest",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tribeId",type:"uint256"}],name:"getTribeAdmin",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tribeId",type:"uint256"}],name:"getTribeConfigView",outputs:[{components:[{internalType:"enum ITribeController.JoinType",name:"joinType",type:"uint8"},{internalType:"uint256",name:"entryFee",type:"uint256"},{components:[{internalType:"address",name:"nftContract",type:"address"},{internalType:"enum ITribeController.NFTType",name:"nftType",type:"uint8"},{internalType:"bool",name:"isMandatory",type:"bool"},{internalType:"uint256",name:"minAmount",type:"uint256"},{internalType:"uint256[]",name:"tokenIds",type:"uint256[]"}],internalType:"struct ITribeController.NFTRequirement[]",name:"nftRequirements",type:"tuple[]"},{internalType:"bool",name:"canMerge",type:"bool"}],internalType:"struct ITribeController.TribeConfigView",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tribeId",type:"uint256"}],name:"getTribeWhitelist",outputs:[{internalType:"address[]",name:"",type:"address[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getUserTribes",outputs:[{internalType:"uint256[]",name:"tribeIds",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"bytes32",name:"",type:"bytes32"}],name:"inviteCodes",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tribeId",type:"uint256"},{internalType:"address",name:"user",type:"address"}],name:"isAddressWhitelisted",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"address",name:"",type:"address"}],name:"isMember",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tribeId",type:"uint256"}],name:"joinTribe",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tribeId",type:"uint256"},{internalType:"bytes32",name:"inviteCode",type:"bytes32"}],name:"joinTribeWithCode",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"nextMergeRequestId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"nextTribeId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tribeId",type:"uint256"},{internalType:"address",name:"member",type:"address"}],name:"rejectMember",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"sourceTribeId",type:"uint256"},{internalType:"uint256",name:"targetTribeId",type:"uint256"}],name:"requestMerge",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tribeId",type:"uint256"}],name:"requestToJoinTribe",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"tribeId",type:"uint256"},{internalType:"string",name:"code",type:"string"}],name:"revokeInviteCode",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"roleManager",outputs:[{internalType:"contract IRoleManager",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tribeId",type:"uint256"},{internalType:"string",name:"newMetadata",type:"string"},{internalType:"address[]",name:"updatedWhitelist",type:"address[]"}],name:"updateTribe",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tribeId",type:"uint256"},{internalType:"enum ITribeController.JoinType",name:"joinType",type:"uint8"},{internalType:"uint256",name:"entryFee",type:"uint256"},{components:[{internalType:"address",name:"nftContract",type:"address"},{internalType:"enum ITribeController.NFTType",name:"nftType",type:"uint8"},{internalType:"bool",name:"isMandatory",type:"bool"},{internalType:"uint256",name:"minAmount",type:"uint256"},{internalType:"uint256[]",name:"tokenIds",type:"uint256[]"}],internalType:"struct ITribeController.NFTRequirement[]",name:"nftRequirements",type:"tuple[]"}],name:"updateTribeConfig",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tribeId",type:"uint256"}],name:"getTribeDetails",outputs:[{components:[{internalType:"uint256",name:"id",type:"uint256"},{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"metadata",type:"string"},{internalType:"address",name:"admin",type:"address"},{internalType:"enum ITribeController.JoinType",name:"joinType",type:"uint8"},{internalType:"uint256",name:"entryFee",type:"uint256"},{internalType:"uint256",name:"memberCount",type:"uint256"},{internalType:"bool",name:"isActive",type:"bool"},{internalType:"bool",name:"canMerge",type:"bool"}],internalType:"struct ITribeController.TribeDetails",name:"",type:"tuple"}],stateMutability:"view",type:"function"}],Or=[{inputs:[{internalType:"address",name:"_roleManager",type:"address"},{internalType:"address",name:"_tribeController",type:"address"},{internalType:"address",name:"_pointSystem",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"AccessControlBadConfirmation",type:"error"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"bytes32",name:"neededRole",type:"bytes32"}],name:"AccessControlUnauthorizedAccount",type:"error"},{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"uint256",name:"balance",type:"uint256"},{internalType:"uint256",name:"needed",type:"uint256"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ERC1155InsufficientBalance",type:"error"},{inputs:[{internalType:"address",name:"approver",type:"address"}],name:"ERC1155InvalidApprover",type:"error"},{inputs:[{internalType:"uint256",name:"idsLength",type:"uint256"},{internalType:"uint256",name:"valuesLength",type:"uint256"}],name:"ERC1155InvalidArrayLength",type:"error"},{inputs:[{internalType:"address",name:"operator",type:"address"}],name:"ERC1155InvalidOperator",type:"error"},{inputs:[{internalType:"address",name:"receiver",type:"address"}],name:"ERC1155InvalidReceiver",type:"error"},{inputs:[{internalType:"address",name:"sender",type:"address"}],name:"ERC1155InvalidSender",type:"error"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"address",name:"owner",type:"address"}],name:"ERC1155MissingApprovalForAll",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tribeId",type:"uint256"},{indexed:!0,internalType:"uint256",name:"collectibleId",type:"uint256"},{indexed:!0,internalType:"address",name:"claimer",type:"address"}],name:"CollectibleClaimed",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"collectibleId",type:"uint256"},{indexed:!0,internalType:"uint256",name:"tribeId",type:"uint256"},{indexed:!1,internalType:"string",name:"name",type:"string"},{indexed:!1,internalType:"uint256",name:"maxSupply",type:"uint256"}],name:"CollectibleCreated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"collectibleId",type:"uint256"}],name:"CollectibleDeactivated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256[]",name:"ids",type:"uint256[]"},{indexed:!1,internalType:"uint256[]",name:"values",type:"uint256[]"}],name:"TransferBatch",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"id",type:"uint256"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"TransferSingle",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"value",type:"string"},{indexed:!0,internalType:"uint256",name:"id",type:"uint256"}],name:"URI",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"id",type:"uint256"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address[]",name:"accounts",type:"address[]"},{internalType:"uint256[]",name:"ids",type:"uint256[]"}],name:"balanceOfBatch",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tribeId",type:"uint256"},{internalType:"uint256",name:"collectibleId",type:"uint256"}],name:"claimCollectible",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"collectibleCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"collectibleTribe",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"collectibles",outputs:[{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"symbol",type:"string"},{internalType:"string",name:"metadataURI",type:"string"},{internalType:"uint256",name:"maxSupply",type:"uint256"},{internalType:"uint256",name:"currentSupply",type:"uint256"},{internalType:"uint256",name:"price",type:"uint256"},{internalType:"uint256",name:"pointsRequired",type:"uint256"},{internalType:"bool",name:"isActive",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tribeId",type:"uint256"},{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"symbol",type:"string"},{internalType:"string",name:"metadataURI",type:"string"},{internalType:"uint256",name:"maxSupply",type:"uint256"},{internalType:"uint256",name:"price",type:"uint256"},{internalType:"uint256",name:"pointsRequired",type:"uint256"}],name:"createCollectible",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tribeId",type:"uint256"},{internalType:"uint256",name:"collectibleId",type:"uint256"}],name:"deactivateCollectible",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"collectibleId",type:"uint256"}],name:"getCollectible",outputs:[{components:[{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"symbol",type:"string"},{internalType:"string",name:"metadataURI",type:"string"},{internalType:"uint256",name:"maxSupply",type:"uint256"},{internalType:"uint256",name:"currentSupply",type:"uint256"},{internalType:"uint256",name:"price",type:"uint256"},{internalType:"uint256",name:"pointsRequired",type:"uint256"},{internalType:"bool",name:"isActive",type:"bool"}],internalType:"struct CollectibleController.Collectible",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"pointSystem",outputs:[{internalType:"contract IPointSystem",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"callerConfirmation",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"roleManager",outputs:[{internalType:"contract IRoleManager",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256[]",name:"ids",type:"uint256[]"},{internalType:"uint256[]",name:"values",type:"uint256[]"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeBatchTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"id",type:"uint256"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_pointSystem",type:"address"}],name:"setPointSystem",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"tribeController",outputs:[{internalType:"contract ITribeController",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"collectibleId",type:"uint256"}],name:"uri",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}],Xt=[{inputs:[{internalType:"string",name:"metadataURI",type:"string"},{internalType:"uint256",name:"maxTickets",type:"uint256"},{internalType:"uint256",name:"price",type:"uint256"}],name:"createEvent",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"eventId",type:"uint256"}],name:"events",outputs:[{internalType:"string",name:"metadataURI",type:"string"},{internalType:"address",name:"organizer",type:"address"},{internalType:"uint256",name:"maxTickets",type:"uint256"},{internalType:"uint256",name:"ticketsSold",type:"uint256"},{internalType:"uint256",name:"price",type:"uint256"},{internalType:"bool",name:"active",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"eventId",type:"uint256"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"purchaseTickets",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"eventId",type:"uint256"}],name:"cancelEvent",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"id",type:"uint256"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}],Rr=[{inputs:[{internalType:"address",name:"_roleManager",type:"address"},{internalType:"address",name:"_verifier",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"ECDSAInvalidSignature",type:"error"},{inputs:[{internalType:"uint256",name:"length",type:"uint256"}],name:"ECDSAInvalidSignatureLength",type:"error"},{inputs:[{internalType:"bytes32",name:"s",type:"bytes32"}],name:"ECDSAInvalidSignatureS",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"points",type:"uint256"},{indexed:!1,internalType:"uint256",name:"collectibleType",type:"uint256"}],name:"PointsRedeemed",type:"event"},{inputs:[{internalType:"uint256",name:"points",type:"uint256"},{internalType:"uint256",name:"collectibleType",type:"uint256"},{internalType:"bytes",name:"signature",type:"bytes"}],name:"redeemPoints",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"roleManager",outputs:[{internalType:"contract RoleManager",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"newVerifier",type:"address"}],name:"setVerifier",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes",name:"",type:"bytes"}],name:"usedSignatures",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"verifier",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"}],Lr=[{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"proposalId",type:"uint256"},{indexed:!0,internalType:"uint256",name:"tribeId",type:"uint256"},{indexed:!0,internalType:"address",name:"creator",type:"address"},{indexed:!1,internalType:"string",name:"proposalDetails",type:"string"}],name:"ProposalCreated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"proposalId",type:"uint256"},{indexed:!0,internalType:"address",name:"voter",type:"address"},{indexed:!1,internalType:"bool",name:"voteChoice",type:"bool"}],name:"VoteCasted",type:"event"},{inputs:[{internalType:"uint256",name:"tribeId",type:"uint256"},{internalType:"string",name:"proposalDetails",type:"string"}],name:"createProposal",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"nextProposalId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"proposals",outputs:[{internalType:"uint256",name:"tribeId",type:"uint256"},{internalType:"string",name:"details",type:"string"},{internalType:"uint256",name:"voteCount",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"proposalId",type:"uint256"},{internalType:"bool",name:"voteChoice",type:"bool"}],name:"vote",outputs:[],stateMutability:"nonpayable",type:"function"}],Br=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"AccessControlBadConfirmation",type:"error"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"bytes32",name:"neededRole",type:"bytes32"}],name:"AccessControlUnauthorizedAccount",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"assigner",type:"address"}],name:"FanAssignerAuthorized",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"}],name:"RoleAssigned",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"}],name:"RoleRevoked",type:"event"},{inputs:[],name:"ARTIST_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"BRAND_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"FAN_ASSIGNER_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"FAN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"MODERATOR_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"ORGANIZER_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"assignFanRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"},{internalType:"bytes32",name:"role",type:"bytes32"}],name:"assignRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"assigner",type:"address"}],name:"authorizeFanAssigner",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getUserRoles",outputs:[{internalType:"bytes32[]",name:"",type:"bytes32[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"},{internalType:"bytes32[]",name:"roles",type:"bytes32[]"}],name:"hasAllRoles",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"},{internalType:"bytes32[]",name:"roles",type:"bytes32[]"}],name:"hasAnyRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"},{internalType:"bytes32",name:"role",type:"bytes32"}],name:"removeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"callerConfirmation",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"}],$r=[{inputs:[{internalType:"address",name:"_roleManager",type:"address"},{internalType:"address",name:"_tribeController",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"superCommunityId",type:"uint256"},{indexed:!1,internalType:"string",name:"name",type:"string"},{indexed:!0,internalType:"address",name:"admin",type:"address"}],name:"SuperCommunityCreated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"superCommunityId",type:"uint256"},{indexed:!0,internalType:"uint256",name:"tribeId",type:"uint256"}],name:"TribeJoinedSuperCommunity",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"superCommunityId",type:"uint256"},{indexed:!0,internalType:"uint256",name:"tribeId",type:"uint256"}],name:"TribeLeftSuperCommunity",type:"event"},{inputs:[{internalType:"uint256",name:"superCommunityId",type:"uint256"},{internalType:"uint256",name:"tribeId",type:"uint256"}],name:"addTribeToSuperCommunity",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"metadata",type:"string"},{internalType:"uint256[]",name:"initialTribeIds",type:"uint256[]"}],name:"createSuperCommunity",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"superCommunityId",type:"uint256"}],name:"getSuperCommunityTribes",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"superCommunityId",type:"uint256"},{internalType:"address",name:"user",type:"address"}],name:"isSuperCommunityMember",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"nextSuperCommunityId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"superCommunityId",type:"uint256"},{internalType:"uint256",name:"tribeId",type:"uint256"}],name:"removeTribeFromSuperCommunity",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"roleManager",outputs:[{internalType:"contract RoleManager",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"superCommunities",outputs:[{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"metadata",type:"string"},{internalType:"address",name:"admin",type:"address"},{internalType:"bool",name:"active",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"tribeController",outputs:[{internalType:"contract TribeController",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"tribeInSuperCommunity",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"tribeSuperCommunity",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"superCommunityId",type:"uint256"},{internalType:"string",name:"newName",type:"string"},{internalType:"string",name:"newMetadata",type:"string"}],name:"updateSuperCommunityMetadata",outputs:[],stateMutability:"nonpayable",type:"function"}],_r=[{inputs:[{internalType:"address",name:"_roleManager",type:"address"},{internalType:"address",name:"_tribeController",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"AccessControlBadConfirmation",type:"error"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"bytes32",name:"neededRole",type:"bytes32"}],name:"AccessControlUnauthorizedAccount",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"postId",type:"uint256"},{indexed:!1,internalType:"address",name:"voter",type:"address"},{indexed:!1,internalType:"uint256",name:"optionIndex",type:"uint256"}],name:"PollVoteSubmitted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tribeId",type:"uint256"},{indexed:!0,internalType:"uint256",name:"postId",type:"uint256"},{indexed:!1,internalType:"address",name:"author",type:"address"},{indexed:!1,internalType:"enum ContentManager.PostType",name:"postType",type:"uint8"}],name:"PostCreated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tribeId",type:"uint256"},{indexed:!0,internalType:"uint256",name:"postId",type:"uint256"}],name:"PostDeleted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"postId",type:"uint256"},{indexed:!1,internalType:"address",name:"participant",type:"address"},{indexed:!1,internalType:"uint256",name:"score",type:"uint256"}],name:"QuizAnswerSubmitted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tribeId",type:"uint256"},{internalType:"string",name:"contentURI",type:"string"},{internalType:"string[]",name:"options",type:"string[]"},{internalType:"uint256",name:"duration",type:"uint256"}],name:"createPoll",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tribeId",type:"uint256"},{internalType:"string",name:"contentURI",type:"string"},{internalType:"enum ContentManager.PostType",name:"postType",type:"uint8"}],name:"createPost",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tribeId",type:"uint256"},{internalType:"string",name:"contentURI",type:"string"},{internalType:"string[]",name:"questions",type:"string[]"},{internalType:"bytes32[]",name:"answerHashes",type:"bytes32[]"},{internalType:"uint256",name:"pointsPerQuestion",type:"uint256"},{internalType:"uint256",name:"duration",type:"uint256"}],name:"createQuiz",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tribeId",type:"uint256"},{internalType:"uint256",name:"postId",type:"uint256"}],name:"deletePost",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"postId",type:"uint256"}],name:"getPollOptions",outputs:[{internalType:"string[]",name:"",type:"string[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"postId",type:"uint256"},{internalType:"uint256",name:"optionIndex",type:"uint256"}],name:"getPollVotes",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tribeId",type:"uint256"},{internalType:"uint256",name:"postId",type:"uint256"}],name:"getPost",outputs:[{components:[{internalType:"address",name:"author",type:"address"},{internalType:"string",name:"contentURI",type:"string"},{internalType:"uint256",name:"timestamp",type:"uint256"},{internalType:"bool",name:"isActive",type:"bool"},{internalType:"enum ContentManager.PostType",name:"postType",type:"uint8"}],internalType:"struct ContentManager.Post",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"postId",type:"uint256"}],name:"getQuizQuestions",outputs:[{internalType:"string[]",name:"",type:"string[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"polls",outputs:[{internalType:"uint256",name:"endTime",type:"uint256"},{internalType:"bool",name:"isActive",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"postCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"}],name:"posts",outputs:[{internalType:"address",name:"author",type:"address"},{internalType:"string",name:"contentURI",type:"string"},{internalType:"uint256",name:"timestamp",type:"uint256"},{internalType:"bool",name:"isActive",type:"bool"},{internalType:"enum ContentManager.PostType",name:"postType",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"quizzes",outputs:[{internalType:"uint256",name:"pointsPerQuestion",type:"uint256"},{internalType:"uint256",name:"endTime",type:"uint256"},{internalType:"bool",name:"isActive",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"callerConfirmation",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"roleManager",outputs:[{internalType:"contract IRoleManager",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tribeId",type:"uint256"},{internalType:"uint256",name:"postId",type:"uint256"},{internalType:"uint256",name:"optionIndex",type:"uint256"}],name:"submitPollVote",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tribeId",type:"uint256"},{internalType:"uint256",name:"postId",type:"uint256"},{internalType:"string[]",name:"answers",type:"string[]"}],name:"submitQuizAnswers",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"tribeController",outputs:[{internalType:"contract ITribeController",name:"",type:"address"}],stateMutability:"view",type:"function"}],zr=[{inputs:[{internalType:"address",name:"_roleManager",type:"address"},{internalType:"address",name:"_tribeController",type:"address"},{internalType:"address",name:"_collectibleController",type:"address"},{internalType:"address",name:"_feedManager",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"AccessControlBadConfirmation",type:"error"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"bytes32",name:"neededRole",type:"bytes32"}],name:"AccessControlUnauthorizedAccount",type:"error"},{inputs:[],name:"AlreadyInteracted",type:"error"},{inputs:[],name:"AlreadyReported",type:"error"},{inputs:[],name:"CannotInteractWithOwnPost",type:"error"},{inputs:[],name:"CooldownActive",type:"error"},{inputs:[{internalType:"string",name:"field",type:"string"}],name:"EmptyField",type:"error"},{inputs:[],name:"EmptyMetadata",type:"error"},{inputs:[],name:"EnforcedPause",type:"error"},{inputs:[],name:"ExpectedPause",type:"error"},{inputs:[],name:"InsufficientAccess",type:"error"},{inputs:[],name:"InvalidCollectible",type:"error"},{inputs:[],name:"InvalidCollectibleContract",type:"error"},{inputs:[],name:"InvalidEncryptionKey",type:"error"},{inputs:[],name:"InvalidJsonFormat",type:"error"},{inputs:[],name:"InvalidParentPost",type:"error"},{inputs:[],name:"InvalidPostType",type:"error"},{inputs:[],name:"InvalidSigner",type:"error"},{inputs:[],name:"MissingContentField",type:"error"},{inputs:[],name:"MissingTitleField",type:"error"},{inputs:[],name:"NotPostCreator",type:"error"},{inputs:[],name:"NotTribeAdmin",type:"error"},{inputs:[],name:"NotTribeMember",type:"error"},{inputs:[],name:"PostDeleted",type:"error"},{inputs:[],name:"ReentrancyGuardReentrantCall",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tribeId",type:"uint256"},{indexed:!0,internalType:"address",name:"creator",type:"address"},{indexed:!1,internalType:"uint256[]",name:"postIds",type:"uint256[]"}],name:"BatchPostsCreated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"postId",type:"uint256"},{indexed:!0,internalType:"uint256",name:"tribeId",type:"uint256"},{indexed:!0,internalType:"address",name:"creator",type:"address"},{indexed:!1,internalType:"string",name:"metadata",type:"string"},{indexed:!1,internalType:"bytes32",name:"encryptionKeyHash",type:"bytes32"},{indexed:!1,internalType:"address",name:"accessSigner",type:"address"}],name:"EncryptedPostCreated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"account",type:"address"}],name:"Paused",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"postId",type:"uint256"},{indexed:!0,internalType:"uint256",name:"tribeId",type:"uint256"},{indexed:!0,internalType:"address",name:"creator",type:"address"},{indexed:!1,internalType:"string",name:"metadata",type:"string"}],name:"PostCreated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"postId",type:"uint256"},{indexed:!0,internalType:"address",name:"deleter",type:"address"}],name:"PostDeleted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"postId",type:"uint256"},{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"enum IPostMinter.InteractionType",name:"interactionType",type:"uint8"}],name:"PostInteraction",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"postId",type:"uint256"},{indexed:!0,internalType:"address",name:"reporter",type:"address"},{indexed:!1,internalType:"string",name:"reason",type:"string"}],name:"PostReported",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"enum IPostMinter.PostType",name:"postType",type:"uint8"},{indexed:!1,internalType:"uint256",name:"cooldown",type:"uint256"}],name:"PostTypeCooldownUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"postId",type:"uint256"},{indexed:!0,internalType:"address",name:"updater",type:"address"},{indexed:!1,internalType:"string",name:"metadata",type:"string"}],name:"PostUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"postId",type:"uint256"},{indexed:!0,internalType:"uint256",name:"tribeId",type:"uint256"},{indexed:!0,internalType:"address",name:"creator",type:"address"},{indexed:!1,internalType:"string",name:"metadata",type:"string"},{indexed:!1,internalType:"bytes32",name:"encryptionKeyHash",type:"bytes32"},{indexed:!1,internalType:"address",name:"accessSigner",type:"address"},{indexed:!1,internalType:"address",name:"collectibleContract",type:"address"},{indexed:!1,internalType:"uint256",name:"collectibleId",type:"uint256"}],name:"SignatureGatedPostCreated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tribeId",type:"uint256"},{indexed:!0,internalType:"bytes32",name:"keyHash",type:"bytes32"}],name:"TribeKeyUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"account",type:"address"}],name:"Unpaused",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"postId",type:"uint256"},{indexed:!0,internalType:"address",name:"viewer",type:"address"}],name:"ViewerAuthorized",type:"event"},{inputs:[],name:"BATCH_POST_COOLDOWN",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"MAX_BATCH_POSTS",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"PROJECT_CREATOR_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"RATE_LIMIT_MANAGER_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"REPORT_THRESHOLD",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"postId",type:"uint256"},{internalType:"address",name:"viewer",type:"address"}],name:"authorizeViewer",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"postId",type:"uint256"},{internalType:"address",name:"viewer",type:"address"}],name:"canViewPost",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"collectibleController",outputs:[{internalType:"contract ICollectibleController",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tribeId",type:"uint256"},{components:[{internalType:"string",name:"metadata",type:"string"},{internalType:"bool",name:"isGated",type:"bool"},{internalType:"address",name:"collectibleContract",type:"address"},{internalType:"uint256",name:"collectibleId",type:"uint256"},{internalType:"enum IPostMinter.PostType",name:"postType",type:"uint8"}],internalType:"struct IPostMinter.BatchPostData[]",name:"posts",type:"tuple[]"}],name:"createBatchPosts",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tribeId",type:"uint256"},{internalType:"string",name:"metadata",type:"string"},{internalType:"bytes32",name:"encryptionKeyHash",type:"bytes32"},{internalType:"address",name:"accessSigner",type:"address"}],name:"createEncryptedPost",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tribeId",type:"uint256"},{internalType:"string",name:"metadata",type:"string"},{internalType:"bool",name:"isGated",type:"bool"},{internalType:"address",name:"collectibleContract",type:"address"},{internalType:"uint256",name:"collectibleId",type:"uint256"}],name:"createPost",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"parentPostId",type:"uint256"},{internalType:"string",name:"metadata",type:"string"},{internalType:"bool",name:"isGated",type:"bool"},{internalType:"address",name:"collectibleContract",type:"address"},{internalType:"uint256",name:"collectibleId",type:"uint256"}],name:"createReply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tribeId",type:"uint256"},{internalType:"string",name:"metadata",type:"string"},{internalType:"bytes32",name:"encryptionKeyHash",type:"bytes32"},{internalType:"address",name:"accessSigner",type:"address"},{internalType:"address",name:"collectibleContract",type:"address"},{internalType:"uint256",name:"collectibleId",type:"uint256"}],name:"createSignatureGatedPost",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"postId",type:"uint256"}],name:"deletePost",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tribeId",type:"uint256"},{internalType:"address",name:"member",type:"address"}],name:"deriveSharedKey",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"feedManager",outputs:[{internalType:"contract PostFeedManager",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"postId",type:"uint256"}],name:"generatePostKey",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"getBatchPostingLimits",outputs:[{internalType:"uint256",name:"maxBatchSize",type:"uint256"},{internalType:"uint256",name:"batchCooldown",type:"uint256"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"},{internalType:"uint256",name:"offset",type:"uint256"},{internalType:"uint256",name:"limit",type:"uint256"}],name:"getFeedForUser",outputs:[{internalType:"uint256[]",name:"postIds",type:"uint256[]"},{internalType:"uint256",name:"total",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"postId",type:"uint256"},{internalType:"enum IPostMinter.InteractionType",name:"interactionType",type:"uint8"}],name:"getInteractionCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"postId",type:"uint256"}],name:"getPost",outputs:[{internalType:"uint256",name:"id",type:"uint256"},{internalType:"address",name:"creator",type:"address"},{internalType:"uint256",name:"tribeId",type:"uint256"},{internalType:"string",name:"metadata",type:"string"},{internalType:"bool",name:"isGated",type:"bool"},{internalType:"address",name:"collectibleContract",type:"address"},{internalType:"uint256",name:"collectibleId",type:"uint256"},{internalType:"bool",name:"isEncrypted",type:"bool"},{internalType:"address",name:"accessSigner",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"postId",type:"uint256"},{internalType:"address",name:"viewer",type:"address"}],name:"getPostDecryptionKey",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"postId",type:"uint256"}],name:"getPostReplies",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"enum IPostMinter.PostType",name:"postType",type:"uint8"}],name:"getPostTypeCooldown",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tribeId",type:"uint256"},{internalType:"uint256",name:"offset",type:"uint256"},{internalType:"uint256",name:"limit",type:"uint256"}],name:"getPostsByTribe",outputs:[{internalType:"uint256[]",name:"postIds",type:"uint256[]"},{internalType:"uint256",name:"total",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tribeId",type:"uint256"},{internalType:"address",name:"user",type:"address"},{internalType:"uint256",name:"offset",type:"uint256"},{internalType:"uint256",name:"limit",type:"uint256"}],name:"getPostsByTribeAndUser",outputs:[{internalType:"uint256[]",name:"postIds",type:"uint256[]"},{internalType:"uint256",name:"total",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"},{internalType:"uint256",name:"offset",type:"uint256"},{internalType:"uint256",name:"limit",type:"uint256"}],name:"getPostsByUser",outputs:[{internalType:"uint256[]",name:"postIds",type:"uint256[]"},{internalType:"uint256",name:"total",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"},{internalType:"enum IPostMinter.PostType",name:"postType",type:"uint8"}],name:"getRemainingCooldown",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"postId",type:"uint256"},{internalType:"enum IPostMinter.InteractionType",name:"interactionType",type:"uint8"}],name:"interactWithPost",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"lastBatchTime",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"enum IPostMinter.PostType",name:"",type:"uint8"}],name:"lastPostTimeByType",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"nextPostId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"pause",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"paused",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"enum IPostMinter.PostType",name:"",type:"uint8"}],name:"postTypeCooldowns",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"callerConfirmation",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"reportCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"postId",type:"uint256"},{internalType:"string",name:"reason",type:"string"}],name:"reportPost",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"roleManager",outputs:[{internalType:"contract IRoleManager",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"enum IPostMinter.PostType",name:"postType",type:"uint8"},{internalType:"uint256",name:"cooldown",type:"uint256"}],name:"setPostTypeCooldown",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tribeId",type:"uint256"},{internalType:"bytes32",name:"encryptionKey",type:"bytes32"}],name:"setTribeEncryptionKey",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"tribeController",outputs:[{internalType:"contract ITribeController",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"tribeEncryptionKeys",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"unpause",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"postId",type:"uint256"},{internalType:"string",name:"metadata",type:"string"}],name:"updatePost",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"metadata",type:"string"},{internalType:"enum IPostMinter.PostType",name:"postType",type:"uint8"}],name:"validateMetadata",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"uint256",name:"postId",type:"uint256"},{internalType:"address",name:"viewer",type:"address"},{internalType:"bytes",name:"signature",type:"bytes"}],name:"verifyPostAccess",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"}],le={ProfileNFTMinter:Mr,TribeController:Fr,CollectibleController:Or,EventController:Xt,CommunityPoints:Rr,Voting:Lr,RoleManager:Br,SuperCommunityController:$r,ContentManager:_r,PostMinter:zr},Wr=Object.freeze(Object.defineProperty({__proto__:null,ABIS:le},Symbol.toStringTag,{value:"Module"})),wt={[Ce.id]:{ROLE_MANAGER:"0x2F86722E927f1f080AF80E943eaE45fa28C7C296",PROFILE_NFT_MINTER:"0xc7B5f9BE4F716eE179674E2f055d866a797D1126",TRIBE_CONTROLLER:"0x575Cc6B211b33aDA87C075AfE3bB878f6B0a8984",COLLECTIBLE_CONTROLLER:"0xD750B3e3A361B701c6C53B86A425F4CC345f142d",EVENT_CONTROLLER:"0x03f8E7E304dB8615207a0b6fdd02Eb2e30e89557",SUPER_COMMUNITY_CONTROLLER:"0x9814514576184fB43AAD956873AE806AA811851E",COMMUNITY_POINTS:"0xE05022e242778c50Be3f6b4DD156ac222A311eEb",VOTING:"0x1E644d081E2a702A6D4e816D8dc04A9DBaa12Acc",CONTENT_MANAGER:"0x4DAD0f1E02374CB221E8822787bbdb0b0b18B9Fb",POST_MINTER:"0xA1c3162cE3515bb876Ee4928fB0FD0B20bC37f34"},[ke.id]:{ROLE_MANAGER:"0x2F86722E927f1f080AF80E943eaE45fa28C7C296",PROFILE_NFT_MINTER:"0xc7B5f9BE4F716eE179674E2f055d866a797D1126",TRIBE_CONTROLLER:"0x575Cc6B211b33aDA87C075AfE3bB878f6B0a8984",COLLECTIBLE_CONTROLLER:"0xD750B3e3A361B701c6C53B86A425F4CC345f142d",EVENT_CONTROLLER:"0x03f8E7E304dB8615207a0b6fdd02Eb2e30e89557",SUPER_COMMUNITY_CONTROLLER:"0x9814514576184fB43AAD956873AE806AA811851E",COMMUNITY_POINTS:"0xE05022e242778c50Be3f6b4DD156ac222A311eEb",VOTING:"0x1E644d081E2a702A6D4e816D8dc04A9DBaa12Acc",CONTENT_MANAGER:"0x4DAD0f1E02374CB221E8822787bbdb0b0b18B9Fb",POST_MINTER:"0xA1c3162cE3515bb876Ee4928fB0FD0B20bC37f34"},[K.id]:{ROLE_MANAGER:"0xd1e6F54a47705659856cdCf1De6bCf992668f7B8",CONTENT_MANAGER:"0x4c1B99D32A3671a35c3229cb3647d080CFb94380",PROFILE_NFT_MINTER:"0xb5D7997bE927511328a983387A0B8c08A78C2Ff6",TRIBE_CONTROLLER:"0x90628Ed5C38C5a902782911Be5b4C811A7bEf4F4",COLLECTIBLE_CONTROLLER:"0xE82448DEbBF0cD369912d58aA68F7b2371E24846",POST_MINTER:"0xb4a6E494a86679de41Bb18De850C1a497066ec1e",VOTING:"0x014656936ea2C31493Ce1374328819370D2443DE",COMMUNITY_POINTS:"0x8D682a9917c2d5F2b63Ede57D5d046ff4e08c27E",EVENT_CONTROLLER:"0x68Cb873203dc5Af0DbAC292eF94f83054Bc70fc8",SUPER_COMMUNITY_CONTROLLER:"0xe1B158fc958C3F8Af64949e40d973ebA32462E1F"},[se.id]:{ROLE_MANAGER:"0x661C2B7f1C3EC1ACEeA2c02818459061D40823bD",PROFILE_NFT_MINTER:"0x6fB6B1DDD4EA6640e04D70979C57E9C01c7b974a",TRIBE_CONTROLLER:"0x54812005171F747f5E69afA08989F41Cf06eeE48",COLLECTIBLE_CONTROLLER:"0xFD4E7c9AbEab99C9d23605519A883F1a3814595b",EVENT_CONTROLLER:"0xF4515E673EF9ED006dbFAF702A87Cd579b128f37",SUPER_COMMUNITY_CONTROLLER:"0x214653d9Cc9bbd148B0A1Fc833867c2cE8A0e609",COMMUNITY_POINTS:"0xdcF66412c2F2E76938Ed4F991f350Eb4CEA0c377",VOTING:"0xFCF9C955fB3A4B137E9526E1De979c67c9a7b45B",CONTENT_MANAGER:"0x8fa7A72aAB8595E0EA48bDd0A26e7c1b7F72B362",POST_MINTER:"0x58a1F6A010Eb711f5e564C073fC24bDa4AFA2392"}},Je=t=>{const s=wt[t];return s||(console.warn(`No contract addresses found for chain ${t}, falling back to Monad Devnet`),wt[K.id])},ks=t=>{const s=me.find(n=>n.id===t);return s||(console.warn(`Chain ${t} not supported, falling back to Monad Devnet`),K)};function Kr(t=K.id){return Je(t)}function te(t=K.id){const s=ks(t);return xn({chain:s,transport:Me()})}async function et(t=K.id){const s=window.ethereum;if(!s)throw new Error("No provider available");const n=ks(t),[r]=await s.request({method:"eth_requestAccounts"});return Ys({account:r,chain:n,transport:Xs(s)})}function J(t=K.id){const s=Kr(t);return{profileNFTMinter:{address:s.PROFILE_NFT_MINTER,abi:le.ProfileNFTMinter},tribesContract:{address:s.TRIBE_CONTROLLER,abi:le.TribeController},tribeController:{address:s.TRIBE_CONTROLLER,abi:le.TribeController},collectibleController:{address:s.COLLECTIBLE_CONTROLLER,abi:le.CollectibleController},eventController:{address:s.EVENT_CONTROLLER,abi:le.EventController},communityPoints:{address:s.COMMUNITY_POINTS,abi:le.CommunityPoints},voting:{address:s.VOTING,abi:le.Voting},roleManager:{address:s.ROLE_MANAGER,abi:le.RoleManager},superCommunityController:{address:s.SUPER_COMMUNITY_CONTROLLER,abi:le.SuperCommunityController},contentManager:{address:s.CONTENT_MANAGER,abi:le.ContentManager},postMinter:{address:s.POST_MINTER,abi:le.PostMinter}}}const Oe=te,Ke=J,qr=Je,he=async()=>{try{const t=await Te();if(!t)return console.warn("No provider available, using Monad Devnet"),K.id;try{const s=await t.request({method:"eth_chainId"});if(s){const n=parseInt(s,16);return me.some(a=>a.id===n)?n:(console.warn(`Chain ID ${n} not supported, using Monad Devnet`),K.id)}}catch(s){console.warn("Failed to get chainId via request method:",s)}return t.chainId?typeof t.chainId=="string"?parseInt(t.chainId,16):Number(t.chainId):(console.warn("Could not determine chain ID, using Monad Devnet"),K.id)}catch(t){return console.error("Error getting current chain ID:",t),K.id}},ws=t=>{const s=me.find(n=>n.id===t);if(!s)throw new Error(`Chain ID ${t} is not supported`);return s},Jr=async(t,s,n)=>{try{const{tribeController:r}=Ke(t),a=await n.getLogs({address:r.address,event:{type:"event",name:"TribeCreated",inputs:[{type:"uint256",name:"tribeId",indexed:!0},{type:"address",name:"creator",indexed:!0},{type:"string",name:"name"},{type:"string",name:"metadata"}]},args:{tribeId:BigInt(s)},fromBlock:"earliest",toBlock:"latest"});return a&&a.length>0&&a[0].args.metadata||"{}"}catch(r){return console.error("Error extracting metadata from transaction:",r),"{}"}},Fs=async(t,s)=>await Oe(s).waitForTransactionReceipt({hash:t}),q={connect:async()=>{try{const t=await Te();if(!t)throw new Error("No provider available");return await t.request({method:"eth_requestAccounts"}),!0}catch(t){throw console.error("Error connecting to blockchain:",t),t}},getAddress:async()=>{try{const t=await Te();if(!t||!t.selectedAddress)throw new Error("No wallet connected");return t.selectedAddress}catch(t){throw console.error("Error getting wallet address:",t),t}},getCurrentChainId:he,getChainId:he,getProvider:async()=>Te(),getSigner:async()=>{try{const t=await Te();if(!t)throw new Error("No provider available");const{ethers:s}=await Ds(async()=>{const{ethers:a}=await import("./vendor-CwV3sy3V.js").then(o=>o.ba);return{ethers:a}},[]);return await new s.BrowserProvider(t).getSigner()}catch(t){throw console.error("Error getting signer:",t),t}},createTribePost:async t=>{try{console.log("Creating tribe post with params:",t),await q.connect();const s=await he();console.log("Using chain ID for post creation:",s);const n=qr(s);if(!n.POST_MINTER)throw new Error(`No tribes contract address for chain ID ${s}`);const r=await q.getProvider(),a=await q.getSigner();if(!a)throw new Error("No signer available for transaction");console.log("Provider:",r),console.log("Signer:",a);const{ethers:o}=await Ds(async()=>{const{ethers:b}=await import("./vendor-CwV3sy3V.js").then(w=>w.ba);return{ethers:b}},[]),{ABIS:i}=await Ds(async()=>{const{ABIS:b}=await Promise.resolve().then(()=>Wr);return{ABIS:b}},void 0);console.log("Contract address:",n.POST_MINTER),console.log("Contract ABI first few methods:",i.PostMinter.slice(0,3));const u=new o.Contract(n.POST_MINTER,i.PostMinter,a);console.log("Contract with signer:",u);const l=await a.getAddress();console.log("User address:",l);const f=t.tribeId?Number(t.tribeId):1;console.log(`Using tribe ID: ${f}`),console.log("Ensuring tribe parmas...",t);const c=JSON.stringify({content:t.content||"Sample content",title:t.title||"Untitled Post",type:t.postType,createdAt:new Date().toISOString(),...t.postType==="event"&&{...t}});console.log("Post metadata:",c),console.log("Sending createPost transaction...");const p=await u.createPost(f,c,!1,"0x0000000000000000000000000000000000000000",0,{gas:1e6});console.log("Transaction sent:",p.hash);const h=await p.wait();return console.log("Transaction receipt:",h),p.hash}catch(s){throw console.error("Error creating tribe post:",s),s}},getTribePost:async(t,s)=>{try{console.log(`Getting post ${s} from tribe ${t}`);const n=await he(),r=Ke(n),a=Oe(n);return{id:s,content:"Sample post content",title:"Sample Post",author:"0x0000000000000000000000000000000000000000",timestamp:Math.floor(Date.now()/1e3),likes:0,comments:[],metadata:"{}"}}catch(n){return console.error("Error getting tribe post:",n),null}},voteOnPoll:async(t,s,n)=>{try{console.log(`Voting on poll ${s} in tribe ${t}, option ${n}`);const r=await he(),a=Ke(r),o=Oe(r);return`0x${Math.random().toString(16).substring(2).padStart(64,"0")}`}catch(r){throw console.error("Error voting on poll:",r),r}},rsvpToEvent:async(t,s,n)=>{try{console.log(`RSVP to event ${s} in tribe ${t}, attending: ${n}`);const r=await he(),a=Ke(r),o=Oe(r);return`0x${Math.random().toString(16).substring(2).padStart(64,"0")}`}catch(r){throw console.error("Error RSVPing to event:",r),r}},likePost:async(t,s)=>{try{console.log(`Liking post ${s} in tribe ${t}`);const n=await he(),r=Ke(n),a=Oe(n);return`0x${Math.random().toString(16).substring(2).padStart(64,"0")}`}catch(n){throw console.error("Error liking post:",n),n}},commentOnPost:async(t,s,n)=>{try{console.log(`Commenting on post ${s} in tribe ${t}`);const r=await he(),a=Ke(r),o=Oe(r);return`0x${Math.random().toString(16).substring(2).padStart(64,"0")}`}catch(r){throw console.error("Error commenting on post:",r),r}}};let Ye=null;async function Os(){if(!window.ethereum)throw new Error("MetaMask is not installed");return Ye||(Ye=new Nn(window.ethereum)),await Ye.send("eth_requestAccounts",[]),Ye}function xt(){Ye=null}typeof window<"u"&&window.ethereum&&(window.ethereum.on("chainChanged",()=>{xt()}),window.ethereum.on("accountsChanged",()=>{xt()}));const ve="tribes_auth_state",Hr=24*60*60*1e3,Rs=t=>!!t&&typeof t.address=="string"&&t.address.startsWith("0x")&&typeof t.chainId=="number"&&t.chainId>0&&typeof t.timestamp=="number"&&Date.now()-t.timestamp<=Hr;function st(){const[t,s]=m.useState(()=>{try{const d=localStorage.getItem(ve);if(d){const N=JSON.parse(d);if(Rs(N))return N.address;localStorage.removeItem(ve)}}catch(d){console.error("Error loading auth state:",d),localStorage.removeItem(ve)}return null}),[n,r]=m.useState(()=>{try{const d=localStorage.getItem(ve);if(d){const N=JSON.parse(d);if(Rs(N))return N.chainId}}catch(d){console.error("Error loading chain ID:",d)}return null}),[a,o]=m.useState(()=>!!t&&!!n),[i,u]=m.useState(()=>{var d,N;try{const k=localStorage.getItem(ve);if(k){const D=JSON.parse(k);if(Rs(D)&&D.profile){const x={avatar:((d=D.profile.metadata)==null?void 0:d.uri)||"",bio:"",createdAt:Date.now()};return{tokenId:BigInt(D.profile.tokenId||"0"),username:D.profile.username,metadata:x,nftUri:((N=D.profile.metadata)==null?void 0:N.uri)||"",owner:D.address}}}}catch(k){console.error("Error loading profile:",k)}return null}),[l,f]=m.useState(!1),c=m.useRef(!1),p=m.useRef(!1);m.useEffect(()=>{if(typeof window<"u"&&window.ethereum){const d=N=>{r(parseInt(N,16))};return window.ethereum.on("chainChanged",d),()=>{window.ethereum.removeListener("chainChanged",d)}}},[]),m.useEffect(()=>{if(typeof window<"u"&&window.ethereum){const d=N=>{N.length===0?w():N[0]!==t&&(s(N[0]),g(N[0]))};return window.ethereum.on("accountsChanged",d),()=>{window.ethereum.removeListener("accountsChanged",d)}}},[t]),m.useEffect(()=>{let d=!0;return(async()=>{if(!(c.current||l))try{f(!0),c.current=!0;const k=await Te();if(!k||!d)return;try{const D=await k.request({method:"eth_chainId"}),x=parseInt(D,16);r(x)}catch(D){console.error("Error getting chain ID:",D);return}k.selectedAddress&&(typeof window<"u"&&window.ethereum&&!p.current&&(await Os(),p.current=!0),s(k.selectedAddress),o(!0),!i&&d&&await g(k.selectedAddress))}catch(k){console.error("Error in initialization:",k)}finally{d&&f(!1)}})(),()=>{d=!1,c.current=!1}},[]),m.useEffect(()=>{if(!l&&t&&n){const d={address:t,chainId:n};i&&(d.profile={tokenId:i.tokenId.toString(),username:i.username,metadata:{uri:i.nftUri||""}}),h(d)}},[t,n,i,l]);const h=d=>{try{const N=localStorage.getItem(ve),k=N?JSON.parse(N):null,D={address:d.address||(k==null?void 0:k.address)||"",chainId:d.chainId||(k==null?void 0:k.chainId)||0,profile:d.profile||(k==null?void 0:k.profile),timestamp:Date.now()};D.address&&(localStorage.setItem(ve,JSON.stringify(D)),localStorage.setItem("tribes_auth",JSON.stringify({isConnected:!0,address:D.address,chainId:D.chainId})),D.profile&&localStorage.setItem("tribes_profile",JSON.stringify(D.profile)))}catch(N){console.error("Failed to save auth state:",N)}},b=async()=>{try{if(l)return;f(!0),typeof window<"u"&&window.ethereum&&await Os();const d=await Te();if(!d)throw new Error("No provider found");await d.request({method:"eth_requestAccounts"});const N=d.selectedAddress;if(!N)throw new Error("No address found");s(N),o(!0),await g(N)}catch(d){throw console.error("Error connecting wallet:",d),d}finally{f(!1)}},w=()=>{s(null),o(!1),u(null),localStorage.removeItem(ve),localStorage.removeItem("tribes_auth"),localStorage.removeItem("tribes_profile"),localStorage.removeItem("redirect_attempts")},g=async d=>{try{typeof window<"u"&&window.ethereum&&await Os();const N=await q.getProfileByAddress(d);if(!N)return null;if(N.profile){const[k,D]=N.profile;let x;try{x=JSON.parse(D)}catch{x={avatar:"",bio:"",createdAt:Date.now()}}const V={tokenId:BigInt(0),username:k,metadata:x,nftUri:x.avatar||"",owner:d};return u(V),V}return null}catch(N){return console.error("Error fetching profile:",N),null}};return{address:t,isConnected:a,profile:i,connect:b,disconnect:w,fetchProfile:g,chainId:n}}const Ve=()=>{const{chain:t}=Qs(),{chains:s}=yn(),n=o=>o?me.some(i=>i.id===o):!1,r=n(t==null?void 0:t.id),a=async o=>{var i;if(!window.ethereum)throw new Error("No ethereum provider found");try{await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:`0x${o.toString(16)}`}]})}catch(u){if(u.code===4902){const l=me.find(f=>f.id===o);if(!l)throw new Error(`Chain ID ${o} is not supported`);await window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:`0x${o.toString(16)}`,chainName:l.name,nativeCurrency:l.nativeCurrency,rpcUrls:l.rpcUrls.default.http,blockExplorerUrls:[(i=l.blockExplorers)==null?void 0:i.default.url]}]})}else throw u}};return{chainId:t==null?void 0:t.id,isSupported:n,isCorrectNetwork:r,switchNetwork:a}};function tt({onMenuClick:t}){const s=ce(),n=js(),{disconnect:r}=st(),{chainId:a,switchNetwork:o}=Ve(),[i,u]=Y.useState(!1);if(["/connect"].includes(n.pathname))return null;const l=()=>{r(),s("/connect"),u(!1)},f=()=>{s("/dashboard")},c=()=>a===K.id?"Monad Testnet":a===se.id?"Flash Testnet":a===ke.id?"Chiliz Mainnet":a===Ce.id?"Manta Testnet":"Unsupported Chain",p=()=>a===K.id?"/monad-white.svg":a===se.id?"/fuse-white.svg":"/monad-white.svg",h=()=>a===K.id?"Monad Logo":a===se.id?"Fuse Logo":"Chain Logo";a===K.id?"monad-purple":a===se.id?"fuse-orange":"monad-purple";const w=[{id:K.id,name:"Monad Testnet",initial:"M"},{id:se.id,name:"Flash Testnet",initial:"F"},{id:ke.id,name:"Chiliz Mainnet",initial:"C"},{id:Ce.id,name:"Manta Testnet",initial:"M"},{id:qe.id,name:"Arbitrum Sepolia Testnet",initial:"A"},{id:xe.id,name:"Somnia Testnet",initial:"S"},{id:zs.id,name:"Abstract",initial:"A"},{id:Ws.id,name:"Abstract Testnet",initial:"A"}];return e.jsxDEV("nav",{className:"sticky top-0 z-50 shadow-md",style:{backgroundColor:"var(--chain-bg)"},children:e.jsxDEV("div",{className:"flex items-center justify-between py-5 px-5",children:[e.jsxDEV("div",{className:"flex items-center space-x-4",children:[e.jsxDEV("button",{onClick:t,className:"md:hidden text-text-primary hover:bg-black/20 p-2 rounded-full transition-colors",children:e.jsxDEV(gn,{className:"w-6 h-6"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Navigation.tsx",lineNumber:160,columnNumber:13},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Navigation.tsx",lineNumber:159,columnNumber:11},this),e.jsxDEV("div",{className:"flex items-center space-x-3 cursor-pointer",onClick:f,"aria-label":"Go to Dashboard",children:[e.jsxDEV("img",{src:p(),alt:h(),className:"w-9 h-9"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Navigation.tsx",lineNumber:167,columnNumber:13},this),e.jsxDEV("span",{className:"text-xl font-bold font-['Inter'] text-text-primary",children:"Tribes"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Navigation.tsx",lineNumber:172,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Navigation.tsx",lineNumber:162,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Navigation.tsx",lineNumber:158,columnNumber:9},this),e.jsxDEV("div",{className:"flex items-center space-x-4",children:[e.jsxDEV("div",{className:"relative",children:[e.jsxDEV("button",{onClick:()=>u(!i),className:"flex items-center justify-between space-x-3 px-4 py-2.5 rounded-full bg-black/20 hover:bg-theme-primary/10 text-text-primary transition-colors min-w-[180px]",children:[e.jsxDEV("div",{className:"flex items-center space-x-3",children:[e.jsxDEV("div",{className:"w-6 h-6 rounded-full bg-theme-primary flex items-center justify-center text-text-primary text-xs font-bold",children:a===K.id?"M":a===se.id?"F":a===ke.id?"C":a===Ce.id?"M":a===qe.id?"A":a===xe.id?"S":a===zs.id||a===Ws.id?"A":"?"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Navigation.tsx",lineNumber:183,columnNumber:17},this),e.jsxDEV("span",{className:"font-medium",children:c()},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Navigation.tsx",lineNumber:193,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Navigation.tsx",lineNumber:182,columnNumber:15},this),e.jsxDEV(jt,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Navigation.tsx",lineNumber:195,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Navigation.tsx",lineNumber:178,columnNumber:13},this),i&&e.jsxDEV("div",{className:"absolute top-full mt-2 right-0 w-64 backdrop-blur-sm rounded-xl shadow-lg overflow-hidden border border-white/10",style:{backgroundColor:"var(--chain-bg)",opacity:.95},children:[e.jsxDEV("div",{className:"py-2",children:[e.jsxDEV("div",{className:"px-4 py-2 text-xs text-gray-400 uppercase font-semibold",children:"Select Network"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Navigation.tsx",lineNumber:204,columnNumber:19},this),w.map(g=>e.jsxDEV("button",{onClick:()=>{o(g.id),u(!1)},className:`w-full flex items-center px-4 py-3.5 hover:bg-theme-primary/10 text-text-primary text-left transition-colors ${a===g.id?"bg-theme-primary/15":""}`,children:[e.jsxDEV("div",{className:"flex items-center space-x-3 flex-1",children:[e.jsxDEV("div",{className:"w-6 h-6 rounded-full bg-theme-primary flex items-center justify-center text-xs font-bold",children:g.initial},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Navigation.tsx",lineNumber:217,columnNumber:25},this),e.jsxDEV("span",{className:"font-medium",children:g.name},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Navigation.tsx",lineNumber:220,columnNumber:25},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Navigation.tsx",lineNumber:216,columnNumber:23},this),a===g.id&&e.jsxDEV("span",{className:"text-xs bg-theme-primary/20 px-2 py-1 rounded-full",children:"Active"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Navigation.tsx",lineNumber:223,columnNumber:25},this)]},g.id,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Navigation.tsx",lineNumber:208,columnNumber:21},this))]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Navigation.tsx",lineNumber:203,columnNumber:17},this),e.jsxDEV("div",{className:"border-t border-white/10 mt-1",children:e.jsxDEV("button",{onClick:l,className:"w-full flex items-center space-x-2 px-4 py-3.5 text-error-main hover:bg-black/20 transition-colors",children:[e.jsxDEV(Dn,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Navigation.tsx",lineNumber:233,columnNumber:21},this),e.jsxDEV("span",{className:"font-medium",children:"Disconnect Wallet"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Navigation.tsx",lineNumber:234,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Navigation.tsx",lineNumber:229,columnNumber:19},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Navigation.tsx",lineNumber:228,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Navigation.tsx",lineNumber:199,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Navigation.tsx",lineNumber:177,columnNumber:11},this),e.jsxDEV("button",{className:"w-10 h-10 flex items-center justify-center text-text-primary hover:bg-black/20 rounded-full transition-colors",children:e.jsxDEV(En,{className:"w-5 h-5"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Navigation.tsx",lineNumber:241,columnNumber:13},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Navigation.tsx",lineNumber:240,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Navigation.tsx",lineNumber:176,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Navigation.tsx",lineNumber:157,columnNumber:7},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Navigation.tsx",lineNumber:156,columnNumber:5},this)}var F=(t=>(t[t.TEXT=0]="TEXT",t[t.IMAGE=1]="IMAGE",t[t.VIDEO=2]="VIDEO",t[t.LINK=3]="LINK",t[t.EVENT=4]="EVENT",t[t.POLL=5]="POLL",t))(F||{});const Gr=async t=>{try{const s=JSON.stringify(Yr(t));console.log(`[createBlockchainPost]: metadata: ${s}`);const n=parseInt(t.tribeId);console.log(`[createBlockchainPost]: tribeId: ${n}`);const r=await q.createTribePost({tribeId:n,metadata:s,postType:t.type,content:t.content});console.log(`[createBlockchainPost]: Post created with hash: ${r}`);const a=`post-${Date.now()}`;return{hash:r,postId:a}}catch(s){throw console.error("Error creating blockchain post:",s),s}},Yr=t=>{var n,r,a;const s={title:t.title||"",content:t.content,type:t.type,tags:t.tags||[],createdAt:new Date().toISOString()};switch(t.type){case"EVENT":return{...s,eventDetails:t.eventDetails,event:{title:t.title||"",startDate:(n=t.eventDetails)==null?void 0:n.startDate,endDate:(r=t.eventDetails)==null?void 0:r.endDate,location:(a=t.eventDetails)==null?void 0:a.location}};case"POLL":return{...s,pollDetails:t.pollDetails};case"PROJECT":return{...s,projectDetails:t.projectDetails};case"RESOURCE":return{...s,resourceDetails:t.resourceDetails};case"RICH_MEDIA":return{...s,mediaContent:t.mediaContent};case"COMMUNITY_UPDATE":return{...s,isPremium:t.isPremium||!1};default:return s}},Ls={loading:!1,creatingPost:!1,error:null,posts:[],draft:{type:"TEXT",content:"",tribeId:"",title:"",description:"",tags:[],mediaContent:[]},pendingPosts:[]},Es=Vt("posts/createPost",async(t,{rejectWithValue:s})=>{try{const n=await Gr(t);return console.log(`[createPost]: Post created with hash in PostSlice: ${t}`),{id:n,...t,createdAt:Date.now()}}catch(n){return console.error("Error in createPost thunk:",n),s(n.message||"Failed to create post")}}),Bs=Vt("posts/fetchByTribe",async(t,{rejectWithValue:s})=>{try{await new Promise(r=>setTimeout(r,500));const n=[];for(let r=0;r<5;r++){const a=["TEXT","EVENT","POLL","IMAGE","VIDEO"][r%5],o=a==="TEXT"?F.TEXT:a==="IMAGE"?F.IMAGE:a==="VIDEO"?F.VIDEO:a==="LINK"?F.LINK:a==="EVENT"?F.EVENT:a==="POLL"?F.POLL:F.TEXT,i={id:`post-${r}-${Date.now()}`,content:`This is post #${r} content with some text content.`,author:"0x0000000000000000000000000000000000000000",createdAt:Date.now()-r*864e5,type:o,tribeId:parseInt(t),metadata:{type:o,content:`This is post #${r} content with some text content.`,title:`Post #${r}`,description:`This is a ${a} post #${r}`,tags:[],createdAt:new Date(Date.now()-r*864e5).toISOString(),event:a==="EVENT"?{title:`Event #${r}`,startDate:new Date(Date.now()+864e5).toISOString(),endDate:new Date(Date.now()+9e7).toISOString(),location:"Virtual"}:void 0,poll:a==="POLL"?{question:`Poll Question #${r}`,options:["Option 1","Option 2"],endDate:new Date(Date.now()+864e5).toISOString()}:void 0},stats:{viewCount:Math.floor(Math.random()*500),shareCount:Math.floor(Math.random()*10),saveCount:Math.floor(Math.random()*5),commentCount:Math.floor(Math.random()*20),likeCount:Math.floor(Math.random()*50)}};n.push(i)}return n}catch{return s("Failed to fetch posts")}}),Qt=It({name:"posts",initialState:Ls,reducers:{setCreatingPost:(t,s)=>{t.creatingPost=s.payload},setPostType:(t,s)=>{t.draft.type=typeof s.payload=="string"?s.payload:F[s.payload]},updateDraft:(t,s)=>{t.draft={...t.draft,...s.payload}},resetDraft:t=>{t.draft=Ls.draft},updatePostStatus:(t,s)=>{const{txHash:n,confirmed:r,postId:a}=s.payload,o=t.posts.find(i=>{if(i.metadata){const u=i.metadata.blockchainData;return(u==null?void 0:u.txHash)===n}return!1});if(o&&o.metadata){const i=o.metadata.blockchainData;i?i.confirmed=r:o.metadata.blockchainData={txHash:n,confirmed:r},a&&(o.id=a)}r&&(t.pendingPosts=t.pendingPosts.filter(i=>i!==n))}},extraReducers:t=>{t.addCase(Es.pending,s=>{s.loading=!0,s.error=null}).addCase(Es.fulfilled,(s,n)=>{s.loading=!1,s.posts.unshift(n.payload),s.creatingPost=!1,s.draft=Ls.draft}).addCase(Es.rejected,(s,n)=>{s.loading=!1,s.error=n.payload}).addCase(Bs.pending,s=>{s.loading=!0,s.error=null}).addCase(Bs.fulfilled,(s,n)=>{s.loading=!1,s.posts=n.payload}).addCase(Bs.rejected,(s,n)=>{s.loading=!1,s.error=n.payload})}}),{setCreatingPost:Ze,setPostType:Nt,updateDraft:Ks,resetDraft:yt,updatePostStatus:Qi}=Qt.actions,Zt=t=>t.posts.draft,en=t=>t.posts.creatingPost,Xr=t=>t.posts.error,Qr=Qt.reducer,ls=()=>{const{address:t,isConnected:s}=Qs(),{chainId:n}=Ve(),{connectAsync:r}=vn(),{disconnectAsync:a}=Tn(),[o,i]=m.useState(null);m.useEffect(()=>{(async()=>{if(s&&window.ethereum)try{console.log("[useWallet] Initializing wallet client with ethereum provider");const c=Ys({transport:Xs(window.ethereum)});console.log("[useWallet] Wallet client created:",{hasClient:!!c,hasAccount:!!c.account,address:t}),i(c)}catch(c){console.error("[useWallet] Failed to initialize wallet client:",c)}else s||i(null)})()},[s,t]);const u=m.useCallback(async()=>{try{if(!window.ethereum)throw new Error("No ethereum provider found");await r({connector:kn()})}catch(f){console.error("Failed to connect wallet:",f)}},[r]),l=m.useCallback(async()=>{try{await a(),i(null)}catch(f){console.error("Failed to disconnect wallet:",f)}},[a]);return{address:t,isConnected:s,chainId:n,walletClient:o,connectWallet:u,disconnectWallet:l}},gt=(t,s)=>{try{return!t||t==="{}"?s:JSON.parse(t)}catch(n){return console.error("Error parsing metadata:",n),s}},qs={},Zr=5*60*1e3,ea=t=>{const s=qs[t];if(s){if(Date.now()-s.timestamp>Zr){delete qs[t];return}return s}},sa=(t,s,n)=>{qs[t]={data:s,metadata:n,timestamp:Date.now()}};var ue=(t=>(t.CONNECTION_ERROR="CONNECTION_ERROR",t.VALIDATION_ERROR="VALIDATION_ERROR",t.CONTRACT_ERROR="CONTRACT_ERROR",t.BLOCKCHAIN_ERROR="BLOCKCHAIN_ERROR",t.ALREADY_EXISTS="ALREADY_EXISTS",t.NOT_FOUND="NOT_FOUND",t.UNAUTHORIZED="UNAUTHORIZED",t.UNKNOWN="UNKNOWN",t))(ue||{});function ta(t,s){var h,b,w;console.log("Original tribeData before mapping:",JSON.stringify({...t,entryFee:((h=t.entryFee)==null?void 0:h.toString())||"0"}));let n={};if(typeof t.metadata=="string"&&t.metadata)try{n=JSON.parse(t.metadata),console.log("Successfully parsed metadata string for tribe",t.id,":",n)}catch(g){console.error(`Failed to parse tribe ${t.id} metadata:`,g)}else typeof t.metadata=="object"&&t.metadata!==null&&(n=t.metadata,console.log("Using metadata object directly for tribe",t.id,":",n));const r=t.name||"",a=(n==null?void 0:n.name)||(n==null?void 0:n.displayName)||"",o=t.id.toString();console.log(`Tribe ${o} name sources:`,{contractName:r,metadataName:a,rawMetadataString:typeof t.metadata=="string"?t.metadata.length>100?`${t.metadata.substring(0,100)}...`:t.metadata:"Not a string"});let i;const u=!r||r===`Tribe ${o}`||r.trim()==="",l=a&&a.trim()!=="";u?l?(i=a.trim(),console.log(`Using metadata name for tribe ${o}: "${i}"`)):(i=`Tribe #${o}`,console.log(`Using default name for tribe ${o}: "${i}"`)):(i=r.trim(),console.log(`Using contract name for tribe ${o}: "${i}"`));let f;if(n!=null&&n.createdAt)try{typeof n.createdAt=="string"?f=Math.floor(new Date(n.createdAt).getTime()/1e3):f=Number(n.createdAt)}catch{f=t.createdAt||Math.floor(Date.now()/1e3)}else f=t.createdAt||Math.floor(Date.now()/1e3);(b=t.userMembershipStatus)!=null&&b.isMember,(w=t.userMembershipStatus)!=null&&w.isAdmin;const c=t.nftRequirements||[];let p;try{typeof t.entryFee=="bigint"?p=t.entryFee:typeof t.entryFee=="string"||typeof t.entryFee=="number"?p=BigInt(t.entryFee):p=BigInt(0)}catch(g){console.error("Error converting entryFee to bigint:",g),p=BigInt(0)}return{id:o,name:i,metadata:typeof t.metadata=="string"?t.metadata:JSON.stringify(n),owner:t.owner,admins:t.admins||[],memberCount:t.memberCount,createdAt:f,joinType:t.joinType,entryFee:p,nftRequirements:c}}const Re=class Re{constructor(s){L(this,"chainId");L(this,"walletClient");L(this,"publicClient");L(this,"userAddress");this.chainId=s,this.initializeClients()}async initializeClients(){try{this.publicClient=te(this.chainId);const s=await Te();if(s){const[n]=await s.request({method:"eth_requestAccounts"});n&&(this.userAddress=n,this.walletClient=Ys({account:n,chain:ws(this.chainId),transport:Xs(s)}))}}catch(s){console.error("Failed to initialize clients:",s)}}handleError(s,n,r){console.error(`${s}: ${n}`,r);const a=new Error(n);return a.type=s,a.originalError=r,a}async connect(s,n){this.walletClient=s,this.userAddress=n}async createTribe(s,n,r=[],a=0,o=0n,i=[]){if(!this.walletClient||!this.userAddress)throw this.handleError(ue.CONNECTION_ERROR,"Wallet not connected");try{const{tribeController:u}=J(this.chainId),l=ws(this.chainId);r.includes(this.userAddress)||(r=[...r,this.userAddress]);const f=s.trim();if(!f)throw this.handleError(ue.VALIDATION_ERROR,"Tribe name cannot be empty");let c;try{c=JSON.parse(n),(!c.name||c.name.trim()==="")&&(c.name=f,n=JSON.stringify(c))}catch(g){console.error("Couldn't parse metadata JSON:",g),n=JSON.stringify({name:f})}console.log("Creating tribe with:",{name:f,metadataPreview:typeof c=="object"?{...c,fullString:n.length>100?`${n.substring(0,100)}...`:n}:{error:"Invalid metadata",metadata:n},admins:r,joinType:a,entryFee:o.toString()});const p=await this.walletClient.writeContract({address:u.address,abi:u.abi,functionName:"createTribe",args:[f,n,r,BigInt(a),o,i],account:this.userAddress,chain:l}),b=(await Fs(p,this.chainId)).logs.find(g=>g.address.toLowerCase()===u.address.toLowerCase());if(!b||!b.topics[1])throw this.handleError(ue.BLOCKCHAIN_ERROR,"Failed to get tribe ID from transaction");return parseInt(b.topics[1],16)}catch(u){throw this.handleError(ue.BLOCKCHAIN_ERROR,"Failed to create tribe",u)}}async getTribeConfig(s){var n;try{const{tribeController:r}=J(this.chainId),a=te(this.chainId);let o,i={success:!0};try{if(o=await a.readContract({address:r.address,abi:r.abi,functionName:"getTribeConfigView",args:[BigInt(s)]}),Array.isArray(o))console.log(`Tribe ${s} raw config (array):`,o),i={success:!0,name:o[0]||`Tribe ${s}`,metadata:o[1]||"{}",admins:o[2]||[],joinType:Number(o[3]||0),entryFee:(o[4]||0).toString(),nftRequirements:o[5]||[]};else if(typeof o=="object"&&o!==null){const u=o;console.log(`Tribe ${s} raw config (object):`,u),i={success:!0,name:u.name||`Tribe ${s}`,metadata:u.metadata||"{}",admins:Array.isArray(u.admins)?u.admins:[],joinType:typeof u.joinType=="number"?u.joinType:0,entryFee:((n=u.entryFee)==null?void 0:n.toString())||"0",nftRequirements:Array.isArray(u.nftRequirements)?u.nftRequirements:[]}}else throw new Error("Invalid config format")}catch(u){console.error("Error getting tribe config from contract:",u),i={success:!1,error:"Failed to get tribe config"}}if(i.success&&i.metadata){let u;try{console.log(`Tribe ${s} raw metadata string:`,i.metadata),u=gt(i.metadata,{description:"",createdAt:new Date().toISOString()}),console.log(`Tribe ${s} parsed metadata:`,u)}catch(f){console.error(`Error parsing metadata for tribe ${s}:`,f),u={description:"",createdAt:new Date().toISOString()}}let l=i.name||`Tribe ${s}`;return u.name&&u.name.trim()!==""&&(!l||l===`Tribe ${s}`||l.trim()===""?(l=u.name.trim(),console.log(`Using metadata name for tribe ${s}: "${l}"`)):console.log(`Keeping contract name for tribe ${s}: "${l}" (metadata name was: "${u.name}")`)),{name:l,description:u.description||"",coverImage:u.coverImage,avatar:u.avatar,isPrivate:u.isPrivate||!1,entryFee:i.entryFee||"0",nftRequirements:i.nftRequirements||[],metadata:u,admins:i.admins||[],joinType:i.joinType||0}}try{const u=await Jr(this.chainId,s,a),l=gt(u,{description:"",createdAt:new Date().toISOString()});return{name:i.name||`Tribe ${s}`,description:l.description||"",coverImage:l.coverImage,avatar:l.avatar,isPrivate:l.isPrivate||!1,entryFee:i.entryFee||"0",nftRequirements:i.nftRequirements||[],metadata:l,admins:i.admins||[],joinType:i.joinType||0}}catch(u){console.error("Error extracting metadata from transaction:",u)}return{name:i.name||`Tribe ${s}`,description:"",isPrivate:!1,entryFee:"0",nftRequirements:[],metadata:{description:"",createdAt:new Date().toISOString()},admins:i.admins||[],joinType:i.joinType||0}}catch(r){throw this.handleError(ue.BLOCKCHAIN_ERROR,"Failed to get tribe config",r)}}async getTribeData(s){var n;try{if(Re.INVALID_TRIBE_IDS.has(s))throw new Error("Invalid tribe ID");const r=`tribe_${this.chainId}_${s}`,a=ea(r);if(a&&Date.now()-a.timestamp<Re.CACHE_DURATION)return a.data;const{tribeController:o}=J(this.chainId);try{const i=await this.publicClient.readContract({address:o.address,abi:o.abi,functionName:"getTribeDetails",args:[BigInt(s)]});let u={description:"",createdAt:new Date().toISOString(),isPrivate:!1,avatar:"",coverImage:"",topics:[]};try{const h=JSON.parse(i.metadata||"{}");u={...u,...h}}catch(h){console.error(`Error parsing metadata for tribe ${s}:`,h)}const l={id:s.toString(),name:i.name||`Tribe #${s}`,metadata:i.metadata||"{}",owner:i.admin,admins:[],memberCount:Number(i.memberCount),createdAt:Math.floor(Date.now()/1e3),joinType:Number(i.joinType),entryFee:i.entryFee,nftRequirements:[],isPrivate:!!u.isPrivate,isActive:i.isActive,canMerge:i.canMerge,members:[]},[f,c,p]=await Promise.all([this.getNFTRequirements(s),this.getTribeAdmins(s),this.userAddress?this.getMemberStatus(s,this.userAddress):Promise.resolve(null)]);return l.nftRequirements=(f==null?void 0:f.nftRequirements)||[],l.admins=c,l.members=c.map(h=>({id:h,username:h,avatar:`https://api.dicebear.com/7.x/shapes/svg?seed=${h}`,role:"admin"})),p!==null&&(l.userMembershipStatus={isMember:p===1,isAdmin:p===2,isPending:p===3,status:p}),sa(r,{data:l,timestamp:Date.now()}),l}catch(i){throw(n=i==null?void 0:i.message)!=null&&n.includes("Invalid tribe ID")&&Re.INVALID_TRIBE_IDS.add(s),i}}catch(r){throw this.handleError(ue.BLOCKCHAIN_ERROR,"Failed to get tribe data",r)}}async getNFTRequirements(s){try{const{tribeController:n}=J(this.chainId);return await this.publicClient.readContract({address:n.address,abi:n.abi,functionName:"getTribeConfigView",args:[BigInt(s)]})}catch(n){return console.error(`Error fetching NFT requirements for tribe ${s}:`,n),null}}async getTribeAdmins(s){try{const{tribeController:n}=J(this.chainId);return await this.publicClient.readContract({address:n.address,abi:n.abi,functionName:"getTribeWhitelist",args:[BigInt(s)]})}catch(n){return console.error(`Error fetching admins for tribe ${s}:`,n),[]}}async joinTribe(s){if(!this.walletClient||!this.userAddress)throw this.handleError(ue.CONNECTION_ERROR,"Wallet not connected");try{const{tribeController:n}=J(this.chainId),r=ws(this.chainId),a=await this.walletClient.writeContract({address:n.address,abi:n.abi,functionName:"joinTribe",args:[BigInt(s)],account:this.userAddress,chain:r});await Fs(a,this.chainId)}catch(n){throw this.handleError(ue.BLOCKCHAIN_ERROR,"Failed to join tribe",n)}}async requestToJoinTribe(s,n){if(!this.walletClient||!this.userAddress)throw this.handleError(ue.CONNECTION_ERROR,"Wallet not connected");try{const{tribeController:r}=J(this.chainId),a=ws(this.chainId),o=await this.walletClient.writeContract({address:r.address,abi:r.abi,functionName:"requestToJoinTribe",args:[BigInt(s)],value:n,account:this.userAddress,chain:a});await Fs(o,this.chainId)}catch(r){throw this.handleError(ue.BLOCKCHAIN_ERROR,"Failed to request to join tribe",r)}}async getMemberStatus(s,n){try{const{tribeController:r}=J(this.chainId),a=await this.publicClient.readContract({address:r.address,abi:r.abi,functionName:"getMemberStatus",args:[BigInt(s),n]});return Number(a)}catch(r){throw this.handleError(ue.BLOCKCHAIN_ERROR,"Failed to get member status",r)}}async getTribesCount(){try{const{tribeController:s}=J(this.chainId),n=await this.publicClient.readContract({address:s.address,abi:s.abi,functionName:"nextTribeId",args:[]});return console.log(`Got tribes count from nextTribeId: ${n}`),Number(n)}catch(s){throw this.handleError(ue.BLOCKCHAIN_ERROR,"Failed to get tribes count",s)}}async getUserTribes(s){try{const{tribeController:n}=J(this.chainId);return(await this.publicClient.readContract({address:n.address,abi:n.abi,functionName:"getUserTribes",args:[s]})).map(Number)}catch(n){throw this.handleError(ue.BLOCKCHAIN_ERROR,"Failed to get user tribes",n)}}mapTribeDataToUIFormat(s,n){return ta(s)}};L(Re,"CACHE_DURATION",5*60*1e3),L(Re,"INVALID_TRIBE_IDS",new Set);let Cs=Re;class na{constructor(s){L(this,"chainId");L(this,"walletClient",null);L(this,"userAddress",null);this.chainId=s}async connect(s,n){this.walletClient=s,this.userAddress=n}isWalletConnected(){return!!this.walletClient&&!!this.userAddress}async getProfileById(s){const n=te(this.chainId),{profileNFTMinter:r}=J(this.chainId),a=await n.readContract({address:r.address,abi:r.abi,functionName:"getProfileByTokenId",args:[BigInt(s)]}),[o,i]=a,u=this.parseMetadata(i);return{tokenId:s.toString(),username:o,metadata:u,nftUri:u.avatar,owner:this.userAddress||""}}async getProfileByUsername(s){const n=te(this.chainId),{profileNFTMinter:r}=J(this.chainId),a=await n.readContract({address:r.address,abi:r.abi,functionName:"getProfileIdByUsername",args:[s]});return this.getProfileById(Number(a))}async getProfileByAddress(s){console.log(`[ProfileService] Getting profile for address: ${s}`);try{const n=te(this.chainId),{profileNFTMinter:r}=J(this.chainId),a=await n.readContract({address:r.address,abi:r.abi,functionName:"balanceOf",args:[s]});if(console.log(`[ProfileService] Profile NFT balance for ${s}: ${a}`),!a||a===0n)return console.log(`[ProfileService] No profile found for address ${s}`),null;let o=null;for(let c=0;c<10;c++)try{if((await n.readContract({address:r.address,abi:r.abi,functionName:"ownerOf",args:[BigInt(c)]})).toLowerCase()===s.toLowerCase()){o=BigInt(c);break}}catch{continue}if(o===null)return console.log(`[ProfileService] Could not find token ID for address ${s}`),null;const i=await n.readContract({address:r.address,abi:r.abi,functionName:"getProfileByTokenId",args:[o]}),[u,l]=i,f=this.parseMetadata(l);return console.log(`[ProfileService] Found profile for ${s}: ${u}`),{tokenId:o.toString(),username:u,metadata:f,nftUri:f.avatar,owner:s}}catch(n){return console.error(`[ProfileService] Error getting profile for ${s}:`,n),null}}async createProfile(s,n){if(!this.walletClient)throw new Error("Wallet not connected: walletClient is missing");if(!this.userAddress)throw new Error("Wallet not connected: userAddress is missing");const{profileNFTMinter:r}=J(this.chainId),a=JSON.stringify(n),o=ks(this.chainId);try{const i=await this.walletClient.writeContract({chain:o,address:r.address,abi:r.abi,functionName:"createProfile",args:[s,a],account:this.userAddress});console.log(`Profile creation transaction submitted: ${i}`);const f=(await te(this.chainId).waitForTransactionReceipt({hash:i})).logs.find(p=>p.address.toLowerCase()===r.address.toLowerCase());if(!f||!f.topics||f.topics.length<4)throw new Error("Failed to find profile creation event");return parseInt(f.topics[3]||"0",16)}catch(i){throw console.error("[ProfileService] Error creating profile:",i),i}}async updateProfileMetadata(s,n){if(!this.walletClient||!this.userAddress)throw new Error("Wallet not connected");const{profileNFTMinter:r}=J(this.chainId),a=JSON.stringify(n),o=ks(this.chainId),i=await this.walletClient.writeContract({chain:o,address:r.address,abi:r.abi,functionName:"updateProfileMetadata",args:[BigInt(s),a],account:this.userAddress});await te(this.chainId).waitForTransactionReceipt({hash:i})}async checkUsernameAvailability(s){const n=te(this.chainId),{profileNFTMinter:r}=J(this.chainId);return!await n.readContract({address:r.address,abi:r.abi,functionName:"usernameExists",args:[s]})}async findUsernameByAddress(s){const n=await this.checkProfileOwnership(s);return n?n.username:null}async skipProfileCreation(s){try{return localStorage.setItem("profile_creation_skipped",JSON.stringify({address:s,timestamp:Date.now()})),!0}catch{return!1}}async hasSkippedProfileCreation(s){try{const n=localStorage.getItem("profile_creation_skipped");if(!n)return!1;const{address:r}=JSON.parse(n);return r.toLowerCase()===s.toLowerCase()}catch{return!1}}async checkProfileOwnership(s){return this.getProfileByAddress(s)}parseMetadata(s){try{const n=JSON.parse(s);return{avatar:n.avatar||"",bio:n.bio||"",createdAt:n.createdAt||Date.now()}}catch{return{avatar:"",bio:"",createdAt:Date.now()}}}}class Us{constructor(s){L(this,"chainId");L(this,"cache");L(this,"CACHE_TTL",5*60*1e3);L(this,"lastConnectedAddress",null);L(this,"cacheUpdateCallbacks",[]);console.log(`[IndexerService] Initializing with chainId: ${s}`),this.chainId=s,this.cache={posts:{byId:{},byUser:{},byTribe:{},lastUpdate:0},tribes:{byId:{},byUser:{},lastUpdate:0},profiles:{byAddress:{},lastUpdate:0}}}hasErrorMessage(s,n){return s instanceof Error&&typeof s.message=="string"&&s.message.includes(n)}logError(s,n){n instanceof Error?console.error(`[IndexerService] ${s}:`,n.message):console.error(`[IndexerService] ${s}:`,n)}onCacheUpdate(s){return this.cacheUpdateCallbacks.push(s),()=>{this.cacheUpdateCallbacks=this.cacheUpdateCallbacks.filter(n=>n!==s)}}notifyCacheUpdate(s,n){this.cacheUpdateCallbacks.forEach(r=>r(s,n))}normalizeAddress(s){try{return Cn(s.toLowerCase())}catch{throw new Error(`Invalid address format: ${s}`)}}async getPostsSince(s){return await this.ensureCacheValid("posts"),Object.values(this.cache.posts.byId).filter(n=>Number(n.createdAt)>=s)}async getPostsByUser(s){return await this.ensureCacheValid("posts"),(this.cache.posts.byUser[this.normalizeAddress(s)]||[]).map(r=>this.cache.posts.byId[r]).filter(Boolean)}async getPostsByTribe(s){return await this.ensureCacheValid("posts"),(this.cache.posts.byTribe[s]||[]).map(r=>this.cache.posts.byId[r]).filter(Boolean)}async getTribesSince(s){return await this.ensureCacheValid("tribes"),Object.values(this.cache.tribes.byId).filter(n=>Number(n.createdAt)>=s)}async getTribesByUser(s){return await this.ensureCacheValid("tribes"),(this.cache.tribes.byUser[this.normalizeAddress(s)]||[]).map(r=>this.cache.tribes.byId[r]).filter(Boolean)}async getProfilesByAddresses(s){return await this.ensureCacheValid("profiles"),s.map(n=>this.cache.profiles.byAddress[this.normalizeAddress(n)]).filter(Boolean)}async updateUserMetadata(s,n){const r=te(this.chainId),{profileNFTMinter:a}=J(this.chainId),o=await r.readContract({address:a.address,abi:a.abi,functionName:"balanceOf",args:[this.normalizeAddress(s)]});if(!o||o===0n)throw new Error("No profile found for address");for(let i=0n;i<100n;i++)try{if((await r.readContract({address:a.address,abi:a.abi,functionName:"ownerOf",args:[i]})).toLowerCase()===this.normalizeAddress(s).toLowerCase()){const l=await r.readContract({address:a.address,abi:a.abi,functionName:"getProfileByTokenId",args:[i]}),[f,,c]=l,p=JSON.parse(n);this.cache.profiles.byAddress[this.normalizeAddress(s)]={tokenId:i.toString(),username:f,metadata:{avatar:p.avatar||"",bio:p.bio||"",createdAt:p.createdAt||Date.now()},nftUri:p.avatar||"",owner:c};break}}catch{continue}}clearCache(){this.cache={posts:{byId:{},byUser:{},byTribe:{},lastUpdate:0},tribes:{byId:{},byUser:{},lastUpdate:0},profiles:{byAddress:{},lastUpdate:0}}}async refreshCache(){await Promise.all([this.updatePostsCache(),this.updateTribesCache(),this.updateProfilesCache()])}async ensureCacheValid(s){if(Date.now()-this.cache[s].lastUpdate>this.CACHE_TTL)switch(s){case"posts":await this.updatePostsCache();break;case"tribes":await this.updateTribesCache();break;case"profiles":await this.updateProfilesCache();break}}async updatePostsCache(){const s=te(this.chainId),{postMinter:n}=J(this.chainId);try{const r=await s.readContract({address:n.address,abi:n.abi,functionName:"nextPostId",args:[]});if(r===void 0)throw new Error("Failed to get post count from contract");const a=50n,o=r,i=Math.ceil(Number(o)/Number(a));for(let u=0;u<i;u++){const l=BigInt(u)*a,f=l+a>o?o:l+a;for(let c=l;c<f;c++)try{const p=await s.readContract({address:n.address,abi:n.abi,functionName:"getPost",args:[c]}),[h,b,w,g,d,N,k,D,x]=p;let V;try{V=JSON.parse(g)}catch(j){console.error(`Error parsing metadata for post ${c}:`,j);continue}const U={id:c.toString(),content:V.content||"",author:b,tribeId:Number(w),createdAt:V.createdAt||Date.now(),type:V.type||"text"};this.cache.posts.byId[U.id]=U;const E=this.cache.posts.byUser[b]||[];E.includes(U.id)||(E.push(U.id),this.cache.posts.byUser[b]=E);const C=this.cache.posts.byTribe[U.tribeId]||[];C.includes(U.id)||(C.push(U.id),this.cache.posts.byTribe[U.tribeId]=C)}catch(p){console.error(`Error fetching post ${c}:`,p)}}this.cache.posts.lastUpdate=Date.now()}catch(r){console.error("Error updating posts cache:",r)}}async updateTribesCache(){const s=te(this.chainId),{tribeController:n}=J(this.chainId);try{const r=await s.readContract({address:n.address,abi:n.abi,functionName:"nextTribeId",args:[]});if(r===void 0)throw new Error("Failed to get tribe count from contract");for(let a=1n;a<r;a++)try{const o=await s.readContract({address:n.address,abi:n.abi,functionName:"getTribeConfigView",args:[a]}),i=await s.readContract({address:n.address,abi:n.abi,functionName:"getTribeAdmin",args:[a]}),u=await s.readContract({address:n.address,abi:n.abi,functionName:"getMemberCount",args:[a]});let l=`Tribe ${a}`,f="";try{const h=await s.readContract({address:n.address,abi:n.abi,functionName:"getTribeConfigView",args:[BigInt(a)]});if(Array.isArray(h))l=h[0]||`Tribe ${a}`,f=h[1]||"{}";else if(typeof h=="object"&&h!==null){const b=h;l=b.name||`Tribe ${a}`,f=b.metadata||"{}"}}catch(h){console.warn(`Failed to get name for tribe ${a}, using default name:`,h)}const c={id:a.toString(),name:l,metadata:f,owner:i,admins:[i],memberCount:Number(u),createdAt:Date.now(),joinType:o.joinType,entryFee:o.entryFee,nftRequirements:o.nftRequirements||[]};this.cache.tribes.byId[c.id]=c;const p=this.cache.tribes.byUser[i]||[];p.includes(c.id)||(p.push(c.id),this.cache.tribes.byUser[i]=p)}catch(o){console.error(`Error fetching tribe ${a}:`,o)}this.cache.tribes.lastUpdate=Date.now()}catch(r){console.error("Error updating tribes cache:",r)}}async updateProfilesCache(){console.log("[IndexerService] Starting profile cache update");const s=te(this.chainId),{profileNFTMinter:n}=J(this.chainId);if(!(n!=null&&n.address)){console.error("[IndexerService] Profile NFT contract address not found");return}try{try{const l=await s.getBytecode({address:n.address});if(!l||l==="0x"){console.error("[IndexerService] Profile NFT contract not found at address:",n.address);return}}catch(l){console.error("[IndexerService] Error verifying Profile NFT contract:",l);return}let r=0;const a=5,o=5n;let i=0n,u=0;for(;r<a;){try{const l=await s.readContract({address:n.address,abi:n.abi,functionName:"ownerOf",args:[i]}),f=await s.readContract({address:n.address,abi:n.abi,functionName:"getProfileByTokenId",args:[i]}),[c,p]=f,h=this.normalizeAddress(l);console.log(`[IndexerService] Found profile for tokenId ${i}: ${c} (${h})`);let b;try{b=JSON.parse(p)}catch(g){console.log(`[IndexerService] Failed to parse metadata for ${c}: ${g.message}`),b={avatar:"",bio:"",createdAt:Date.now()}}const w={tokenId:i.toString(),username:c,metadata:{avatar:b.avatar||"",bio:b.bio||"",createdAt:b.createdAt||Date.now()},nftUri:b.avatar||"",owner:h};this.cache.profiles.byAddress[h]=w,this.notifyCacheUpdate("profile",{address:h,profile:w,hasProfile:!0}),u++,r=0}catch(l){if(l instanceof Error&&l.message.includes("ERC721NonexistentToken")){if(console.log(`[IndexerService] Token ${i} not minted yet, trying next token...`),u>0&&r>2){console.log(`[IndexerService] Found ${u} profiles and hit several gaps, assuming end of minted tokens`);break}r++}else console.error(`[IndexerService] Error fetching profile for tokenId ${i}:`,l),r++}i+=1n,i%o===0n&&await new Promise(l=>setTimeout(l,100))}console.log(`[IndexerService] Profile cache update complete. Found ${u} profiles.`),this.cache.profiles.lastUpdate=Date.now()}catch(r){console.error("[IndexerService] Error updating profiles cache:",r)}}getUsernameByAddress(s){const n=this.cache.posts.byUser[this.normalizeAddress(s)]||[];if(n.length>0){const r=this.cache.posts.byId[n[0]];return(r==null?void 0:r.author)||null}return null}getAddressByUsername(s){for(const n of Object.values(this.cache.posts.byId))if(n.author.toLowerCase()===s.toLowerCase())return n.author;return null}getUserMetadata(s){return this.cache.profiles.byAddress[this.normalizeAddress(s)]||null}async forceRefreshContent(s,n){switch(s){case"post":await this.refreshPost(n);break;case"tribe":await this.refreshTribe(n);break;case"profile":await this.refreshProfile(n);break}}async refreshPost(s){try{const n=te(this.chainId),{contentManager:r}=J(this.chainId),a=await n.readContract({address:r.address,abi:r.abi,functionName:"getPost",args:[BigInt(s)]}),[o,i,u,l,f]=a,c={id:s,content:o,author:i,tribeId:Number(u),createdAt:Number(l)*1e3,type:f};this.cache.posts.byId[c.id]=c;const p=this.cache.posts.byUser[this.normalizeAddress(i)]||[];p.includes(c.id)||(p.push(c.id),this.cache.posts.byUser[this.normalizeAddress(i)]=p);const h=this.cache.posts.byTribe[c.tribeId]||[];h.includes(c.id)||(h.push(c.id),this.cache.posts.byTribe[c.tribeId]=h)}catch(n){console.error(`Error refreshing post ${s}:`,n)}}async refreshTribe(s){try{const n=te(this.chainId),{tribeController:r}=J(this.chainId),a=await n.readContract({address:r.address,abi:r.abi,functionName:"getTribe",args:[BigInt(s)]}),[o,i,u,l,f,c,p,h,b]=a,w={id:s,name:o,metadata:i,owner:u,admins:l,memberCount:Number(f),createdAt:Number(c)*1e3,joinType:p,entryFee:h,nftRequirements:b};this.cache.tribes.byId[w.id]=w;const g=this.cache.tribes.byUser[this.normalizeAddress(u)]||[];g.includes(w.id)||(g.push(w.id),this.cache.tribes.byUser[this.normalizeAddress(u)]=g)}catch(n){console.error(`Error refreshing tribe ${s}:`,n)}}async refreshProfile(s){const n=this.normalizeAddress(s);try{const r=te(this.chainId),{profileNFTMinter:a}=J(this.chainId);if(!(a!=null&&a.address))throw new Error("Profile NFT contract address not found");const o=await r.readContract({address:a.address,abi:a.abi,functionName:"balanceOf",args:[n]});if(!o||o===0n){const u={tokenId:"0",username:`User-${n.substring(2,6)}`,metadata:{avatar:"",bio:"",createdAt:Date.now()},nftUri:"",owner:n};this.cache.profiles.byAddress[n]=u,this.notifyCacheUpdate("profile",{address:n,profile:u,hasProfile:!1});return}let i=!1;for(let u=0n;u<100n&&!i;u++)try{const l=await r.readContract({address:a.address,abi:a.abi,functionName:"ownerOf",args:[u]});if(this.normalizeAddress(l)===n){const[c,p]=await r.readContract({address:a.address,abi:a.abi,functionName:"getProfileByTokenId",args:[u]}),h=this.parseMetadata(p),b={tokenId:u.toString(),username:c,metadata:{avatar:h.avatar||"",bio:h.bio||"",createdAt:h.createdAt||Date.now()},nftUri:h.avatar||"",owner:n};this.cache.profiles.byAddress[n]=b,this.notifyCacheUpdate("profile",{address:n,profile:b,hasProfile:!0}),i=!0}}catch(l){if(l instanceof Error&&l.message.includes("ERC721NonexistentToken"))continue;throw l}if(!i&&o>0n)throw new Error(`Profile NFT found for ${n} but unable to locate token ID`)}catch(r){throw this.logError(`Error refreshing profile for ${n}`,r),r}}parseMetadata(s){try{return JSON.parse(s)}catch(n){return console.error(`[IndexerService] Failed to parse metadata: ${s.substring(0,50)}...`,n),{avatar:"",bio:"",createdAt:Date.now()}}}setConnectedUser(s){try{const n=this.normalizeAddress(s);if(this.lastConnectedAddress!==n){this.lastConnectedAddress=n,this.cache.posts.byUser[n]||(this.cache.posts.byUser[n]=[]);const r=this.cache.profiles.byAddress[n],a=te(this.chainId),{profileNFTMinter:o}=J(this.chainId);a.readContract({address:o.address,abi:o.abi,functionName:"balanceOf",args:[n]}).then(i=>{if(i>0n)r?this.notifyCacheUpdate("profile",{address:n,profile:r,hasProfile:!0}):this.refreshProfile(n);else{const f={tokenId:"0",username:`User-${n.substring(2,6)}`,metadata:{avatar:"",bio:"",createdAt:Date.now()},nftUri:"",owner:n};this.cache.profiles.byAddress[n]=f,this.notifyCacheUpdate("profile",{address:n,profile:f,hasProfile:!1})}}).catch(i=>{this.logError("Error checking profile balance in setConnectedUser",i),r&&this.notifyCacheUpdate("profile",{address:n,profile:r,hasProfile:!1})})}}catch(n){throw this.logError("Error in setConnectedUser",n),n}}updateChainId(s){this.chainId!==s&&(console.log(`[IndexerService] Updating chain ID from ${this.chainId} to ${s}`),this.chainId=s,this.cache={posts:{byId:{},byUser:{},byTribe:{},lastUpdate:0},tribes:{byId:{},byUser:{},lastUpdate:0},profiles:{byAddress:{},lastUpdate:0}})}}class Ge{constructor(s){L(this,"tribeService");L(this,"postService",null);L(this,"profileService",null);L(this,"indexerService");L(this,"chainId");L(this,"isInitialized",!1);this.chainId=s||0,this.tribeService=new Cs(this.chainId),this.indexerService=new Us(this.chainId)}async initialize(s){try{if(s)console.log(`[TribesSDK] Initializing with provided chainId: ${s}`),this.chainId=s;else if(!this.chainId)try{this.chainId=await he(),console.log(`[TribesSDK] Auto-detected chainId: ${this.chainId}`)}catch{console.warn(`[TribesSDK] Failed to auto-detect chainId, using default: ${this.chainId||20143}`),this.chainId=this.chainId||20143}console.log(`[TribesSDK] Initializing services with chainId: ${this.chainId}`),this.tribeService=new Cs(this.chainId),this.profileService=new na(this.chainId),this.indexerService=new Us(this.chainId),console.log("[TribesSDK] Starting cache initialization (non-blocking)"),this.initializeCache().catch(n=>{console.warn("[TribesSDK] Background cache initialization failed:",n)}),this.isInitialized=!0,console.log("[TribesSDK] Core initialization complete")}catch(n){throw console.error("[TribesSDK] Initialization failed:",n),this.isInitialized=!0,n}}async initializeCache(){try{await this.indexerService.refreshCache(),console.log("[TribesSDK] Cache successfully initialized")}catch(s){console.warn("[TribesSDK] Cache initialization failed, will retry later:",s),setTimeout(()=>{console.log("[TribesSDK] Retrying cache initialization"),this.indexerService.refreshCache().catch(n=>console.error("[TribesSDK] Cache retry failed:",n))},5e3)}}async connect(s,n){console.log("[TribesSDK] Connecting to wallet",{walletClientType:typeof s,hasWalletClient:!!s,address:n});try{this.tribeService&&await this.tribeService.connect(s,n),this.profileService&&await this.profileService.connect(s,n),this.indexerService.setConnectedUser(n),console.log("[TribesSDK] Successfully connected to wallet")}catch(r){throw console.error("[TribesSDK] Failed to connect to wallet:",r),r}}async getProfileById(s){if(!this.profileService)throw new Error("Profile service not initialized");return this.profileService.getProfileById(s)}async getProfileByUsername(s){if(!this.profileService)throw new Error("Profile service not initialized");return this.profileService.getProfileByUsername(s)}async getProfileByAddress(s){if(!this.profileService)throw new Error("Profile service not initialized");return this.profileService.getProfileByAddress(s)}async createProfile(s,n){if(!this.profileService)throw new Error("Profile service not initialized");if(!this.isWalletConnected())throw new Error("Wallet connection check failed. Please reconnect your wallet and try again.");return this.profileService.createProfile(s,n)}async updateProfileMetadata(s,n){if(!this.profileService)throw new Error("Profile service not initialized");return this.profileService.updateProfileMetadata(s,n)}async checkUsernameAvailability(s){if(!this.profileService)throw new Error("Profile service not initialized");return this.profileService.checkUsernameAvailability(s)}async checkProfileOwnership(s){if(!this.profileService)throw new Error("Profile service not initialized");return this.profileService.checkProfileOwnership(s)}async findUsernameByAddress(s){if(!this.profileService)throw new Error("Profile service not initialized");return this.profileService.findUsernameByAddress(s)}async skipProfileCreation(s){if(!this.profileService)throw new Error("Profile service not initialized");return this.profileService.skipProfileCreation(s)}async hasSkippedProfileCreation(s){if(!this.profileService)throw new Error("Profile service not initialized");return this.profileService.hasSkippedProfileCreation(s)}async createTribe(s,n,r,a,o,i){const u=await this.tribeService.createTribe(s,n,r,a,o,i);return await this.indexerService.refreshCache(),u}async getTribeData(s){return this.tribeService.getTribeData(s)}async getTribe(s){try{console.log(`[TribesSDK] Getting tribe data for ID: ${s}`);const n=await this.tribeService.getTribeData(s);console.log(`[TribesSDK] Successfully fetched tribe data for ID: ${s}`,n);const r=this.tribeService.mapTribeDataToUIFormat(n,this.chainId);return console.log("[TribesSDK] Mapped tribe data to UI format:",r),r}catch(n){throw console.error(`[TribesSDK] Error getting tribe ${s}:`,n),n}}async joinTribe(s){await this.tribeService.joinTribe(s),await this.indexerService.refreshCache()}async requestToJoinTribe(s,n){await this.tribeService.requestToJoinTribe(s,n),await this.indexerService.refreshCache()}async getMemberStatus(s,n){return this.tribeService.getMemberStatus(s,n)}async getTribesCount(){return this.tribeService.getTribesCount()}async getUserTribes(s){return(await this.indexerService.getTribesByUser(s)).map(r=>Number(r.id))}async getAllTribes(){try{console.log("[TribesSDK] Getting all tribes from indexer");const s=await this.indexerService.getTribesSince(0);return console.log(`[TribesSDK] Found ${s.length} tribes from indexer`),s.map(n=>{const r=n.id.toString(),a={...n,id:r,metadata:n.metadata||"{}",owner:n.owner||"0x0000000000000000000000000000000000000000",nftRequirements:n.nftRequirements||[]};return console.log(`[TribesSDK] Processed tribe ${r} from indexer:`,a),a})}catch(s){console.error("[TribesSDK] Error getting all tribes from indexer:",s);try{console.log("[TribesSDK] Falling back to tribeService for getting tribes");const n=await this.tribeService.getTribesCount();console.log(`[TribesSDK] Found ${n} tribes via fallback`);const r=Math.min(n,20),a=[];for(let o=1;o<=r;o++)try{const i=await this.tribeService.getTribeData(o),u=this.tribeService.mapTribeDataToUIFormat(i,this.chainId);console.log(`[TribesSDK] Successfully mapped tribe ${o} via fallback:`,u),a.push(u)}catch(i){console.warn(`[TribesSDK] Failed to get tribe ${o}:`,i)}return console.log(`[TribesSDK] Fallback returned ${a.length} tribes`),a}catch(n){return console.error("[TribesSDK] Fallback also failed:",n),[]}}}async getPostsSince(s){return this.indexerService.getPostsSince(s)}async getPostsByUser(s){return this.indexerService.getPostsByUser(s)}async getPostsByTribe(s){return this.indexerService.getPostsByTribe(s)}isWalletConnected(){const s=!!this.profileService;let n=!1;if(s&&this.profileService)try{n=this.profileService.isWalletConnected()}catch(a){console.error("[TribesSDK] Error checking profile service wallet connection:",a)}const r=s&&n;return console.log("[TribesSDK] Wallet connection status:",{profileServiceExists:s,profileServiceConnected:n,overallStatus:r}),r}static async create(s){const n=new Ge(s);return await n.initialize(),n}}function Vs(){const[t,s]=m.useState(null),[n,r]=m.useState(!1),[a,o]=m.useState(null),{address:i,chainId:u,isConnected:l,walletClient:f}=ls();m.useEffect(()=>{(async()=>{try{r(!0);const g=await Ge.create(u);s(g),r(!1)}catch(g){o(g.message),r(!1)}})()},[u]),m.useEffect(()=>{(async()=>{if(t&&l&&f&&i)try{await t.connect(f,i)}catch(g){o(g.message)}})()},[t,l,f,i]);const c=m.useCallback(async(w,g,d,N,k,D)=>{if(!t)throw new Error("SDK not initialized");r(!0),o(null);try{return await t.createTribe(w,g,d,N,k,D)}catch(x){const V=x instanceof Error?x.message:"Failed to create tribe";throw o(V),console.error("Error creating tribe:",x),x}finally{r(!1)}},[t]),p=m.useCallback(async w=>{if(!t)throw new Error("SDK not initialized");r(!0),o(null);try{await t.joinTribe(w)}catch(g){const d=g instanceof Error?g.message:"Failed to join tribe";throw o(d),console.error("Error joining tribe:",g),g}finally{r(!1)}},[t]),h=m.useCallback(async(w,g)=>{if(!t)throw new Error("SDK not initialized");r(!0),o(null);try{await t.requestToJoinTribe(w,g)}catch(d){const N=d instanceof Error?d.message:"Failed to request to join tribe";throw o(N),console.error("Error requesting to join tribe:",d),d}finally{r(!1)}},[t]),b=m.useCallback(async()=>{if(!t)throw new Error("SDK not initialized");try{return await t.getTribesCount()}catch(w){throw console.error("Error getting tribes count:",w),w}},[t]);return{isLoading:n,error:a,createTribe:c,joinTribe:p,requestToJoinTribe:h,getTribesCount:b}}function ra(){Zs();const[t,s]=m.useState(null),[n,r]=m.useState(!1),[a,o]=m.useState(null),i=m.useCallback(async h=>{r(!0),o(null);try{const b=await q.getProfileByTokenId(h);if(!b)throw new Error("Profile not found");const{username:w,metadata:g,owner:d}=b;let N;try{N=JSON.parse(g)}catch{N={avatar:""}}s({tokenId:h.toString(),username:w,metadata:g,nftUri:N.avatar||"",owner:d})}catch(b){const w=b.message||"Failed to get profile";o(w),console.error("Error getting profile:",b)}finally{r(!1)}},[]),u=m.useCallback(async h=>{r(!0),o(null);try{await new Promise(w=>setTimeout(w,500));const b={tokenId:Math.floor(Math.random()*1e3).toString(),username:h,metadata:JSON.stringify({avatar:""}),nftUri:"",owner:"0x0000000000000000000000000000000000000000"};s(b)}catch(b){const w=b.message||"Failed to get profile by username";o(w),console.error("Error getting profile by username:",b)}finally{r(!1)}},[]),l=m.useCallback(async(h,b)=>{r(!0),o(null);try{return await new Promise(g=>setTimeout(g,1e3)),Math.floor(Math.random()*1e3)}catch(w){const g=w.message||"Failed to create profile";throw o(g),console.error("Error creating profile:",w),w}finally{r(!1)}},[]),f=m.useCallback(async(h,b)=>{r(!0),o(null);try{await q.updateProfile({tokenId:h,metadata:b}),t&&t.tokenId===h.toString()&&s({...t,metadata:b})}catch(w){const g=w.message||"Failed to update profile";throw o(g),console.error("Error updating profile:",w),w}finally{r(!1)}},[t]),c=m.useCallback(async h=>{try{return await new Promise(b=>setTimeout(b,500)),!h.startsWith("user_")}catch(b){return console.error("Error checking username availability:",b),!1}},[]),p=m.useCallback(h=>/^[a-z0-9_]{3,20}$/.test(h),[]);return{profile:t,isLoading:n,error:a,getProfileById:i,getProfileByUsername:u,createProfile:l,updateProfileMetadata:f,checkUsernameAvailability:c,validateUsername:p}}function fe(...t){return Un(ne(t))}const aa=Ne("inline-flex items-center justify-center rounded-lg font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-accent disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9","icon-sm":"h-5 w-5"}},defaultVariants:{variant:"default",size:"default"}}),ia=Y.forwardRef(({className:t,variant:s,size:n,isLoading:r,leftIcon:a,rightIcon:o,children:i,...u},l)=>e.jsxDEV("button",{className:fe(aa({variant:s,size:n,className:t})),ref:l,disabled:r||u.disabled,...u,children:[r&&e.jsxDEV(St,{className:"mr-2 h-4 w-4 animate-spin"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/common/ui/Button.tsx",lineNumber:48,columnNumber:23},void 0),!r&&a&&e.jsxDEV("span",{className:"mr-2",children:a},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/common/ui/Button.tsx",lineNumber:49,columnNumber:36},void 0),i,!r&&o&&e.jsxDEV("span",{className:"ml-2",children:o},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/common/ui/Button.tsx",lineNumber:51,columnNumber:37},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/common/ui/Button.tsx",lineNumber:42,columnNumber:7},void 0));ia.displayName="Button";const oa=Ne("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground",secondary:"border-transparent bg-secondary text-secondary-foreground",outline:"text-foreground",success:"border-transparent bg-[#B0E681]/20 text-[#B0E681]",warning:"border-transparent bg-yellow-500/20 text-yellow-500",error:"border-transparent bg-red-500/20 text-red-500",info:"border-transparent bg-blue-500/20 text-blue-500"}},defaultVariants:{variant:"default"}});function xs({className:t,variant:s,...n}){return e.jsxDEV("div",{className:fe(oa({variant:s}),t),...n},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/common/ui/Badge.tsx",lineNumber:31,columnNumber:5},this)}const la=Ne("relative rounded-xl transition-all duration-200",{variants:{variant:{default:"bg-card text-card-foreground",enhanced:["bg-[rgba(15,23,42,0.15)]","backdrop-blur-[16px]","border","border-[rgba(255,255,255,0.05)]","shadow-[0_4px_24px_0_rgba(0,0,0,0.05)]","hover:translate-y-[-2px]","hover:bg-[rgba(15,23,42,0.2)]","hover:shadow-[0_8px_32px_0_rgba(0,0,0,0.1)]"]}},defaultVariants:{variant:"default"}}),es=Y.forwardRef(({className:t,variant:s,...n},r)=>e.jsxDEV("div",{ref:r,className:fe(la({variant:s,className:t})),...n},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/common/ui/Card.tsx",lineNumber:36,columnNumber:7},void 0));es.displayName="Card";const ua=Y.forwardRef(({className:t,...s},n)=>e.jsxDEV("div",{ref:n,className:fe("flex flex-col space-y-1.5 p-6",t),...s},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/common/ui/Card.tsx",lineNumber:50,columnNumber:3},void 0));ua.displayName="CardHeader";const da=Y.forwardRef(({className:t,...s},n)=>e.jsxDEV("h3",{ref:n,className:fe("font-semibold leading-none tracking-tight",t),...s},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/common/ui/Card.tsx",lineNumber:62,columnNumber:3},void 0));da.displayName="CardTitle";const ca=Y.forwardRef(({className:t,...s},n)=>e.jsxDEV("p",{ref:n,className:fe("text-sm text-muted-foreground",t),...s},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/common/ui/Card.tsx",lineNumber:74,columnNumber:3},void 0));ca.displayName="CardDescription";const ss=Y.forwardRef(({className:t,...s},n)=>e.jsxDEV("div",{ref:n,className:fe("p-6 pt-0",t),...s},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/common/ui/Card.tsx",lineNumber:86,columnNumber:3},void 0));ss.displayName="CardContent";const ma=Y.forwardRef(({className:t,...s},n)=>e.jsxDEV("div",{ref:n,className:fe("flex items-center p-6 pt-0",t),...s},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/common/ui/Card.tsx",lineNumber:94,columnNumber:3},void 0));ma.displayName="CardFooter";const fa=Y.forwardRef(({className:t,...s},n)=>e.jsxDEV("h2",{ref:n,className:fe("text-lg font-semibold leading-none tracking-tight",t),...s},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/common/ui/Dialog.tsx",lineNumber:79,columnNumber:3},void 0));fa.displayName="DialogTitle";const pa=Y.forwardRef(({className:t,...s},n)=>e.jsxDEV("p",{ref:n,className:fe("text-sm text-muted-foreground",t),...s},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/common/ui/Dialog.tsx",lineNumber:91,columnNumber:3},void 0));pa.displayName="DialogDescription";const ba=Ne("flex rounded-lg border bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",{variants:{variant:{default:"border-input",ghost:"border-none bg-transparent shadow-none focus-visible:ring-0 focus-visible:ring-offset-0",enhanced:["bg-white/5","border-white/10","focus:border-accent","transition-colors"]}},defaultVariants:{variant:"default"}}),ha=Y.forwardRef(({className:t,variant:s,error:n,leftIcon:r,rightIcon:a,type:o,...i},u)=>e.jsxDEV("div",{className:"relative",children:[r&&e.jsxDEV("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground",children:r},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/common/ui/Input.tsx",lineNumber:39,columnNumber:11},void 0),e.jsxDEV("input",{type:o,className:fe(ba({variant:s}),n&&"border-destructive focus-visible:ring-destructive",r&&"pl-10",a&&"pr-10",t),ref:u,...i},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/common/ui/Input.tsx",lineNumber:43,columnNumber:9},void 0),a&&e.jsxDEV("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground",children:a},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/common/ui/Input.tsx",lineNumber:56,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/common/ui/Input.tsx",lineNumber:37,columnNumber:7},void 0));ha.displayName="Input";var ge=(t=>(t[t.Open=0]="Open",t[t.Approval=1]="Approval",t[t.Closed=2]="Closed",t))(ge||{});const wa=(t,s)=>{console.log(`Adding tribe ${t} to local cache`,s)},xa=({onSuccess:t,onCancel:s})=>{const[n,r]=m.useState(""),[a,o]=m.useState(""),[i,u]=m.useState(""),[l,f]=m.useState(""),[c,p]=m.useState(""),[h,b]=m.useState([]),[w,g]=m.useState(ge.Open),[d,N]=m.useState("0"),[k,D]=m.useState(null),[x,V]=m.useState(!1),U=m.useRef(null),E=Zs(),{isLoading:C,createTribe:j}=Vs(),{checkUsernameAvailability:M,validateUsername:y}=ra();m.useEffect(()=>{if(window.ethereum&&window.ethereum.chainId&&parseInt(window.ethereum.chainId,16),E)if(me.some(A=>A.id===E))D(null);else{const A=me.map(R=>R.id).join(", ");D(`Network not supported. Please switch to one of the supported networks (Chain IDs: ${A})`)}else if(window.ethereum&&window.ethereum.chainId){const S=parseInt(window.ethereum.chainId,16);if(me.some(R=>R.id===S))D(null);else{const R=me.map(H=>H.id).join(", ");D(`Network not supported. Please switch to one of the supported networks (Chain IDs: ${R})`)}}else{const S=me.map(A=>A.id).join(", ");D(`Cannot detect network. Please connect to one of the supported networks (Chain IDs: ${S})`)}},[E]);const T=()=>{const S={description:a,avatar:i||"/monad-white.svg",coverImage:l||"/monad-banner.png",createdAt:new Date().toISOString(),topics:[],social:{twitter:"",discord:"",telegram:""}};return JSON.stringify(S)},v=()=>h.filter(S=>S.isResolved&&S.isValid).map(S=>S.address),P=async S=>{try{return y(S)?await M(S)?{isValid:!1,statusMessage:"Username not found"}:{isValid:!0,address:`0x${S.padEnd(40,"0").substring(0,40)}`}:{isValid:!1,statusMessage:"Invalid format (3-20 chars, a-z, 0-9, _)"}}catch(A){return console.error("Error in fetchProfileByUsername:",A),{isValid:!1,statusMessage:"Error looking up profile"}}},I=async S=>{if(!S.trim())return;if(!/^[a-zA-Z0-9_]{3,20}$/.test(S)){b(R=>[...R,{username:S,address:"",isResolved:!0,isValid:!1,isLoading:!1,statusMessage:"Invalid format (3-20 chars, a-z, 0-9, _)"}]),p("");return}if(h.some(R=>R.username.toLowerCase()===S.toLowerCase())){p("");return}b(R=>[...R,{username:S,address:"",isResolved:!1,isValid:!1,isLoading:!0,statusMessage:"Resolving..."}]),p("");try{const R=await P(S);R.isValid?b(H=>H.map(X=>X.username===S?{...X,address:R.address||"",isResolved:!0,isValid:!0,isLoading:!1,statusMessage:void 0}:X)):b(H=>H.map(X=>X.username===S?{...X,isResolved:!0,isValid:!1,isLoading:!1,statusMessage:R.statusMessage}:X))}catch(R){console.error("Error resolving username:",R),b(H=>H.map(X=>X.username===S?{...X,isResolved:!0,isValid:!1,isLoading:!1,statusMessage:"Failed to resolve"}:X))}},O=async S=>{if(S.preventDefault(),!n.trim()){alert("Please enter a tribe name");return}try{V(!0);const A=await j(n.trim(),T(),v(),w,BigInt(d),[]);wa(A,{id:A.toString(),name:n.trim(),description:a,joinType:w,entryFee:d,avatar:i,coverImage:l}),t&&t(A)}catch(A){console.error("Error creating tribe:",A),alert(A.message||"Failed to create tribe")}finally{V(!1)}},B=S=>{S.key==="Enter"&&(S.preventDefault(),c.trim()&&I(c.trim()))},_=S=>{b(A=>A.filter(R=>R.username!==S))};return e.jsxDEV(es,{className:"w-full max-w-3xl",children:e.jsxDEV(ss,{className:"p-6",children:[e.jsxDEV("h2",{className:"text-2xl font-bold mb-6",children:"Create New Tribe"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:347,columnNumber:9},void 0),k&&e.jsxDEV("div",{className:"bg-red-50 p-4 rounded-md mb-6 text-red-600",children:k},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:350,columnNumber:11},void 0),e.jsxDEV("form",{onSubmit:O,className:"space-y-6",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium mb-1",children:"Tribe Name"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:358,columnNumber:13},void 0),e.jsxDEV("input",{type:"text",value:n,onChange:S=>r(S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-black",placeholder:"Enter tribe name",required:!0},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:361,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:357,columnNumber:11},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium mb-1",children:e.jsxDEV("div",{className:"flex items-center gap-1",children:[e.jsxDEV(At,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:375,columnNumber:17},void 0),e.jsxDEV("span",{children:"Description"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:376,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:374,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:373,columnNumber:13},void 0),e.jsxDEV("textarea",{value:a,onChange:S=>o(S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 min-h-[100px] text-black",placeholder:"What is this tribe about?"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:379,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:372,columnNumber:11},void 0),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium mb-1",children:e.jsxDEV("div",{className:"flex items-center gap-1",children:[e.jsxDEV(vs,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:392,columnNumber:19},void 0),e.jsxDEV("span",{children:"Avatar Image URL"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:393,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:391,columnNumber:17},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:390,columnNumber:15},void 0),e.jsxDEV("input",{type:"text",value:i,onChange:S=>u(S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-black",placeholder:"https://example.com/avatar.png"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:396,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:389,columnNumber:13},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium mb-1",children:e.jsxDEV("div",{className:"flex items-center gap-1",children:[e.jsxDEV(vs,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:408,columnNumber:19},void 0),e.jsxDEV("span",{children:"Cover Image URL"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:409,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:407,columnNumber:17},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:406,columnNumber:15},void 0),e.jsxDEV("input",{type:"text",value:l,onChange:S=>f(S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-black",placeholder:"https://example.com/cover.png"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:412,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:405,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:388,columnNumber:11},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium mb-1",children:e.jsxDEV("div",{className:"flex items-center gap-1",children:[e.jsxDEV(Pe,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:426,columnNumber:17},void 0),e.jsxDEV("span",{children:"Join Type"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:427,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:425,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:424,columnNumber:13},void 0),e.jsxDEV("div",{className:"flex flex-wrap gap-2 mt-2",children:[e.jsxDEV("button",{type:"button",onClick:()=>g(ge.Open),className:`px-4 py-2 rounded-md flex items-center gap-2 ${w===ge.Open?"bg-blue-100 text-blue-700 border border-blue-300":"bg-gray-100 text-gray-700 border border-gray-200"}`,children:[e.jsxDEV(ts,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:440,columnNumber:17},void 0),e.jsxDEV("span",{children:"Open (Anyone can join)"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:441,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:431,columnNumber:15},void 0),e.jsxDEV("button",{type:"button",onClick:()=>g(ge.Approval),className:`px-4 py-2 rounded-md flex items-center gap-2 ${w===ge.Approval?"bg-blue-100 text-blue-700 border border-blue-300":"bg-gray-100 text-gray-700 border border-gray-200"}`,children:[e.jsxDEV(He,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:453,columnNumber:17},void 0),e.jsxDEV("span",{children:"Approval Required"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:454,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:444,columnNumber:15},void 0),e.jsxDEV("button",{type:"button",onClick:()=>g(ge.Closed),className:`px-4 py-2 rounded-md flex items-center gap-2 ${w===ge.Closed?"bg-blue-100 text-blue-700 border border-blue-300":"bg-gray-100 text-gray-700 border border-gray-200"}`,children:[e.jsxDEV(He,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:466,columnNumber:17},void 0),e.jsxDEV("span",{children:"Invite Only"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:467,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:457,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:430,columnNumber:13},void 0),w===ge.Approval&&e.jsxDEV("div",{className:"mt-4",children:[e.jsxDEV("label",{className:"block text-sm font-medium mb-1",children:"Entry Fee (optional)"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:473,columnNumber:17},void 0),e.jsxDEV("div",{className:"flex items-center",children:[e.jsxDEV("input",{type:"text",value:d,onChange:S=>N(S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:477,columnNumber:19},void 0),e.jsxDEV("span",{className:"ml-2",children:"wei"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:484,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:476,columnNumber:17},void 0),e.jsxDEV("p",{className:"text-xs text-gray-500 mt-1",children:"Members will need to pay this fee to join your tribe"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:486,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:472,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:423,columnNumber:11},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium mb-1",children:e.jsxDEV("div",{className:"flex items-center gap-1",children:[e.jsxDEV(Pe,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:497,columnNumber:17},void 0),e.jsxDEV("span",{children:"Admins"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:498,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:496,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:495,columnNumber:13},void 0),e.jsxDEV("div",{className:"flex flex-wrap gap-2 mb-2",children:h.map((S,A)=>e.jsxDEV("div",{className:`px-3 py-1 rounded-full flex items-center text-sm ${S.isLoading?"bg-gray-200 text-gray-700":S.isValid?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[e.jsxDEV("span",{children:S.username},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:513,columnNumber:19},void 0),S.isLoading?e.jsxDEV("div",{className:"ml-2 w-3 h-3 rounded-full border-2 border-gray-500 border-t-transparent animate-spin"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:515,columnNumber:21},void 0):S.statusMessage?e.jsxDEV("span",{className:"ml-2 text-xs",children:S.statusMessage},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:517,columnNumber:21},void 0):null,e.jsxDEV("button",{type:"button",onClick:()=>_(S.username),className:"ml-2 text-gray-500 hover:text-gray-700",children:""},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:519,columnNumber:19},void 0)]},A,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:503,columnNumber:17},void 0))},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:501,columnNumber:13},void 0),e.jsxDEV("div",{className:"flex",children:[e.jsxDEV("input",{ref:U,type:"text",value:c,onChange:S=>p(S.target.value),onKeyDown:B,className:"flex-1 px-3 py-2 border border-gray-300 rounded-l-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-black",placeholder:"Enter username to add admin"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:531,columnNumber:15},void 0),e.jsxDEV("button",{type:"button",onClick:()=>{c.trim()&&I(c.trim())},className:"px-4 py-2 bg-blue-600 text-white rounded-r-md hover:bg-blue-700",children:"Add"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:540,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:530,columnNumber:13},void 0),e.jsxDEV("p",{className:"text-xs text-gray-500 mt-1",children:"Enter usernames to add admins. Your account will automatically be an admin."},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:552,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:494,columnNumber:11},void 0),e.jsxDEV("div",{className:"flex justify-end space-x-3 pt-4",children:[s&&e.jsxDEV("button",{type:"button",onClick:s,className:"px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50",disabled:C||x,children:"Cancel"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:560,columnNumber:15},void 0),e.jsxDEV("button",{type:"submit",className:`px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 ${C||x?"opacity-50 cursor-not-allowed":""}`,disabled:C||x||!!k,children:C||x?"Creating...":"Create Tribe"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:570,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:558,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:355,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:346,columnNumber:7},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:345,columnNumber:5},void 0)},Na=()=>{var p,h,b,w,g,d,N,k,D;const t=ns(),s=Xe(Zt),[n,r]=m.useState(((h=(p=s.eventDetails)==null?void 0:p.location)==null?void 0:h.type)||"PHYSICAL"),a="flex items-center justify-center px-3 py-2 border border-gray-700 rounded-md text-sm font-medium",o="bg-blue-600/25 text-blue-400 border-blue-500/50",i="mt-1 block w-full rounded-md bg-gray-800 border-gray-700 text-white shadow-sm focus:border-blue-500 focus:ring-blue-500",u=x=>{t(Ks(x))},l=()=>{var x;return(x=s.eventDetails)!=null&&x.location?typeof s.eventDetails.location=="string"?{type:n,physical:n!=="VIRTUAL"?s.eventDetails.location:void 0,virtual:n!=="PHYSICAL"?s.eventDetails.location:void 0}:s.eventDetails.location:{type:n,physical:n!=="VIRTUAL"?"":void 0,virtual:n!=="PHYSICAL"?"":void 0}},f=x=>{r(x);const V=l(),U={type:x,physical:x!=="VIRTUAL"?V.physical||"":void 0,virtual:x!=="PHYSICAL"?V.virtual||"":void 0,address:x!=="VIRTUAL"?V.address||"":void 0,coordinates:x!=="VIRTUAL"?V.coordinates:void 0};c({location:U})},c=x=>{u({eventDetails:{...s.eventDetails,...x}})};return e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-300",children:"Event Title"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/EventFields.tsx",lineNumber:81,columnNumber:9},void 0),e.jsxDEV("input",{type:"text",value:((b=s.eventDetails)==null?void 0:b.title)||"",onChange:x=>c({title:x.target.value}),placeholder:"Enter event title",className:i,required:!0},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/EventFields.tsx",lineNumber:82,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/EventFields.tsx",lineNumber:80,columnNumber:7},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-300",children:"Event Description"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/EventFields.tsx",lineNumber:93,columnNumber:9},void 0),e.jsxDEV("textarea",{value:((w=s.eventDetails)==null?void 0:w.description)||"",onChange:x=>c({description:x.target.value}),placeholder:"Describe your event",className:`${i} min-h-[100px]`,required:!0},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/EventFields.tsx",lineNumber:94,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/EventFields.tsx",lineNumber:92,columnNumber:7},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-300",children:"Event Start Date & Time"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/EventFields.tsx",lineNumber:104,columnNumber:9},void 0),e.jsxDEV("input",{type:"datetime-local",value:(g=s.eventDetails)!=null&&g.startDate?we(new Date(s.eventDetails.startDate),"yyyy-MM-dd'T'HH:mm"):we(new Date,"yyyy-MM-dd'T'HH:mm"),onChange:x=>c({startDate:new Date(x.target.value).toISOString()}),className:i,required:!0},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/EventFields.tsx",lineNumber:105,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/EventFields.tsx",lineNumber:103,columnNumber:7},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-300",children:"Event End Date & Time"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/EventFields.tsx",lineNumber:118,columnNumber:9},void 0),e.jsxDEV("input",{type:"datetime-local",value:(d=s.eventDetails)!=null&&d.endDate?we(new Date(s.eventDetails.endDate),"yyyy-MM-dd'T'HH:mm"):we(new Date(Date.now()+36e5),"yyyy-MM-dd'T'HH:mm"),onChange:x=>c({endDate:new Date(x.target.value).toISOString()}),className:i,required:!0},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/EventFields.tsx",lineNumber:119,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/EventFields.tsx",lineNumber:117,columnNumber:7},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Location Type"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/EventFields.tsx",lineNumber:132,columnNumber:9},void 0),e.jsxDEV("div",{className:"flex space-x-2",children:[e.jsxDEV("button",{type:"button",onClick:()=>f("PHYSICAL"),className:ne(a,n==="PHYSICAL"?o:"text-gray-400 hover:bg-gray-700/30"),children:"Physical"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/EventFields.tsx",lineNumber:134,columnNumber:11},void 0),e.jsxDEV("button",{type:"button",onClick:()=>f("VIRTUAL"),className:ne(a,n==="VIRTUAL"?o:"text-gray-400 hover:bg-gray-700/30"),children:"Virtual"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/EventFields.tsx",lineNumber:144,columnNumber:11},void 0),e.jsxDEV("button",{type:"button",onClick:()=>f("HYBRID"),className:ne(a,n==="HYBRID"?o:"text-gray-400 hover:bg-gray-700/30"),children:"Hybrid"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/EventFields.tsx",lineNumber:154,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/EventFields.tsx",lineNumber:133,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/EventFields.tsx",lineNumber:131,columnNumber:7},void 0),(n==="PHYSICAL"||n==="HYBRID")&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-300",children:"Venue Name"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/EventFields.tsx",lineNumber:170,columnNumber:13},void 0),e.jsxDEV("input",{type:"text",value:l().physical||"",onChange:x=>{const V=l();c({location:{...V,physical:x.target.value}})},placeholder:"Enter venue name",className:i},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/EventFields.tsx",lineNumber:171,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/EventFields.tsx",lineNumber:169,columnNumber:11},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-300",children:"Address"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/EventFields.tsx",lineNumber:188,columnNumber:13},void 0),e.jsxDEV("input",{type:"text",value:l().address||"",onChange:x=>{const V=l();c({location:{...V,address:x.target.value}})},placeholder:"Enter full address",className:i},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/EventFields.tsx",lineNumber:189,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/EventFields.tsx",lineNumber:187,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/EventFields.tsx",lineNumber:168,columnNumber:9},void 0),(n==="VIRTUAL"||n==="HYBRID")&&e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-300",children:"Virtual Meeting Link"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/EventFields.tsx",lineNumber:210,columnNumber:11},void 0),e.jsxDEV("input",{type:"text",value:l().virtual||"",onChange:x=>{const V=l();c({location:{...V,virtual:x.target.value}})},placeholder:"Enter meeting link",className:i},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/EventFields.tsx",lineNumber:211,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/EventFields.tsx",lineNumber:209,columnNumber:9},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-300",children:"Maximum Attendees"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/EventFields.tsx",lineNumber:230,columnNumber:9},void 0),e.jsxDEV("input",{type:"number",value:Number(((N=s.eventDetails)==null?void 0:N.capacity)||0),onChange:x=>c({capacity:parseInt(x.target.value)||0}),placeholder:"0 for unlimited",min:"0",className:i},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/EventFields.tsx",lineNumber:231,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/EventFields.tsx",lineNumber:229,columnNumber:7},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-300",children:"Ticket Price (ETH)"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/EventFields.tsx",lineNumber:242,columnNumber:9},void 0),e.jsxDEV("input",{type:"number",value:Number(((k=s.eventDetails)==null?void 0:k.price)||0),onChange:x=>c({price:parseFloat(x.target.value)||0}),placeholder:"0 for free",min:"0",step:"0.01",className:i},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/EventFields.tsx",lineNumber:243,columnNumber:9},void 0),e.jsxDEV("p",{className:"mt-1 text-xs text-gray-500",children:"Leave as 0 for free events"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/EventFields.tsx",lineNumber:252,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/EventFields.tsx",lineNumber:241,columnNumber:7},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-300",children:"Tickets Per Wallet"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/EventFields.tsx",lineNumber:256,columnNumber:9},void 0),e.jsxDEV("input",{type:"number",value:Number(((D=s.eventDetails)==null?void 0:D.perWalletLimit)||1),onChange:x=>c({perWalletLimit:parseInt(x.target.value)||1}),placeholder:"Maximum tickets per wallet",min:"1",className:i},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/EventFields.tsx",lineNumber:257,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/EventFields.tsx",lineNumber:255,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/EventFields.tsx",lineNumber:79,columnNumber:5},void 0)},ya=()=>e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700",children:"Upload Image"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/ImageFields.tsx",lineNumber:6,columnNumber:7},void 0),e.jsxDEV("input",{type:"file",accept:"image/*",className:`mt-1 block w-full text-sm text-gray-500
          file:mr-4 file:py-2 file:px-4
          file:rounded-md file:border-0
          file:text-sm file:font-semibold
          file:bg-gray-200 file:text-gray-700
          hover:file:bg-gray-300`},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/ImageFields.tsx",lineNumber:7,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/ImageFields.tsx",lineNumber:5,columnNumber:5},void 0),ga=()=>e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700",children:"Poll Question"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PollFields.tsx",lineNumber:6,columnNumber:7},void 0),e.jsxDEV("input",{type:"text",placeholder:"Enter poll question",className:"mt-1 block w-full text-sm text-gray-500 border border-gray-300 rounded-md"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PollFields.tsx",lineNumber:7,columnNumber:7},void 0),e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mt-4",children:"Poll Options"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PollFields.tsx",lineNumber:13,columnNumber:7},void 0),e.jsxDEV("input",{type:"text",placeholder:"Option 1",className:"mt-1 block w-full text-sm text-gray-500 border border-gray-300 rounded-md"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PollFields.tsx",lineNumber:14,columnNumber:7},void 0),e.jsxDEV("input",{type:"text",placeholder:"Option 2",className:"mt-1 block w-full text-sm text-gray-500 border border-gray-300 rounded-md"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PollFields.tsx",lineNumber:19,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PollFields.tsx",lineNumber:5,columnNumber:5},void 0),Da=()=>e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700",children:"Resource Type"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/ResourceFields.tsx",lineNumber:6,columnNumber:7},void 0),e.jsxDEV("select",{className:"mt-1 block w-full text-sm text-gray-500 border border-gray-300 rounded-md",children:[e.jsxDEV("option",{value:"document",children:"Document"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/ResourceFields.tsx",lineNumber:8,columnNumber:9},void 0),e.jsxDEV("option",{value:"link",children:"Link"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/ResourceFields.tsx",lineNumber:9,columnNumber:9},void 0),e.jsxDEV("option",{value:"code",children:"Code"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/ResourceFields.tsx",lineNumber:10,columnNumber:9},void 0),e.jsxDEV("option",{value:"other",children:"Other"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/ResourceFields.tsx",lineNumber:11,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/ResourceFields.tsx",lineNumber:7,columnNumber:7},void 0),e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mt-4",children:"Resource URL"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/ResourceFields.tsx",lineNumber:14,columnNumber:7},void 0),e.jsxDEV("input",{type:"text",placeholder:"Enter resource URL",className:"mt-1 block w-full text-sm text-gray-500 border border-gray-300 rounded-md"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/ResourceFields.tsx",lineNumber:15,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/ResourceFields.tsx",lineNumber:5,columnNumber:5},void 0),Ea=()=>e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700",children:"Upload Media"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/MediaFields.tsx",lineNumber:6,columnNumber:7},void 0),e.jsxDEV("input",{type:"file",accept:"video/*, audio/*",className:`mt-1 block w-full text-sm text-gray-500
          file:mr-4 file:py-2 file:px-4
          file:rounded-md file:border-0
          file:text-sm file:font-semibold
          file:bg-gray-200 file:text-gray-700
          hover:file:bg-gray-300`},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/MediaFields.tsx",lineNumber:7,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/MediaFields.tsx",lineNumber:5,columnNumber:5},void 0),va=({type:t})=>{switch(t){case"event":return e.jsxDEV(Na,{},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:15,columnNumber:14},void 0);case"image":return e.jsxDEV(ya,{},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:17,columnNumber:14},void 0);case"poll":return e.jsxDEV(ga,{},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:19,columnNumber:14},void 0);case"resource":return e.jsxDEV(Da,{},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:21,columnNumber:14},void 0);case"rich_media":return e.jsxDEV(Ea,{},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:23,columnNumber:14},void 0);default:return null}},Ta=async t=>{try{await q.connect();const s=await he();console.log("Using chain ID for post creation:",s);const n=Je(s),r=await q.getProvider(),a=await q.getSigner();if(!n.EVENT_CONTROLLER)throw new Error("Event controller address not configured");const o=new Qe(n.EVENT_CONTROLLER,Xt,a),i=JSON.stringify({title:t.title,description:t.description,startDate:t.startDate,endDate:t.endDate,location:t.location,createdAt:Math.floor(Date.now()/1e3)}),u=t.ticketTypes[0]||{price:"0",supply:t.capacity},l=typeof u.price=="string"&&u.price.startsWith("0x")?u.price:Mt(String(u.price||0));console.log(`Creating event with metadata: ${i}`),console.log(`Max tickets: ${t.capacity}, Price: ${l}`);const f=await o.createEvent(i,t.capacity,l);console.log(`Transaction sent: ${f.hash}`);const c=await f.wait();console.log(`Transaction confirmed: ${c.transactionHash}`);const p=c.logs.find(b=>b.topics[0]===Pn("EventCreated(uint256,address)"));if(!p)throw new Error("Event creation transaction did not emit EventCreated log");const h=parseInt(p.topics[1],16);return console.log(`Event created with ID: ${h}`),h}catch(s){throw console.error("Error creating event:",s),s}},ka=t=>{const s=new Date(t.startDate).getTime()/1e3,n=new Date(t.endDate).getTime()/1e3,r=[{name:"Standard",price:Mt(String(t.price||0)).toString(),supply:t.capacity||0,perWalletLimit:t.perWalletLimit||1}];return{title:t.title||"",description:t.description||"",startDate:s,endDate:n,location:t.location||{type:"PHYSICAL",physical:"",address:""},capacity:t.capacity||0,ticketTypes:r}},Dt={[F.TEXT]:"text",[F.IMAGE]:"image",[F.VIDEO]:"video",[F.LINK]:"link",[F.EVENT]:"event",[F.POLL]:"poll"},Ca=[{type:F.TEXT,label:"Text",icon:At,color:"#4B5563"},{type:F.IMAGE,label:"Image",icon:vs,color:"#10B981"},{type:F.EVENT,label:"Event",icon:jn,color:"#F59E0B"},{type:F.POLL,label:"Poll",icon:Vn,color:"#3B82F6"},{type:F.LINK,label:"Resource",icon:In,color:"#EC4899"},{type:F.VIDEO,label:"Media",icon:Sn,color:"#8B5CF6"}],sn=({mode:t="modal",isOpen:s=!1,onClose:n,onCancel:r,tribeId:a,onSuccess:o,onError:i,className:u="border border-gray-800",availableTypes:l=Object.values(F).filter(c=>typeof c=="number"),defaultType:f=F.TEXT})=>{const c=ns(),p=Xe(Zt),h=Xe(en),b=Xe(Xr),[w,g]=m.useState(null),[d,N]=m.useState(!1),k=m.useRef(null),D=m.useRef(null),x=m.useRef(null),V=t==="modal"?s||h:s;m.useEffect(()=>{s&&c(Nt(F.EVENT))},[s,c]);const U=()=>{t==="modal"?c(Ze(!1)):(n==null||n(),r==null||r()),c(yt()),g(null),N(!1)},E=(y,T)=>{T&&T.preventDefault(),c(Nt(y)),g(null),y===F.EVENT&&k.current&&k.current.focus()},C=async y=>{var T,v,P,I,O,B,_;if(y.preventDefault(),g(null),!((T=p.content)!=null&&T.trim())){g("Please enter content for your post");return}if(console.log(`[PostCreator]: Post draft: ${p==null?void 0:p.type} : ${F==null?void 0:F.EVENT}`),p.type==="EVENT"){if(console.log(`[PostCreator]: Post draft into condition: ${(v=p==null?void 0:p.eventDetails)==null?void 0:v.title} : ${(P=p==null?void 0:p.eventDetails)==null?void 0:P.startDate} : ${(I=p==null?void 0:p.eventDetails)==null?void 0:I.location}`),!((O=p.eventDetails)!=null&&O.title)){g("Please enter a title for your event");return}if(!((B=p.eventDetails)!=null&&B.startDate)){g("Please set a date for your event");return}if(!((_=p.eventDetails)!=null&&_.location)){g("Please enter a location for your event");return}}N(!0);try{const S={content:p.content,title:p.title,type:p.type,tribeId:a};if(S.type=="EVENT")try{const R=ka(p.eventDetails);console.log(`[PostCreator]: Event data: ${JSON.stringify(R)}`);const H=await Ta(R);S.eventDetails={...p.eventDetails,eventId:H},console.log(`[PostCreator]: Post data: ${S}`),console.log(`Event created with ID: ${H}`)}catch(R){console.error("Error creating event:",R),g("Failed to create event. Please try again."),N(!1);return}const A=await c(Es(S)).unwrap();c(yt()),g(null),o&&o(A),t==="modal"&&c(Ze(!1))}catch(S){g(S.message||"Failed to create post"),i&&i(S)}finally{N(!1)}},j=m.useMemo(()=>{if(typeof p.type=="number")return Dt[p.type]||"text";if(typeof p.type=="string"){const y=p.type.toLowerCase();if(Object.values(Dt).some(T=>T===y))return y}return"text"},[p.type]),M=()=>e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{className:"flex flex-wrap gap-2 mb-4",children:Ca.map(y=>e.jsxDEV("button",{type:"button",onClick:T=>E(y.type,T),className:ne("flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-colors",Number(p.type)===y.type?"bg-foreground/10 text-foreground":"text-muted-foreground hover:text-foreground hover:bg-foreground/5"),children:[e.jsxDEV(y.icon,{className:"w-4 h-4",style:{color:y.color}},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/post/PostCreator.tsx",lineNumber:274,columnNumber:13},void 0),e.jsxDEV("span",{children:y.label},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/post/PostCreator.tsx",lineNumber:275,columnNumber:13},void 0)]},y.type,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/post/PostCreator.tsx",lineNumber:263,columnNumber:11},void 0))},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/post/PostCreator.tsx",lineNumber:261,columnNumber:7},void 0),(w||b)&&e.jsxDEV("div",{className:"p-3 bg-red-500/20 border border-red-500/50 rounded-lg text-red-200",role:"alert",children:w||b},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/post/PostCreator.tsx",lineNumber:282,columnNumber:9},void 0),j!=="event"&&e.jsxDEV("div",{children:e.jsxDEV("input",{ref:k,type:"text",placeholder:"Post title",value:p.title||"",onChange:y=>c(Ks({title:y.target.value})),className:"w-full px-4 py-3 rounded-lg bg-black/20 text-white border border-white/10 focus:ring-2 focus:ring-accent focus:border-transparent",disabled:d,tabIndex:0},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/post/PostCreator.tsx",lineNumber:289,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/post/PostCreator.tsx",lineNumber:288,columnNumber:38},void 0),e.jsxDEV("div",{children:e.jsxDEV("textarea",{placeholder:"What's on your mind?",value:p.content||"",onChange:y=>c(Ks({content:y.target.value})),className:"w-full px-4 py-3 rounded-lg bg-black/20 text-white border border-white/10 focus:ring-2 focus:ring-accent focus:border-transparent min-h-[120px] resize-none",disabled:d,tabIndex:0},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/post/PostCreator.tsx",lineNumber:303,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/post/PostCreator.tsx",lineNumber:302,columnNumber:8},void 0),e.jsxDEV("div",{className:"pt-2 border-t border-gray-700/30 max-h-[30vh] overflow-y-auto",children:e.jsxDEV(va,{type:j},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/post/PostCreator.tsx",lineNumber:315,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/post/PostCreator.tsx",lineNumber:314,columnNumber:7},void 0),e.jsxDEV("div",{className:"flex justify-end pt-2 border-t border-gray-700/30",children:e.jsxDEV("button",{ref:x,type:"submit",disabled:d,className:ne("px-4 py-2 rounded-lg font-medium",d?"bg-accent/50 cursor-not-allowed":"bg-accent hover:bg-accent/90 text-white"),tabIndex:0,children:d?"Creating...":"Create Post"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/post/PostCreator.tsx",lineNumber:320,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/post/PostCreator.tsx",lineNumber:319,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/post/PostCreator.tsx",lineNumber:259,columnNumber:5},void 0);return t==="inline"?e.jsxDEV("form",{onSubmit:C,className:u,children:M()},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/post/PostCreator.tsx",lineNumber:341,columnNumber:7},void 0):t==="dialog"?e.jsxDEV("div",{className:`bg-card rounded-xl shadow-xl p-6 ${u}`,children:e.jsxDEV("form",{onSubmit:C,children:[e.jsxDEV("div",{className:"flex justify-between items-center mb-4",children:[e.jsxDEV("h2",{className:"text-xl text-white font-semibold",children:"Create Post"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/post/PostCreator.tsx",lineNumber:350,columnNumber:13},void 0),n&&e.jsxDEV("button",{type:"button",onClick:U,className:"text-gray-400 hover:text-white",tabIndex:0,children:e.jsxDEV(De,{size:20},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/post/PostCreator.tsx",lineNumber:358,columnNumber:17},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/post/PostCreator.tsx",lineNumber:352,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/post/PostCreator.tsx",lineNumber:349,columnNumber:11},void 0),M()]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/post/PostCreator.tsx",lineNumber:348,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/post/PostCreator.tsx",lineNumber:347,columnNumber:7},void 0):e.jsxDEV(dt,{appear:!0,show:V,as:Y.Fragment,children:e.jsxDEV(Ms,{as:"div",className:"fixed inset-0 z-50 overflow-y-auto",onClose:U,initialFocus:k,children:[e.jsxDEV("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm","aria-hidden":"true"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/post/PostCreator.tsx",lineNumber:376,columnNumber:11},void 0),e.jsxDEV("div",{className:"min-h-screen px-4 flex items-center justify-center",children:e.jsxDEV(dt.Child,{as:Y.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxDEV(Ms.Panel,{className:"w-full max-w-2xl transform overflow-hidden rounded-2xl bg-gray-900 p-6 shadow-xl transition-all",children:e.jsxDEV("div",{className:"max-h-[80vh] overflow-y-auto",children:[e.jsxDEV("div",{className:"flex justify-between items-center mb-4",children:[e.jsxDEV(Ms.Title,{as:"h3",className:"text-xl font-semibold leading-6 text-white",children:"Create Post"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/post/PostCreator.tsx",lineNumber:391,columnNumber:21},void 0),e.jsxDEV("button",{type:"button",ref:D,className:"p-2 rounded-full focus:outline-none hover:bg-gray-800",onClick:U,tabIndex:0,children:e.jsxDEV(De,{className:"w-5 h-5 text-gray-400"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/post/PostCreator.tsx",lineNumber:404,columnNumber:23},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/post/PostCreator.tsx",lineNumber:397,columnNumber:21},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/post/PostCreator.tsx",lineNumber:390,columnNumber:19},void 0),e.jsxDEV("form",{onSubmit:C,children:M()},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/post/PostCreator.tsx",lineNumber:408,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/post/PostCreator.tsx",lineNumber:389,columnNumber:17},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/post/PostCreator.tsx",lineNumber:388,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/post/PostCreator.tsx",lineNumber:379,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/post/PostCreator.tsx",lineNumber:378,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/post/PostCreator.tsx",lineNumber:369,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/post/PostCreator.tsx",lineNumber:368,columnNumber:7},void 0)},Ua=({tribeId:t,onSuccess:s,isOpen:n})=>{const r=Xe(en),a=ns(),o=n!==void 0?n:r,i=()=>{console.log("[CreatePostModal]: Closing modal"),a(Ze(!1))},u=l=>{console.log("[CreatePostModal]: Post created successfully:",l),s&&s(l),i()};return console.log("[CreatePostModal]: Rendering with isOpen =",o),e.jsxDEV(sn,{mode:"modal",isOpen:o,onClose:i,tribeId:t,onSuccess:u,onError:l=>console.error("[CreatePostModal]: Error creating post:",l)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/CreatePostModal.tsx",lineNumber:43,columnNumber:5},void 0)};function Pa(){const t=ce(),s=js(),n=ns(),[r,a]=m.useState(!1),[o,i]=m.useState(!1),[u,l]=m.useState(!1),f=[{icon:e.jsxDEV(On,{className:"w-6 h-6"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/BottomNav.tsx",lineNumber:19,columnNumber:13},this),label:"Create Post",action:()=>{a(!1),n(Ze(!0))}},{icon:e.jsxDEV(Pe,{className:"w-6 h-6"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/BottomNav.tsx",lineNumber:27,columnNumber:13},this),label:"Create Tribe",action:()=>{a(!1),i(!0)}}],c=()=>{a(!r)},p=b=>{i(!1),t(`/tribes/${b}`)},h=()=>{s.pathname!=="/"&&t("/")};return e.jsxDEV(e.Fragment,{children:[e.jsxDEV("nav",{className:"fixed bottom-0 left-0 right-0 z-40 shadow-md",style:{backgroundColor:"var(--chain-bg)"},children:e.jsxDEV("div",{className:"flex items-center justify-around py-3",children:[e.jsxDEV("button",{onClick:h,className:`flex flex-col items-center space-y-1 ${s.pathname==="/"?"text-theme-primary":"text-text-secondary"}`,children:[e.jsxDEV(An,{className:"w-6 h-6"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/BottomNav.tsx",lineNumber:61,columnNumber:13},this),e.jsxDEV("span",{className:"text-xs",children:"Home"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/BottomNav.tsx",lineNumber:62,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/BottomNav.tsx",lineNumber:55,columnNumber:11},this),e.jsxDEV("button",{onClick:c,className:"flex flex-col items-center space-y-1 text-text-secondary hover:text-theme-primary",children:[e.jsxDEV(Mn,{className:"w-6 h-6"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/BottomNav.tsx",lineNumber:69,columnNumber:13},this),e.jsxDEV("span",{className:"text-xs",children:"Create"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/BottomNav.tsx",lineNumber:70,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/BottomNav.tsx",lineNumber:65,columnNumber:11},this),e.jsxDEV("button",{onClick:()=>t("/profile"),className:`flex flex-col items-center space-y-1 ${s.pathname==="/profile"?"text-theme-primary":"text-text-secondary"}`,children:[e.jsxDEV(Fn,{className:"w-6 h-6"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/BottomNav.tsx",lineNumber:79,columnNumber:13},this),e.jsxDEV("span",{className:"text-xs",children:"Profile"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/BottomNav.tsx",lineNumber:80,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/BottomNav.tsx",lineNumber:73,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/BottomNav.tsx",lineNumber:54,columnNumber:9},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/BottomNav.tsx",lineNumber:53,columnNumber:7},this),r&&e.jsxDEV("div",{className:"fixed inset-0 z-50 flex items-end justify-center sm:items-center",onClick:()=>a(!1),children:[e.jsxDEV("div",{className:"absolute inset-0 backdrop-blur-sm",style:{backgroundColor:"rgba(var(--chain-bg-rgb), 0.8)"}},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/BottomNav.tsx",lineNumber:88,columnNumber:11},this),e.jsxDEV("div",{className:"relative w-full max-w-md rounded-t-2xl sm:rounded-xl overflow-hidden shadow-lg z-10",style:{backgroundColor:"var(--chain-bg)"},onClick:b=>b.stopPropagation(),children:e.jsxDEV("div",{className:"p-6",children:[e.jsxDEV("div",{className:"flex justify-between items-center mb-4",children:[e.jsxDEV("h2",{className:"text-xl font-bold text-white",children:"Create"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/BottomNav.tsx",lineNumber:96,columnNumber:17},this),e.jsxDEV("button",{onClick:()=>a(!1),className:"text-text-secondary hover:text-white",children:e.jsxDEV(De,{className:"w-6 h-6"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/BottomNav.tsx",lineNumber:98,columnNumber:19},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/BottomNav.tsx",lineNumber:97,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/BottomNav.tsx",lineNumber:95,columnNumber:15},this),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:f.map((b,w)=>e.jsxDEV("button",{onClick:b.action,className:"p-4 flex flex-col items-center bg-black/20 rounded-xl hover:bg-black/30 transition-colors",children:[b.icon,e.jsxDEV("span",{className:"font-medium mt-2",children:b.label},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/BottomNav.tsx",lineNumber:110,columnNumber:21},this)]},w,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/BottomNav.tsx",lineNumber:104,columnNumber:19},this))},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/BottomNav.tsx",lineNumber:102,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/BottomNav.tsx",lineNumber:94,columnNumber:13},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/BottomNav.tsx",lineNumber:89,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/BottomNav.tsx",lineNumber:87,columnNumber:9},this),e.jsxDEV(Ua,{tribeId:"1"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/BottomNav.tsx",lineNumber:120,columnNumber:7},this)," ",o&&e.jsxDEV("div",{className:"fixed inset-0 z-50 flex items-end justify-center sm:items-center",onClick:()=>i(!1),children:[e.jsxDEV("div",{className:"absolute inset-0 backdrop-blur-sm",style:{backgroundColor:"rgba(var(--chain-bg-rgb), 0.8)"}},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/BottomNav.tsx",lineNumber:125,columnNumber:11},this),e.jsxDEV("div",{className:"relative w-full max-w-2xl rounded-t-2xl sm:rounded-xl overflow-hidden shadow-lg z-10 max-h-[90vh] overflow-y-auto",style:{backgroundColor:"var(--chain-bg)"},onClick:b=>b.stopPropagation(),children:e.jsxDEV("div",{className:"px-6 py-5",children:[e.jsxDEV("div",{className:"flex justify-between items-center mb-5",children:[e.jsxDEV("h2",{className:"text-xl font-bold text-white",children:"Create Tribe"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/BottomNav.tsx",lineNumber:133,columnNumber:17},this),e.jsxDEV("button",{onClick:()=>i(!1),className:"text-text-secondary hover:text-white transition-colors",children:e.jsxDEV(De,{className:"w-6 h-6"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/BottomNav.tsx",lineNumber:135,columnNumber:19},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/BottomNav.tsx",lineNumber:134,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/BottomNav.tsx",lineNumber:132,columnNumber:15},this),e.jsxDEV(xa,{onSuccess:p,onCancel:()=>i(!1)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/BottomNav.tsx",lineNumber:138,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/BottomNav.tsx",lineNumber:131,columnNumber:13},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/BottomNav.tsx",lineNumber:126,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/BottomNav.tsx",lineNumber:124,columnNumber:9},this),u&&e.jsxDEV("div",{className:"fixed inset-0 z-50 flex items-end justify-center sm:items-center",onClick:()=>l(!1),children:[e.jsxDEV("div",{className:"absolute inset-0 backdrop-blur-sm",style:{backgroundColor:"rgba(var(--chain-bg-rgb), 0.8)"}},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/BottomNav.tsx",lineNumber:150,columnNumber:11},this),e.jsxDEV("div",{className:"relative w-full max-w-md rounded-t-2xl sm:rounded-xl overflow-hidden shadow-lg z-10 max-h-[90vh] overflow-y-auto",style:{backgroundColor:"var(--chain-bg)"},onClick:b=>b.stopPropagation(),children:e.jsxDEV("div",{className:"p-4",children:[e.jsxDEV("div",{className:"flex justify-between items-center mb-4",children:[e.jsxDEV("h2",{className:"text-xl font-bold",children:"Notifications"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/BottomNav.tsx",lineNumber:158,columnNumber:17},this),e.jsxDEV("button",{onClick:()=>l(!1),className:"text-text-secondary",children:e.jsxDEV(De,{className:"w-6 h-6"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/BottomNav.tsx",lineNumber:160,columnNumber:19},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/BottomNav.tsx",lineNumber:159,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/BottomNav.tsx",lineNumber:157,columnNumber:15},this),e.jsxDEV("div",{className:"text-center text-text-secondary py-8 bg-black/20 rounded-xl",children:"You have no notifications"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/BottomNav.tsx",lineNumber:165,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/BottomNav.tsx",lineNumber:156,columnNumber:13},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/BottomNav.tsx",lineNumber:151,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/BottomNav.tsx",lineNumber:149,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/BottomNav.tsx",lineNumber:52,columnNumber:5},this)}const ja={sdk:null,isInitialized:!1,tribes:[],isLoading:!1,error:null,refreshTribes:async()=>{},getTribe:async()=>null},tn=m.createContext(ja);function Va({children:t,sdk:s,isInitialized:n}){const[r,a]=m.useState([]),[o,i]=m.useState(!1),[u,l]=m.useState(null),{address:f}=ls(),c=m.useCallback(async()=>{if(!s||!n){console.log("Cannot refresh tribes: SDK not initialized");return}try{i(!0),l(null),console.log("Refreshing tribes...");const h=await s.getTribesCount();console.log(`Found ${h} tribes`);const b=[];for(let w=1;w<=h;w++)try{const g=await s.getTribe(w);g&&b.push(g)}catch(g){console.error(`Error fetching tribe ${w}:`,g)}a(b),console.log("Loaded tribes:",b)}catch(h){console.error("Error refreshing tribes:",h),l(h.message)}finally{i(!1)}},[s,n]),p=m.useCallback(async h=>{if(!s||!n)return console.log("Cannot get tribe: SDK not initialized"),null;try{return await s.getTribe(h)}catch(b){return console.error(`Error getting tribe ${h}:`,b),null}},[s,n]);return m.useEffect(()=>{n&&c()},[n,f,c]),e.jsxDEV(tn.Provider,{value:{sdk:s,isInitialized:n,tribes:r,isLoading:o,error:u,refreshTribes:c,getTribe:p},children:t},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/contexts/TribesContext.tsx",lineNumber:100,columnNumber:5},this)}function Is(){const t=m.useContext(tn);if(t===void 0)throw new Error("useTribesSDK must be used within a TribesProvider");return t}function nt(){const{sdk:t,isInitialized:s,tribes:n,isLoading:r,error:a,refreshTribes:o,getTribe:i}=Is();ls();const u=m.useCallback(async h=>{const b=await i(h);if(!b)throw new Error(`Tribe ${h} not found`);return b},[i]),l=m.useCallback(async()=>o(),[o]),f=m.useCallback(async()=>o(),[o]),c=m.useCallback(async h=>{if(!t)throw new Error("SDK not initialized");try{return await t.getUserTribes(h)}catch(b){throw console.error("Error getting user tribes:",b),b}},[t]),p=m.useCallback(async(h,b)=>{if(!t)throw new Error("SDK not initialized");try{return await t.getMemberStatus(h,b)}catch(w){throw console.error("Error getting member status:",w),w}},[t]);return{isLoading:r,error:a,tribes:n,userTribes:[],getTribe:u,getAllTribes:l,getUserTribes:c,getMemberStatus:p,refreshTribes:f}}function rt(t,s="/images/default-avatar.png"){if(!t)return s;try{const n=t;if(n.avatar&&typeof n.avatar=="string"&&n.avatar.trim()!=="")return console.log(`Using direct avatar for tribe ${t.id}:`,n.avatar),n.avatar;let r=null;if(typeof t.metadata=="string"&&t.metadata.trim()!=="")try{r=JSON.parse(t.metadata),console.log(`Successfully parsed metadata for tribe ${t.id}`)}catch(a){console.error(`Error parsing metadata JSON for tribe ${t.id}:`,a)}else typeof t.metadata=="object"&&t.metadata!==null&&(r=t.metadata,console.log(`Using metadata object directly for tribe ${t.id}`));if(r!=null&&r.avatar&&typeof r.avatar=="string"&&r.avatar.trim()!=="")return console.log(`Found avatar in metadata for tribe ${t.id}:`,r.avatar),r.avatar;if(t.id&&t.name){const a=`https://api.dicebear.com/7.x/shapes/svg?seed=${encodeURIComponent(t.id)}-${encodeURIComponent(t.name)}`;return console.log(`Generated avatar for tribe ${t.id}:`,a),a}return console.log(`Using default avatar for tribe ${t.id}`),s}catch(n){return console.error(`Error processing avatar for tribe ${t.id}:`,n),s}}function Js(t){if(!t)return"public";try{if(t.privacy==="private")return"private";let n=null;if(typeof t.metadata=="string"&&t.metadata.trim()!=="")try{n=JSON.parse(t.metadata)}catch(r){console.error(`Error parsing metadata JSON for tribe ${t.id}:`,r)}else typeof t.metadata=="object"&&t.metadata!==null&&(n=t.metadata);return(n==null?void 0:n.isPrivate)===!0||(n==null?void 0:n.privacy)==="private"?"private":"public"}catch(s){return console.error(`Error parsing metadata for tribe ${t.id}:`,s),"public"}}function at(t){if(!t)return[];try{const s=t;if(Array.isArray(s.topics))return s.topics.map((r,a)=>({id:r.id||`topic-${a}`,name:r.name||`Topic ${a+1}`,postCount:r.postCount||0}));let n=null;if(typeof t.metadata=="string"&&t.metadata.trim()!=="")try{n=JSON.parse(t.metadata)}catch(r){console.error(`Error parsing metadata JSON for tribe ${t.id}:`,r)}else typeof t.metadata=="object"&&t.metadata!==null&&(n=t.metadata);return Array.isArray(n==null?void 0:n.topics)?n.topics.map((r,a)=>({id:r.id||`topic-${a}`,name:r.name||`Topic ${a+1}`,postCount:r.postCount||0})):[]}catch(s){return console.error(`Error parsing metadata for tribe ${t.id}:`,s),[]}}function nn(t){if(!t)return"";try{const s=t;if(s.description&&typeof s.description=="string")return s.description;let n=null;if(typeof t.metadata=="string"&&t.metadata.trim()!=="")try{n=JSON.parse(t.metadata)}catch(r){console.error(`Error parsing metadata JSON for tribe ${t.id}:`,r)}else typeof t.metadata=="object"&&t.metadata!==null&&(n=t.metadata);return n!=null&&n.description&&typeof n.description=="string"?n.description:""}catch(s){return console.error(`Error parsing metadata for tribe ${t.id}:`,s),""}}function rn(t,s="/images/default-cover.png"){if(!t)return s;try{const n=t;if(n.coverImage&&typeof n.coverImage=="string"&&n.coverImage.trim()!=="")return n.coverImage;let r=null;if(typeof t.metadata=="string"&&t.metadata.trim()!=="")try{r=JSON.parse(t.metadata)}catch(a){console.error(`Error parsing metadata JSON for tribe ${t.id}:`,a)}else typeof t.metadata=="object"&&t.metadata!==null&&(r=t.metadata);return r!=null&&r.coverImage&&typeof r.coverImage=="string"&&r.coverImage.trim()!==""?r.coverImage:s}catch(n){return console.error(`Error parsing metadata for tribe ${t.id}:`,n),s}}function Ia(t){var s;if(!t)return{isMember:!1,isPending:!1,isAdmin:!1};try{const n=t;if(n.userMembershipStatus)return{isMember:!!n.userMembershipStatus.isMember,isPending:!!n.userMembershipStatus.isPending,isAdmin:!!n.userMembershipStatus.isAdmin};let r=null;if(typeof t.metadata=="string"&&t.metadata.trim()!=="")try{r=JSON.parse(t.metadata)}catch(a){console.error(`Error parsing metadata JSON for tribe ${t.id}:`,a)}else typeof t.metadata=="object"&&t.metadata!==null&&(r=t.metadata);return r!=null&&r.userMembershipStatus?{isMember:!!r.userMembershipStatus.isMember,isPending:!!r.userMembershipStatus.isPending,isAdmin:!!r.userMembershipStatus.isAdmin}:{isMember:!!n.isMember,isPending:!!n.isPending,isAdmin:!!(n.isAdmin||(s=t.admins)!=null&&s.includes(n.currentUser))}}catch(n){return console.error(`Error getting membership status for tribe ${t.id}:`,n),{isMember:!1,isPending:!1,isAdmin:!1}}}function Sa({isOpen:t,onClose:s}){const n=ce(),r=js(),{tribes:a,isLoading:o}=nt(),i=r.pathname,u=(a==null?void 0:a.flatMap(l=>at(l).map(c=>({...c,tribeName:l.name,tribeId:l.id}))))||[];return e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:ne("fixed inset-0 bg-black/50 backdrop-blur-sm z-30 md:hidden transition-opacity",t?"opacity-100":"opacity-0 pointer-events-none"),onClick:s},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Sidebar.tsx",lineNumber:31,columnNumber:7},this),e.jsxDEV("aside",{className:ne("fixed md:sticky top-[64px] left-0 h-[calc(100vh-64px-64px)] w-64","bg-theme-bg/90 backdrop-blur-xl z-30","transform transition-transform duration-200 ease-in-out","overflow-hidden flex flex-col",t?"translate-x-0":"-translate-x-full md:translate-x-0"),children:[e.jsxDEV("div",{className:"p-4 flex justify-between items-center md:hidden",children:[e.jsxDEV("h2",{className:"text-xl font-bold text-text-primary",children:"Navigation"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Sidebar.tsx",lineNumber:51,columnNumber:11},this),e.jsxDEV("button",{onClick:s,className:"p-1 text-text-primary hover:text-theme-primary",children:e.jsxDEV(De,{className:"w-6 h-6"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Sidebar.tsx",lineNumber:53,columnNumber:13},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Sidebar.tsx",lineNumber:52,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Sidebar.tsx",lineNumber:50,columnNumber:9},this),e.jsxDEV("div",{className:"flex-1 overflow-y-auto overflow-x-hidden",children:e.jsxDEV("div",{className:"p-4 space-y-8",children:[e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"flex items-center space-x-2 mb-4 text-sm font-medium text-text-secondary sticky top-0 bg-theme-bg/90 backdrop-blur-xl py-2",children:[e.jsxDEV(Pe,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Sidebar.tsx",lineNumber:63,columnNumber:17},this),e.jsxDEV("span",{children:"TRIBES"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Sidebar.tsx",lineNumber:64,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Sidebar.tsx",lineNumber:62,columnNumber:15},this),e.jsxDEV("div",{className:"space-y-1",children:o?[...Array(3)].map((l,f)=>e.jsxDEV("div",{className:"animate-pulse bg-theme-primary/5 h-9 rounded-lg"},f,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Sidebar.tsx",lineNumber:70,columnNumber:21},this)):a==null?void 0:a.map(l=>{const f=rt(l),c=Js(l);return e.jsxDEV("button",{onClick:()=>{n(`/tribes/${l.id}`),s()},className:ne("w-full px-2 py-1.5 rounded-lg","flex gap-2 transition-colors","text-text-secondary hover:text-text-primary","hover:bg-theme-primary/5",i===`/tribes/${l.id}`?"bg-theme-primary/10 text-text-primary":""),children:[e.jsxDEV("img",{src:f,alt:l.name,className:"w-6 h-6 rounded-lg",onError:p=>{p.target.src="/images/default-avatar.png"}},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Sidebar.tsx",lineNumber:91,columnNumber:23},this),e.jsxDEV("span",{className:"flex-1 truncate text-sm text-left",children:l.name},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Sidebar.tsx",lineNumber:100,columnNumber:23},this),c==="public"?e.jsxDEV(ts,{className:"w-3 h-3 opacity-50"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Sidebar.tsx",lineNumber:102,columnNumber:25},this):e.jsxDEV(He,{className:"w-3 h-3 opacity-50"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Sidebar.tsx",lineNumber:104,columnNumber:25},this)]},l.id,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Sidebar.tsx",lineNumber:77,columnNumber:21},this)})},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Sidebar.tsx",lineNumber:66,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Sidebar.tsx",lineNumber:61,columnNumber:13},this),e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"flex items-center space-x-2 mb-4 text-sm font-medium text-text-secondary sticky top-0 bg-theme-bg/90 backdrop-blur-xl py-2",children:[e.jsxDEV(Ts,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Sidebar.tsx",lineNumber:115,columnNumber:17},this),e.jsxDEV("span",{children:"TOPICS"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Sidebar.tsx",lineNumber:116,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Sidebar.tsx",lineNumber:114,columnNumber:15},this),e.jsxDEV("div",{className:"flex flex-wrap gap-2",children:o?[...Array(4)].map((l,f)=>e.jsxDEV("div",{className:"animate-pulse bg-theme-primary/5 h-7 w-24 rounded-full"},f,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Sidebar.tsx",lineNumber:122,columnNumber:21},this)):u.length>0?u.map(l=>e.jsxDEV("button",{onClick:()=>{n(`/tribes/${l.tribeId}/topics/${l.id}`),s()},className:ne("inline-flex items-center px-3 py-1 rounded-full","text-sm transition-colors gap-1","hover:bg-theme-primary/5",i===`/tribes/${l.tribeId}/topics/${l.id}`?"bg-theme-primary/10 text-text-primary":"bg-black/50 text-text-secondary hover:text-text-primary"),children:[e.jsxDEV(Ts,{className:"w-3 h-3"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Sidebar.tsx",lineNumber:141,columnNumber:23},this),e.jsxDEV("span",{className:"truncate max-w-[120px]",children:l.name},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Sidebar.tsx",lineNumber:142,columnNumber:23},this),e.jsxDEV("span",{className:"text-xs opacity-50 shrink-0",children:l.postCount},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Sidebar.tsx",lineNumber:143,columnNumber:23},this)]},`${l.tribeId}-${l.id}`,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Sidebar.tsx",lineNumber:126,columnNumber:21},this)):e.jsxDEV("div",{className:"text-sm text-text-secondary italic px-2",children:"No topics available"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Sidebar.tsx",lineNumber:149,columnNumber:19},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Sidebar.tsx",lineNumber:118,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Sidebar.tsx",lineNumber:113,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Sidebar.tsx",lineNumber:59,columnNumber:11},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Sidebar.tsx",lineNumber:58,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Sidebar.tsx",lineNumber:40,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Sidebar.tsx",lineNumber:29,columnNumber:5},this)}function Aa(){const[t,s]=m.useState(!1);return e.jsxDEV("div",{className:"min-h-screen bg-black",children:[e.jsxDEV(tt,{onMenuClick:()=>s(!t)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Layout.tsx",lineNumber:12,columnNumber:7},this),e.jsxDEV("div",{className:"flex pt-2",children:[e.jsxDEV(Sa,{isOpen:t,onClose:()=>s(!1)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Layout.tsx",lineNumber:14,columnNumber:9},this),e.jsxDEV("main",{className:"flex-1 pb-24 md:pb-6 px-1",children:e.jsxDEV(Rn,{},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Layout.tsx",lineNumber:16,columnNumber:11},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Layout.tsx",lineNumber:15,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Layout.tsx",lineNumber:13,columnNumber:7},this),e.jsxDEV(Pa,{},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Layout.tsx",lineNumber:19,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Layout.tsx",lineNumber:11,columnNumber:5},this)}const it={AUTH:"tribes_auth",FOLLOWERS:"tribes_followers",ONBOARDING:"tribes_onboarding"},Ma=()=>{const t=localStorage.getItem(it.AUTH);return t?JSON.parse(t):{address:null,isConnected:!1}},Fa=()=>{const t=localStorage.getItem(it.FOLLOWERS);return t?JSON.parse(t):[]},Oa=()=>Fa().length>=3,Ra=()=>{const t=localStorage.getItem(it.ONBOARDING);return t?JSON.parse(t):{hasSkippedFollowing:!1,currentStep:0}},La="tribes_auth_state",oe=(t,s)=>{const n=new Date().toISOString().split("T")[1].split(".")[0];s?console.log(`[RootRoute:${n}] ${t}`,s):console.log(`[RootRoute:${n}] ${t}`)};function Ba(){const t=ce(),{isConnected:s,address:n}=st(),r=m.useRef(!1),a=i=>{try{const u=localStorage.getItem("redirect_attempts")||"{}",l=JSON.parse(u);return l[i]=(l[i]||0)+1,localStorage.setItem("redirect_attempts",JSON.stringify(l)),i==="/connect"&&l[i]>5?(oe("Too many redirects to connect page, clearing auth state"),localStorage.removeItem(La),localStorage.removeItem("tribes_auth"),localStorage.removeItem("tribes_profile"),!1):!0}catch(u){return console.error("Error tracking redirects:",u),!0}},o=i=>{a(i)?(oe(`Navigating to ${i}`),t(i)):oe("Navigation blocked to prevent loop")};return m.useEffect(()=>{(async()=>{if(r.current){oe("Check already in progress, skipping");return}r.current=!0,oe("Starting state check");try{const u=Ma();if(oe("Auth data from storage",{isConnected:u.isConnected,hasAddress:!!u.address}),!u.isConnected||!u.address){oe("No saved auth, redirecting to connect"),o("/connect");return}if(!s||!n){oe("No active connection, redirecting to connect"),o("/connect");return}try{oe("Checking profile for address",{address:n});const l=await q.getProfileByAddress(n);oe("Profile check result",{exists:!!l.profile});const f=Ra();if(!l.profile){oe("No profile, redirecting to username setup"),o("/username-setup");return}if(!f.hasSkippedFollowing&&!Oa()){oe("Profile exists but onboarding incomplete"),o("/onboarding");return}oe("Profile complete, redirecting to dashboard"),o("/dashboard")}catch(l){console.error("Error checking profile:",l),oe("Error checking profile",{error:l}),o("/connect")}}finally{r.current=!1}})()},[s,n,t]),oe("Rendering null"),null}const $a=t=>{switch(t){case"success":return e.jsxDEV(_n,{className:"w-5 h-5"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/NotificationToast.tsx",lineNumber:19,columnNumber:14},void 0);case"error":return e.jsxDEV(Ot,{className:"w-5 h-5"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/NotificationToast.tsx",lineNumber:21,columnNumber:14},void 0);case"warning":return e.jsxDEV($n,{className:"w-5 h-5"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/NotificationToast.tsx",lineNumber:23,columnNumber:14},void 0);case"info":return e.jsxDEV(Ft,{className:"w-5 h-5"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/NotificationToast.tsx",lineNumber:25,columnNumber:14},void 0)}},_a={success:"bg-success-main/20 text-success-main border-success-main/20",error:"bg-destructive/20 text-destructive border-destructive/20",warning:"bg-yellow-500/20 text-yellow-500 border-yellow-500/20",info:"bg-blue-500/20 text-blue-500 border-blue-500/20"},za=({message:t,type:s,isVisible:n,onClose:r,duration:a=3e3})=>(m.useEffect(()=>{if(n){const o=setTimeout(()=>{r()},a);return()=>clearTimeout(o)}},[n,a,r]),e.jsxDEV(Ln,{children:n&&e.jsxDEV(Bn.div,{initial:{opacity:0,y:-50},animate:{opacity:1,y:0},exit:{opacity:0,y:-50},className:"fixed top-4 right-4 z-50",children:e.jsxDEV("div",{className:fe("flex items-center space-x-3 px-4 py-3 rounded-lg border backdrop-blur-sm shadow-lg",_a[s]),children:[$a(s),e.jsxDEV("span",{className:"text-sm font-medium",children:t},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/NotificationToast.tsx",lineNumber:69,columnNumber:13},void 0),e.jsxDEV("button",{onClick:r,className:"ml-2 hover:opacity-70 transition-opacity",children:e.jsxDEV(De,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/NotificationToast.tsx",lineNumber:74,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/NotificationToast.tsx",lineNumber:70,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/NotificationToast.tsx",lineNumber:62,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/NotificationToast.tsx",lineNumber:56,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/NotificationToast.tsx",lineNumber:54,columnNumber:5},void 0)),an=m.createContext(void 0),Ss=()=>{const t=m.useContext(an);if(!t)throw new Error("useNotification must be used within a NotificationProvider");return t},Wa=({children:t})=>{const[s,n]=m.useState({message:"",type:"info",isVisible:!1}),r=m.useCallback((o,i)=>{n({message:o,type:i,isVisible:!0})},[]),a=m.useCallback(()=>{n(o=>({...o,isVisible:!1}))},[]);return e.jsxDEV(an.Provider,{value:{showNotification:r},children:[t,e.jsxDEV(za,{message:s.message,type:s.type,isVisible:s.isVisible,onClose:a},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/contexts/NotificationContext.tsx",lineNumber:51,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/contexts/NotificationContext.tsx",lineNumber:49,columnNumber:5},void 0)},Ka=t=>t?me.some(s=>s.id===t):!1,Ie=(t,s)=>{const n=new Date().toISOString().split("T")[1].split(".")[0];s?console.log(`[useProfile:${n}] ${t}`,s):console.log(`[useProfile:${n}] ${t}`)};function us(){const{sdk:t,isInitialized:s}=Is(),[n,r]=m.useState(!1),[a,o]=m.useState(null),[i,u]=m.useState(null),{address:l,isConnected:f,walletClient:c}=ls(),{showNotification:p}=Ss(),{chainId:h}=Ve();m.useEffect(()=>{(async()=>{if(t&&f&&c&&l)try{Ie("Connecting SDK to wallet",{address:l}),await t.connect(c,l)}catch(T){o(T.message),Ie("SDK wallet connection error",{error:T.message})}})()},[t,f,c,l]);const b=m.useCallback(async y=>{if(!t)throw new Error("SDK not initialized");r(!0),o(null);try{const T=await t.getProfileById(y);u(T)}catch(T){const v=T instanceof Error?T.message:"Failed to get profile";o(v),console.error("Error getting profile:",T)}finally{r(!1)}},[t]),w=m.useCallback(async y=>{if(!t)throw new Error("SDK not initialized");r(!0),o(null);try{const T=await t.getProfileByUsername(y);u(T)}catch(T){const v=T instanceof Error?T.message:"Failed to get profile";o(v),console.error("Error getting profile by username:",T)}finally{r(!1)}},[t]),g=m.useCallback(async(y,T)=>{if(!t)throw new Error("SDK not initialized");if(!f||!c||!l)throw new Error("Wallet not connected. Please connect your wallet and try again.");let v=0;const P=3;for(;v<P;){try{if(console.log(`[useProfile] Connecting SDK to wallet, attempt ${v+1}/${P}`),await t.connect(c,l),t.isWalletConnected()){console.log("[useProfile] SDK successfully connected to wallet");break}else console.warn("[useProfile] SDK connection verification failed, retrying...")}catch(I){if(console.error(`[useProfile] SDK connection attempt ${v+1} failed:`,I),v===P-1)throw new Error("Failed to connect to wallet after multiple attempts. Please try again.")}v++,await new Promise(I=>setTimeout(I,500*v))}r(!0),o(null);try{const I=JSON.parse(T),O=await t.createProfile(y,I),B=await t.getProfileById(O);return u(B),O}catch(I){const O=I instanceof Error?I.message:"Failed to create profile";throw o(O),console.error("Error creating profile:",I),I}finally{r(!1)}},[t,f,c,l]),d=m.useCallback(async(y,T)=>{if(!t)throw new Error("SDK not initialized");r(!0),o(null);try{const v=JSON.parse(T);await t.updateProfileMetadata(y,v);const P=await t.getProfileById(y);u(P)}catch(v){const P=v instanceof Error?v.message:"Failed to update profile";throw o(P),console.error("Error updating profile:",v),v}finally{r(!1)}},[t]),N=m.useCallback(async y=>{if(!t)throw new Error("SDK not initialized");try{return await t.checkUsernameAvailability(y)}catch(T){return console.error("Error checking username availability:",T),!1}},[t]),k=m.useCallback(y=>/^[a-zA-Z0-9_]{3,20}$/.test(y),[]),D=m.useCallback(async y=>{if(!t||!s)return Ie("SDK not initialized"),{profile:null,error:{code:"SDK_NOT_INITIALIZED"}};r(!0);try{Ie("Getting profile for address",{address:y});const T=await t.getProfileByAddress(y);return T?(Ie("Profile found",{profile:T}),u(T),{profile:T}):(Ie("No profile found"),{profile:null,error:{code:"NO_PROFILE"}})}catch(T){return Ie("Error getting profile",T),{profile:null,error:{code:"UNKNOWN_ERROR"}}}finally{r(!1)}},[t,s]),x=m.useCallback(async y=>{if(!t)throw new Error("SDK not initialized");try{return await t.checkProfileOwnership(y)}catch(T){return console.error("Error checking profile ownership:",T),null}},[t]),V=m.useCallback(async()=>{if(!t||!l)return!1;try{return await t.skipProfileCreation(l)}catch(y){return console.error("Error skipping profile creation:",y),!1}},[t,l]),U=m.useCallback(async y=>{if(!t)return!1;try{return await t.hasSkippedProfileCreation(y)}catch(T){return console.error("Error checking skipped profile creation:",T),!1}},[t]),E=m.useCallback(async y=>{if(!t)return null;try{return await t.findUsernameByAddress(y)}catch(T){return console.error("Error finding username by address:",T),null}},[t]),C=m.useCallback((y,T)=>{try{localStorage.setItem("tribes_auth_state",JSON.stringify({address:y.owner,chainId:T,profile:y,timestamp:Date.now()}))}catch(v){console.error("Failed to update profile cache:",v)}},[]),j=m.useCallback(async(y,T)=>{if(!t)throw new Error("SDK not initialized");r(!0),o(null);try{const v=JSON.parse(T);await t.updateProfileMetadata(parseInt(y),v);const P=await t.getProfileById(parseInt(y));u(P)}catch(v){const P=v instanceof Error?v.message:"Failed to update profile";throw o(P),console.error("Error updating profile:",v),v}finally{r(!1)}},[t]),M=m.useCallback(async y=>{if(!t)throw new Error("SDK not initialized");try{return await t.checkUsernameAvailability(y)}catch(T){return console.error("Error checking username:",T),!1}},[t]);return{profile:i,isLoading:n||!s,error:a,currentChainId:h,isTargetNetwork:Ka(h),isSdkInitialized:!!t&&s,getProfileById:b,getProfileByUsername:w,createProfile:g,updateProfileMetadata:d,checkUsernameAvailability:N,validateUsername:k,getProfileByAddress:D,checkProfileOwnership:x,skipProfileCreation:V,hasSkippedProfileCreation:U,findUsernameByAddress:E,updateProfileCache:C,updateProfile:j,checkUsername:M}}const Et="tribes_auth_state",Z=(t,s)=>{const n=new Date().toISOString().split("T")[1].split(".")[0];s?console.log(`[WalletConnect:${n}] ${t}`,s):console.log(`[WalletConnect:${n}] ${t}`)},vt=[{name:"Flash Testnet",chainId:1264453517,rpcUrl:"https://rpc.flash.fuse.io",currencySymbol:"FLASH",blockExplorer:"https://flashscan.monad.xyz",iconUrl:"/flash-logo.png"},{name:"Monad Testnet",chainId:10143,rpcUrl:"https://monad-testnet.g.alchemy.com/v2/5OeRT0SHza89NcfCn83h1lQmRY8iGjsw",currencySymbol:"MONAD",blockExplorer:"https://explorer.monad.xyz/testnet",iconUrl:"/monad-logo.png"},{name:"Chiliz Chain",chainId:88888,blockExplorer:"https://chiliscan.com",rpcUrl:"https://rpc.chiliz.com",currencySymbol:"CHZ"},{name:"Manta Pacific Sepolia Testnet",chainId:3441006,blockExplorer:"https://pacific-explorer.sepolia-testnet.manta.network",rpcUrl:"https://pacific-rpc.sepolia-testnet.manta.network/http",currencySymbol:"MANTA"},{name:"Arbitrum Sepolia Testnet",chainId:421614,blockExplorer:"https://sepolia.arbiscan.io",rpcUrl:"https://arbitrum-sepolia-rpc.publicnode.com",currencySymbol:"ETH"},{name:"Somnia Testnet",chainId:50312,blockExplorer:"https://shannon-explorer.somnia.network/",rpcUrl:"https://dream-rpc.somnia.network",currencySymbol:"STT"},{name:"Abstract Testnet",chainId:11124,blockExplorer:"https://sepolia.abscan.org/",rpcUrl:"https://api.testnet.abs.xyz",currencySymbol:"ETH"}],qa=[{id:"metamask",name:"MetaMask",icon:"",installed:!0,enabled:!0},{id:"coinbase",name:"Coinbase Wallet",icon:"",installed:!1,enabled:!1},{id:"ledger",name:"Ledger",icon:"",installed:!1,enabled:!1},{id:"rainbow",name:"Rainbow Wallet",icon:"",installed:!1,enabled:!1}],on=()=>{const t=ce(),{getProfileByAddress:s}=us(),{chainId:n,switchNetwork:r}=Ve(),[a,o]=m.useState(!1),[i,u]=m.useState(null),[l,f]=m.useState(),c=m.useRef(0),[p,h]=m.useState(!0),[b,w]=m.useState(!1);m.useEffect(()=>{(async()=>{try{["/src/screens/Dashboard.tsx","/src/components/Layout.tsx","/src/components/BottomNav.tsx"].forEach(U=>{const E=document.createElement("link");E.rel="prefetch",E.href=U,document.head.appendChild(E)}),[].forEach(U=>{const E=new Image;E.src=U})}catch(x){console.error("Error preloading assets:",x)}})()},[]),m.useEffect(()=>{Z("WalletConnect component mounted - clearing redirect attempts");try{const D=localStorage.getItem("redirect_attempts");if(D){const x=JSON.parse(D);x["/connect"]&&x["/connect"]>5&&(Z("Too many redirect attempts detected, clearing auth state"),localStorage.removeItem(Et),localStorage.removeItem("tribes_auth"),localStorage.removeItem("tribes_profile"))}localStorage.removeItem("redirect_attempts")}catch(D){console.error("Error clearing redirect attempts:",D)}},[]);const g=async D=>{if(!window.ethereum){f("MetaMask is not installed!");return}try{Z(`Adding network: ${D.name}`),await window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:`0x${D.chainId.toString(16)}`,chainName:D.name,nativeCurrency:{name:D.currencySymbol,symbol:D.currencySymbol,decimals:18},rpcUrls:[D.rpcUrl],blockExplorerUrls:[D.blockExplorer]}]}),Z(`${D.name} network added to MetaMask`)}catch(x){console.error(`Error adding ${D.name} network to MetaMask:`,x),f(`Failed to add ${D.name} network`)}},d=async D=>{if(!window.ethereum){f("MetaMask is not installed!");return}try{Z(`Switching to network with chainId: ${D}`),await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:`0x${D.toString(16)}`}]}),Z(`Switched to network with chainId: ${D}`)}catch(x){if(x.code===4902){Z("Network not added to MetaMask, attempting to add it");const V=vt.find(U=>U.chainId===D);V&&await g(V)}else console.error("Error switching network:",x),f("Failed to switch network")}},N=D=>{w(!0);try{localStorage.setItem("dashboard_prefetch","true")}catch(x){console.error("Error caching data:",x)}setTimeout(()=>{t(D)},100)},k=async D=>{if(!a&&D==="metamask"){o(!0),u(D),c.current+=1,Z(`Starting connection attempt ${c.current} with ${D}`);try{f(void 0),n||(Z("No chain ID detected, switching network"),await r(se.id)),Z("Getting wallet client");const x=await et(n);Z("Requesting addresses from wallet");const[V]=await x.requestAddresses();if(!V)throw Z("No address returned from wallet"),new Error("No address returned from wallet");Z("Got address from wallet",{address:V}),Z("Checking for profile");const{profile:U,error:E}=await s(V);if(E&&Z("Profile check returned error",{code:E.code}),(E==null?void 0:E.code)==="WRONG_CHAIN")throw Z("Wrong chain detected, switching network"),await r(se.id),new Error("Please connect to a supported network");if(V&&(Z("Saving address to localStorage"),localStorage.setItem(Et,JSON.stringify({address:V,chainId:n||se.id,timestamp:Date.now()}))),U){Z("Profile found, navigating to dashboard"),N("/dashboard");return}if((E==null?void 0:E.code)==="NO_PROFILE"){Z("No profile found, navigating to create-profile"),N("/create-profile");return}Z("Unknown profile check result"),f("Failed to check profile status")}catch(x){console.error("Failed to connect wallet:",x),Z("Connection error",{error:x}),f(x instanceof Error?x.message:"Failed to connect wallet")}finally{b||(o(!1),u(null))}}};return b?e.jsxDEV("div",{className:"fixed inset-0 bg-black flex flex-col items-center justify-center",children:[e.jsxDEV("div",{className:"animate-spin mb-4",children:e.jsxDEV(Rt,{size:48,className:"text-monad-purple"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/WalletConnect.tsx",lineNumber:354,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/WalletConnect.tsx",lineNumber:353,columnNumber:9},void 0),e.jsxDEV("h2",{className:"text-xl font-medium text-white",children:"Loading your dashboard..."},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/WalletConnect.tsx",lineNumber:356,columnNumber:9},void 0),e.jsxDEV("p",{className:"text-gray-400 mt-2",children:"Please wait while we prepare your experience"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/WalletConnect.tsx",lineNumber:357,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/WalletConnect.tsx",lineNumber:352,columnNumber:7},void 0):e.jsxDEV("div",{className:"min-h-screen bg-black text-white p-6",children:[e.jsxDEV("div",{className:"flex items-center mb-8",children:[e.jsxDEV("button",{className:"p-2",onClick:()=>t("/"),children:e.jsxDEV(zn,{className:"w-6 h-6"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/WalletConnect.tsx",lineNumber:366,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/WalletConnect.tsx",lineNumber:365,columnNumber:9},void 0),e.jsxDEV("div",{className:"flex-1 flex justify-center space-x-2",children:[e.jsxDEV("div",{className:"w-12 h-2 bg-monad-purple rounded-full"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/WalletConnect.tsx",lineNumber:369,columnNumber:11},void 0),e.jsxDEV("div",{className:"w-2 h-2 bg-white/20 rounded-full"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/WalletConnect.tsx",lineNumber:370,columnNumber:11},void 0),e.jsxDEV("div",{className:"w-2 h-2 bg-white/20 rounded-full"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/WalletConnect.tsx",lineNumber:371,columnNumber:11},void 0),e.jsxDEV("div",{className:"w-2 h-2 bg-white/20 rounded-full"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/WalletConnect.tsx",lineNumber:372,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/WalletConnect.tsx",lineNumber:368,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/WalletConnect.tsx",lineNumber:364,columnNumber:7},void 0),e.jsxDEV("h1",{className:"text-5xl font-bold mb-4",children:"Connect with wallet"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/WalletConnect.tsx",lineNumber:376,columnNumber:7},void 0),e.jsxDEV("p",{className:"text-gray-400 mb-8",children:"We found the following options based on compatibility with Tribes."},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/WalletConnect.tsx",lineNumber:377,columnNumber:7},void 0),l&&e.jsxDEV("div",{className:"bg-red-900/30 border border-red-800 text-red-200 px-4 py-3 rounded mb-4",children:l},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/WalletConnect.tsx",lineNumber:382,columnNumber:9},void 0),e.jsxDEV("div",{className:"space-y-3 mb-8",children:qa.map(D=>e.jsxDEV("button",{onClick:()=>D.enabled&&k(D.id),disabled:a||!D.enabled,className:`w-full flex items-center p-4 rounded-xl transition-colors ${D.enabled?"bg-white/5 hover:bg-white/10 cursor-pointer":"bg-white/5 opacity-60 cursor-not-allowed"} ${a&&i===D.id?"border border-monad-purple":""}`,children:[e.jsxDEV("span",{className:"text-2xl mr-3",children:D.icon},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/WalletConnect.tsx",lineNumber:399,columnNumber:13},void 0),e.jsxDEV("div",{className:"flex-1 text-left",children:[e.jsxDEV("div",{className:"font-medium",children:D.name},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/WalletConnect.tsx",lineNumber:401,columnNumber:15},void 0),e.jsxDEV("div",{className:"text-sm text-gray-400",children:a?i===D.id?"Connecting...":"Waiting...":D.enabled?"Connect now":"Coming soon"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/WalletConnect.tsx",lineNumber:402,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/WalletConnect.tsx",lineNumber:400,columnNumber:13},void 0)]},D.id,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/WalletConnect.tsx",lineNumber:389,columnNumber:11},void 0))},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/WalletConnect.tsx",lineNumber:387,columnNumber:7},void 0),e.jsxDEV("div",{className:"mb-8 bg-white/5 rounded-xl overflow-hidden",children:[e.jsxDEV("button",{onClick:()=>h(!p),className:"w-full py-3 px-4 flex items-center justify-between bg-white/10 hover:bg-white/15 transition-colors",children:[e.jsxDEV("span",{className:"text-lg font-medium",children:"Available Networks"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/WalletConnect.tsx",lineNumber:421,columnNumber:11},void 0),p?e.jsxDEV(Wn,{className:"w-5 h-5 text-gray-400"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/WalletConnect.tsx",lineNumber:423,columnNumber:13},void 0):e.jsxDEV(jt,{className:"w-5 h-5 text-gray-400"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/WalletConnect.tsx",lineNumber:424,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/WalletConnect.tsx",lineNumber:417,columnNumber:9},void 0),p&&e.jsxDEV("div",{className:"p-4 space-y-4",children:[e.jsxDEV("p",{className:"text-gray-400 text-sm",children:"Select or add one of these networks to your wallet to use with Tribes:"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/WalletConnect.tsx",lineNumber:430,columnNumber:13},void 0),e.jsxDEV("div",{className:"grid gap-3",children:vt.map(D=>e.jsxDEV("div",{className:"border border-white/10 rounded-lg p-4 hover:bg-white/5 transition-colors",children:e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{className:"flex items-center space-x-3",children:[e.jsxDEV("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-purple-500 to-blue-600 flex items-center justify-center text-white font-bold",children:e.jsxDEV("span",{children:D.currencySymbol.charAt(0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/WalletConnect.tsx",lineNumber:439,columnNumber:25},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/WalletConnect.tsx",lineNumber:438,columnNumber:23},void 0),e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"font-medium text-white",children:D.name},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/WalletConnect.tsx",lineNumber:442,columnNumber:25},void 0),e.jsxDEV("div",{className:"flex items-center text-sm text-gray-400 mt-1",children:[e.jsxDEV("span",{children:["Chain ID: ",D.chainId]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/WalletConnect.tsx",lineNumber:444,columnNumber:27},void 0),e.jsxDEV("span",{className:"mx-2",children:""},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/WalletConnect.tsx",lineNumber:445,columnNumber:27},void 0),e.jsxDEV("a",{href:D.blockExplorer,target:"_blank",rel:"noopener noreferrer",className:"text-monad-purple hover:underline inline-flex items-center",onClick:x=>x.stopPropagation(),children:["Explorer ",e.jsxDEV($e,{className:"w-3 h-3 ml-1"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/WalletConnect.tsx",lineNumber:453,columnNumber:38},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/WalletConnect.tsx",lineNumber:446,columnNumber:27},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/WalletConnect.tsx",lineNumber:443,columnNumber:25},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/WalletConnect.tsx",lineNumber:441,columnNumber:23},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/WalletConnect.tsx",lineNumber:437,columnNumber:21},void 0),e.jsxDEV("div",{className:"flex space-x-2",children:[e.jsxDEV("button",{onClick:x=>{x.stopPropagation(),d(D.chainId)},className:"py-2 px-4 bg-monad-purple text-white text-sm rounded-lg hover:bg-monad-purple/80 transition-colors",children:"Switch"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/WalletConnect.tsx",lineNumber:459,columnNumber:23},void 0),e.jsxDEV("button",{onClick:x=>{x.stopPropagation(),g(D)},className:"py-2 px-4 bg-white/10 text-white text-sm rounded-lg hover:bg-white/20 transition-colors",children:"Add"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/WalletConnect.tsx",lineNumber:468,columnNumber:23},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/WalletConnect.tsx",lineNumber:458,columnNumber:21},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/WalletConnect.tsx",lineNumber:436,columnNumber:19},void 0)},D.chainId,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/WalletConnect.tsx",lineNumber:435,columnNumber:17},void 0))},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/WalletConnect.tsx",lineNumber:433,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/WalletConnect.tsx",lineNumber:429,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/WalletConnect.tsx",lineNumber:416,columnNumber:7},void 0),e.jsxDEV("p",{className:"text-center text-sm text-gray-400 mt-8",children:["Don't have a wallet?"," ",e.jsxDEV("a",{href:"https://metamask.io/download/",target:"_blank",rel:"noopener noreferrer",className:"text-monad-purple hover:underline inline-flex items-center",children:["Get MetaMask ",e.jsxDEV($e,{className:"w-3 h-3 ml-1"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/WalletConnect.tsx",lineNumber:494,columnNumber:24},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/WalletConnect.tsx",lineNumber:488,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/WalletConnect.tsx",lineNumber:486,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/WalletConnect.tsx",lineNumber:363,columnNumber:5},void 0)},ye={MIN_LENGTH:3};function ln({mode:t,existingProfile:s,onSuccess:n,onCancel:r,className:a=""}){const o=ce(),{updateProfileMetadata:i,checkUsernameAvailability:u,validateUsername:l,currentChainId:f,isTargetNetwork:c}=us(),{showNotification:p}=Ss(),{data:h,isLoading:b}=Kn(),{chainId:w,switchNetwork:g}=Ve(),{isConnected:d,address:N,walletClient:k}=ls(),{sdk:D}=Is(),[x,V]=m.useState((s==null?void 0:s.username)||""),[U,E]=m.useState(""),[C,j]=m.useState(""),[M,y]=m.useState(""),[T,v]=m.useState(""),[P,I]=m.useState(""),[O,B]=m.useState(""),[_,S]=m.useState(""),[A,R]=m.useState(!1),[H,X]=m.useState(!0),[be,bs]=m.useState(!1),[hs,ut]=m.useState(!1),As=m.useRef(new Map);m.useEffect(()=>{if(t==="edit"||x.length<ye.MIN_LENGTH)return;const G=x,ie=w,z=`${x}-${ie}`;let W=!0;if(As.current.has(z)){const pe=As.current.get(z);console.log(`[ProfileForm] Using cached result for ${x} on chain ${ie}: ${pe}`),X(pe||!1);return}console.log(`[ProfileForm] Setting up debounce check for ${x} on chain ${ie}`);const re=setTimeout(async()=>{if(!W){console.log(`[ProfileForm] Component unmounted, skipping check for ${G}`);return}bs(!0);try{console.log(`[ProfileForm] Checking availability for ${G} on chain ${ie}`);const pe=await u(x);As.current.set(z,pe),W&&G===x&&(console.log(`[ProfileForm] Username ${G} availability on chain ${ie}: ${pe}`),X(pe))}catch(pe){console.error("Error checking username:",pe),W&&G===x&&X(!1)}finally{W&&G===x&&bs(!1)}},1e3);return()=>{console.log(`[ProfileForm] Cleanup for username check: ${G} on chain ${ie}`),W=!1,clearTimeout(re)}},[x,t,u,w]),m.useEffect(()=>{if(s){V(s.username);try{const G=JSON.parse(s.metadata);E(G.bio||""),j(G.avatar||"")}catch(G){console.error("Failed to parse profile metadata:",G)}}},[s]),m.useEffect(()=>{const G=async()=>{if(console.log("[ProfileForm] Starting checkExistingProfile, mode:",t,"hasCheckedProfile:",hs),t!=="create"||hs){console.log("[ProfileForm] Skipping profile check - not in create mode or already checked");return}if(localStorage.getItem("on_profile_setup_page")==="true"||window.location.pathname.includes("username-setup")||window.location.pathname.includes("create-profile")){console.log("[ProfileForm] On profile creation page, marking as checked without navigation"),ut(!0);return}try{console.log("[ProfileForm] Beginning wallet check"),bs(!0);let z;if(h)z=(await h.getAddresses())[0],console.log("[ProfileForm] Got address from wagmiWalletClient:",z);else try{z=(await(await et()).getAddresses())[0],console.log("[ProfileForm] Got address from getWalletClient:",z)}catch(W){console.error("[ProfileForm] Unable to get wallet client:",W)}if(z){console.log("[ProfileForm] Checking stored profile data for address:",z);const W=localStorage.getItem("tribes_auth_state");if(W){console.log("[ProfileForm] Found tribes_auth_state in localStorage");const re=JSON.parse(W),pe=window.location.pathname.includes("username-setup")||window.location.pathname.includes("create-profile");if(console.log("[ProfileForm] Profile check data:",{hasProfile:!!re.profile,addressMatch:re.address===z,onProfileCreationPage:pe,currentPath:window.location.pathname}),re.profile&&re.address===z&&!pe){console.log("[ProfileForm] Found existing profile, navigating to dashboard"),o("/dashboard");return}else console.log("[ProfileForm] Not navigating - either no profile, address mismatch, or on profile creation page")}else console.log("[ProfileForm] No tribes_auth_state found in localStorage")}}catch(z){console.error("[ProfileForm] Error checking existing profile:",z)}finally{bs(!1),ut(!0),console.log("[ProfileForm] Profile check completed")}};hs||(console.log("[ProfileForm] Triggering profile check"),G())},[t,o,hs,h]);const fn=async(G,ie)=>{const z=w&&me.find(W=>W.id===w)||K;if(console.log("[ProfileForm] Using chain:",{chainId:z.id,chainName:z.name}),!k||!N){if(h&&N){console.log("[ProfileForm] Using fallback wagmiWalletClient since direct walletClient is unavailable");try{const{profileNFTMinter:W}=J(z.id);console.log("[ProfileForm] Using contracts with wagmiWalletClient:",{profileNFTMinter:W.address,chainId:z.id,address:N});const re=await h.writeContract({chain:z,address:W.address,abi:W.abi,functionName:"createProfile",args:[G,ie],account:N});return console.log(`[ProfileForm] Transaction submitted with wagmiWalletClient: ${re}`),re}catch(W){const re=W;throw console.error("[ProfileForm] Fallback to wagmiWalletClient also failed:",re),new Error(`Failed with wagmiWalletClient: ${re.message}`)}}throw new Error("Wallet not connected: "+(k?"Missing address":"Missing walletClient"))}console.log("[ProfileForm] Creating profile directly with wallet client");try{const{profileNFTMinter:W}=J(z.id);console.log("[ProfileForm] Using contracts:",{profileNFTMinter:W.address,chainId:z.id,walletClient:k,account:N});const re=await k.writeContract({chain:z,address:W.address,abi:W.abi,functionName:"createProfile",args:[G,ie],account:N});return console.log(`[ProfileForm] Transaction submitted: ${re}`),re}catch(W){throw console.error("[ProfileForm] Error sending transaction directly:",W),W}},pn=async G=>{if(G.preventDefault(),console.log("[ProfileForm] Form submission attempted"),!x&&t==="create"){p("Username is required","error");return}if(t==="create"){if(!l(x)){p("Invalid username format","error");return}if(!H){p("Username is not available","error");return}}if(!d){p("Please connect your wallet to create a profile","error");return}if(!c){p("Please switch to the correct network","error");return}console.log("[ProfileForm] Starting profile creation/update..."),R(!0);try{const ie=JSON.stringify({avatar:C,bio:U,location:M,website:T,social:{twitter:P,instagram:O,discord:_}});if(t==="edit"&&s)try{const z=typeof s.tokenId=="string"?parseInt(s.tokenId):typeof s.tokenId=="bigint"?Number(s.tokenId):s.tokenId||0;console.log(`[ProfileForm] Updating profile ${z}`),await i(z,ie),p("Profile updated successfully!","success")}catch(z){const W=z;console.error("[ProfileForm] Error updating profile:",W),p(`Update failed: ${W.message}`,"error"),R(!1);return}else try{console.log("[ProfileForm] Attempting direct profile creation");const z=await fn(x,ie);p("Profile creation transaction submitted!","success")}catch(z){const W=z;console.error("[ProfileForm] Direct profile creation failed:",W),p(`Error: ${W.message}`,"error"),R(!1);return}n?n():o("/dashboard")}catch(ie){const z=ie;console.error("[ProfileForm] Unexpected error during form submission:",z),p(`Unexpected error: ${z.message}`,"error")}finally{R(!1)}},bn=async()=>{try{await g(K.id),p("Switching to Monad Devnet...","info")}catch(G){console.error("[ProfileForm] Network switch error:",G),p("Failed to switch network","error")}};return b?e.jsxDEV("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxDEV("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-theme-primary"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/profile/ProfileForm.tsx",lineNumber:425,columnNumber:9},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/profile/ProfileForm.tsx",lineNumber:424,columnNumber:7},this):e.jsxDEV("div",{className:a,children:[e.jsxDEV("h1",{className:"text-3xl font-bold mb-2",children:t==="edit"?"Edit Profile":"Create Your Profile"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/profile/ProfileForm.tsx",lineNumber:432,columnNumber:7},this),e.jsxDEV("p",{className:"text-gray-400 mb-8",children:t==="edit"?"Update your profile information.":"Choose a unique username and fill in your profile details."},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/profile/ProfileForm.tsx",lineNumber:435,columnNumber:7},this),!c&&e.jsxDEV("div",{className:"mb-6 p-4 bg-red-500/10 border border-red-500 rounded-lg",children:[e.jsxDEV("h3",{className:"text-lg font-medium text-red-500 mb-2",children:"Wrong Network"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/profile/ProfileForm.tsx",lineNumber:444,columnNumber:11},this),e.jsxDEV("p",{className:"text-gray-300 mb-3",children:["You need to be on the Monad Devnet to create or update your profile.",f&&e.jsxDEV("span",{className:"block mt-1",children:["Current network: Chain ID ",f," / Required: Chain ID ",K.id]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/profile/ProfileForm.tsx",lineNumber:448,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/profile/ProfileForm.tsx",lineNumber:445,columnNumber:11},this),e.jsxDEV("button",{onClick:bn,className:"py-2 px-4 bg-red-500 text-white rounded-lg font-medium transition-colors hover:bg-red-600",children:"Switch to Monad Devnet"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/profile/ProfileForm.tsx",lineNumber:453,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/profile/ProfileForm.tsx",lineNumber:443,columnNumber:9},this),e.jsxDEV("form",{className:"space-y-6",onSubmit:pn,children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-300",children:["Username ",t==="create"&&"*"]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/profile/ProfileForm.tsx",lineNumber:465,columnNumber:11},this),e.jsxDEV("div",{className:"mt-1 relative",children:[e.jsxDEV("input",{id:"username",name:"username",type:"text",required:t==="create",value:x,onChange:G=>V(G.target.value),disabled:t==="edit",className:`appearance-none block w-full px-3 py-2 bg-black/50 border ${H?be?"border-yellow-500":H&&x.length>=ye.MIN_LENGTH?"border-green-500":"border-white/10":"border-red-500"} rounded-lg focus:outline-none focus:ring-2 focus:ring-theme-primary focus:border-transparent ${t==="edit"?"opacity-50 cursor-not-allowed":""}`,placeholder:"Enter username"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/profile/ProfileForm.tsx",lineNumber:469,columnNumber:13},this),e.jsxDEV("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3",children:[be&&e.jsxDEV("div",{className:"text-yellow-400 animate-spin h-5 w-5",children:""},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/profile/ProfileForm.tsx",lineNumber:491,columnNumber:17},this),!be&&t==="create"&&x.length>=ye.MIN_LENGTH&&H&&e.jsxDEV("div",{className:"text-green-500 text-xl",children:""},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/profile/ProfileForm.tsx",lineNumber:495,columnNumber:17},this),!be&&t==="create"&&x.length>=ye.MIN_LENGTH&&!H&&e.jsxDEV("div",{className:"text-red-500 text-xl",children:""},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/profile/ProfileForm.tsx",lineNumber:499,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/profile/ProfileForm.tsx",lineNumber:489,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/profile/ProfileForm.tsx",lineNumber:468,columnNumber:11},this),t==="create"&&x.length>0&&x.length<ye.MIN_LENGTH&&e.jsxDEV("p",{className:"mt-1 text-sm text-yellow-500",children:["Username must be at least ",ye.MIN_LENGTH," characters"]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/profile/ProfileForm.tsx",lineNumber:506,columnNumber:13},this),t==="create"&&x.length>=ye.MIN_LENGTH&&!H&&e.jsxDEV("p",{className:"mt-1 text-sm text-red-500",children:"Username is not available"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/profile/ProfileForm.tsx",lineNumber:510,columnNumber:13},this),t==="create"&&x.length>=ye.MIN_LENGTH&&H&&!be&&e.jsxDEV("p",{className:"mt-1 text-sm text-green-500",children:"Username is available"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/profile/ProfileForm.tsx",lineNumber:514,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/profile/ProfileForm.tsx",lineNumber:464,columnNumber:9},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{htmlFor:"avatar",className:"block text-sm font-medium text-gray-300",children:"Avatar URL (optional)"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/profile/ProfileForm.tsx",lineNumber:520,columnNumber:11},this),e.jsxDEV("div",{className:"mt-1",children:e.jsxDEV("input",{id:"avatar",name:"avatar",type:"text",value:C,onChange:G=>j(G.target.value),className:"appearance-none block w-full px-3 py-2 bg-black/50 border border-white/10 rounded-lg focus:outline-none focus:ring-2 focus:ring-theme-primary focus:border-transparent",placeholder:"Enter avatar URL"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/profile/ProfileForm.tsx",lineNumber:524,columnNumber:13},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/profile/ProfileForm.tsx",lineNumber:523,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/profile/ProfileForm.tsx",lineNumber:519,columnNumber:9},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{htmlFor:"bio",className:"block text-sm font-medium text-gray-300",children:"Bio (optional)"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/profile/ProfileForm.tsx",lineNumber:538,columnNumber:11},this),e.jsxDEV("div",{className:"mt-1",children:e.jsxDEV("textarea",{id:"bio",name:"bio",rows:3,value:U,onChange:G=>E(G.target.value),className:"appearance-none block w-full px-3 py-2 bg-black/50 border border-white/10 rounded-lg focus:outline-none focus:ring-2 focus:ring-theme-primary focus:border-transparent resize-none",placeholder:"Tell us about yourself"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/profile/ProfileForm.tsx",lineNumber:542,columnNumber:13},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/profile/ProfileForm.tsx",lineNumber:541,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/profile/ProfileForm.tsx",lineNumber:537,columnNumber:9},this),e.jsxDEV("div",{className:"flex space-x-4",children:[r&&e.jsxDEV("button",{type:"button",onClick:r,disabled:A,className:"flex-1 py-2 px-4 bg-white/5 text-white rounded-lg font-medium hover:bg-white/10 transition-colors border border-white/10 disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/profile/ProfileForm.tsx",lineNumber:557,columnNumber:13},this),e.jsxDEV("button",{type:"submit",disabled:A||be||t==="create"&&(!x||x.length<ye.MIN_LENGTH||!H),className:"flex-1 py-2 px-4 bg-theme-primary text-black rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed relative",children:[A&&e.jsxDEV("span",{className:"absolute inset-0 flex items-center justify-center bg-theme-primary rounded-lg",children:e.jsxDEV("div",{className:"animate-spin h-5 w-5 border-2 border-black border-t-transparent rounded-full"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/profile/ProfileForm.tsx",lineNumber:582,columnNumber:17},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/profile/ProfileForm.tsx",lineNumber:581,columnNumber:15},this),A?t==="edit"?"Saving...":"Creating...":t==="edit"?"Save Changes":"Create Profile"]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/profile/ProfileForm.tsx",lineNumber:566,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/profile/ProfileForm.tsx",lineNumber:555,columnNumber:9},this),e.jsxDEV("p",{className:"mt-4 text-sm text-center text-gray-400",children:t==="edit"?"This action requires a small gas fee to update your profile":"This action requires a small gas fee to mint your profile NFT"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/profile/ProfileForm.tsx",lineNumber:591,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/profile/ProfileForm.tsx",lineNumber:462,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/profile/ProfileForm.tsx",lineNumber:431,columnNumber:5},this)}function Tt(){return m.useEffect(()=>(console.log("[UsernameAvatarSetup] Component mounted"),window.localStorage.setItem("on_profile_setup_page","true"),()=>{console.log("[UsernameAvatarSetup] Component unmounting"),window.localStorage.removeItem("on_profile_setup_page")}),[]),e.jsxDEV("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-white",children:[e.jsxDEV(tt,{onMenuClick:()=>{}},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/UsernameAvatarSetup.tsx",lineNumber:20,columnNumber:7},this),e.jsxDEV("div",{className:"max-w-4xl mx-auto px-4 py-8",children:e.jsxDEV("div",{className:"bg-white/[0.02] backdrop-blur-xl rounded-2xl border border-white/10 p-8",children:e.jsxDEV(ln,{mode:"create"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/UsernameAvatarSetup.tsx",lineNumber:24,columnNumber:11},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/UsernameAvatarSetup.tsx",lineNumber:23,columnNumber:9},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/UsernameAvatarSetup.tsx",lineNumber:22,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/UsernameAvatarSetup.tsx",lineNumber:19,columnNumber:5},this)}const Ns={ETHEREUM_MAINNET:1,GOERLI:5,MONAD_TESTNET:20143,FUSE_EMBER:1264453517},Ja={tribes:"0x54812005171F747f5E69afA08989F41Cf06eeE48"};function Ha(t){switch(console.log(`Getting contract addresses for chain ID: ${t}`),t){case Ns.ETHEREUM_MAINNET:return{tribes:"0x1234567890123456789012345678901234567890"};case Ns.GOERLI:return{tribes:"0x1234567890123456789012345678901234567890"};case Ns.MONAD_TESTNET:return{tribes:"0x16C4F870B59E55bB80A620547987Bd9302FC567d"};case Ns.FUSE_EMBER:return{tribes:"0x54812005171F747f5E69afA08989F41Cf06eeE48"};default:return console.warn(`Using fallback addresses for unsupported chain ID: ${t}`),Ja}}const Ga=[{inputs:[{name:"postId",type:"uint256"}],name:"getPost",outputs:[{name:"id",type:"uint256"},{name:"creator",type:"address"},{name:"tribeId",type:"uint256"},{name:"type",type:"string"},{name:"content",type:"string"},{name:"title",type:"string"},{name:"description",type:"string"},{name:"tags",type:"string[]"},{name:"images",type:"string[]"},{name:"videos",type:"string[]"},{name:"timestamp",type:"uint256"},{name:"likes",type:"uint256"},{name:"comments",type:"uint256"},{name:"shares",type:"uint256"},{name:"views",type:"uint256"},{name:"engagement",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"tribeId",type:"uint256"}],name:"getPostsByTribe",outputs:[{components:[{name:"id",type:"uint256"},{name:"creator",type:"address"},{name:"tribeId",type:"uint256"},{name:"type",type:"string"},{name:"content",type:"string"},{name:"title",type:"string"},{name:"description",type:"string"},{name:"tags",type:"string[]"},{name:"images",type:"string[]"},{name:"videos",type:"string[]"},{name:"timestamp",type:"uint256"},{name:"likes",type:"uint256"},{name:"comments",type:"uint256"},{name:"shares",type:"uint256"},{name:"views",type:"uint256"},{name:"engagement",type:"uint256"}],name:"",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{name:"userId",type:"address"}],name:"getUserPosts",outputs:[{components:[{name:"id",type:"uint256"},{name:"creator",type:"address"},{name:"tribeId",type:"uint256"},{name:"type",type:"string"},{name:"content",type:"string"},{name:"title",type:"string"},{name:"description",type:"string"},{name:"tags",type:"string[]"},{name:"images",type:"string[]"},{name:"videos",type:"string[]"},{name:"timestamp",type:"uint256"},{name:"likes",type:"uint256"},{name:"comments",type:"uint256"},{name:"shares",type:"uint256"},{name:"views",type:"uint256"},{name:"engagement",type:"uint256"}],name:"",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{name:"tribeId",type:"uint256"},{name:"metadata",type:"string"}],name:"createPost",outputs:[{name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"postId",type:"uint256"},{name:"metadata",type:"string"}],name:"updatePost",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"postId",type:"uint256"}],name:"deletePost",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"postId",type:"uint256"}],name:"likePost",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"postId",type:"uint256"},{name:"content",type:"string"}],name:"commentPost",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"postId",type:"uint256"}],name:"sharePost",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"getLastPostId",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"}],Ya=typeof window<"u",Le=class Le{constructor(){L(this,"prisma",null);L(this,"isServer");if(this.isServer=!Ya,!this.isServer)console.log("Running in browser environment - database operations will be mocked");else try{this.prisma=new qn.PrismaClient}catch(s){console.error("Failed to initialize PrismaClient:",s)}}static getInstance(){return Le.instance||(Le.instance=new Le),Le.instance}ensurePrisma(){if(!this.prisma)throw this.isServer?new Error("PrismaClient not initialized"):new Error("Database operations not available in browser");return this.prisma}async createPost(s){return this.isServer?this.ensurePrisma().post.create({data:{id:s.id,authorId:s.authorId,content:s.content,type:s.type,tribeId:s.tribeId,metadata:s.metadata||{},blockchainId:s.blockchainId,blockchainTxHash:s.blockchainTxHash,isConfirmed:s.isConfirmed||!1,createdAt:new Date,updatedAt:new Date}}):{...s}}async getPost(s){return this.isServer?this.ensurePrisma().post.findUnique({where:{id:s}}):null}async getPostByBlockchainId(s){return this.isServer?this.ensurePrisma().post.findUnique({where:{blockchainId:s}}):null}async getPostsByTribe(s,n=20,r=0){return this.isServer?this.ensurePrisma().post.findMany({where:{tribeId:s,updatedAt:{not:void 0}},orderBy:{createdAt:"desc"},take:n,skip:r}):[]}async getUserFeed(s,n=20,r=0){return this.isServer?this.ensurePrisma().post.findMany({where:{authorId:s,updatedAt:{not:void 0}},orderBy:{createdAt:"desc"},take:n,skip:r}):[]}async confirmPost(s,n){return this.isServer?this.ensurePrisma().post.update({where:{blockchainId:s},data:{blockchainTxHash:n,isConfirmed:!0,confirmedAt:new Date}}):{blockchainId:s,blockchainTxHash:n,isConfirmed:!0}}async deletePost(s){return this.isServer?this.ensurePrisma().post.update({where:{id:s},data:{updatedAt:null}}):{id:s}}async createInteraction(s,n,r){return this.isServer?this.ensurePrisma().postInteraction.create({data:{postId:s,userId:n,type:r}}):{id:Date.now().toString(),postId:s,userId:n,type:r}}async getInteractions(s){return this.isServer?this.ensurePrisma().postInteraction.findMany({where:{postId:s}}):[]}async disconnect(){this.isServer&&this.prisma&&await this.prisma.$disconnect()}async getTribe(s){try{if(this.isServer)return null;const n=localStorage.getItem(`tribe:${s}`);return n?JSON.parse(n):null}catch(n){return console.error("Error getting tribe:",n),null}}async getAllTribes(s=100,n=0){try{if(this.isServer)return[];const r=[],o=localStorage.getItem("tribe_ids");if(o){const u=JSON.parse(o).slice(n,n+s);for(const l of u){const f=await this.getTribe(l);f&&r.push(f)}}return r}catch(r){return console.error("Error getting all tribes:",r),[]}}async createOrUpdateTribe(s){try{if(this.isServer)return!1;localStorage.setItem(`tribe:${s.id}`,JSON.stringify(s));const n="tribe_ids",r=localStorage.getItem(n);let a=r?JSON.parse(r):[];return a.includes(s.id)||(a.push(s.id),localStorage.setItem(n,JSON.stringify(a))),!0}catch(n){return console.error("Error creating/updating tribe:",n),!1}}async getUserByAddress(s){try{if(this.isServer)return null;const n=localStorage.getItem(`user:${s}`);return n?JSON.parse(n):null}catch(n){return console.error("Error getting user by address:",n),null}}async getUserByUsername(s){var n;try{if(this.isServer)return null;const a=localStorage.getItem("username_map");if(a){const o=JSON.parse(a),i=(n=Object.entries(o).find(([u,l])=>l===s))==null?void 0:n[0];if(i)return this.getUserByAddress(i)}return null}catch(r){return console.error("Error getting user by username:",r),null}}async createOrUpdateUser(s){try{if(this.isServer)return!1;if(localStorage.setItem(`user:${s.address}`,JSON.stringify(s)),s.username){const n="username_map",r=localStorage.getItem(n),a=r?JSON.parse(r):{};a[s.address]=s.username,localStorage.setItem(n,JSON.stringify(a))}return!0}catch(n){return console.error("Error creating/updating user:",n),!1}}async getAllUsers(){try{if(this.isServer)return[];const s=[],n=[];for(let r=0;r<localStorage.length;r++){const a=localStorage.key(r);if(a!=null&&a.startsWith("user:")){const o=a.substring(5);n.push(o)}}for(const r of n){const a=await this.getUserByAddress(r);a&&s.push(a)}return s}catch(s){return console.error("Error getting all users:",s),[]}}async getUserPosts(s,n=20,r=0){return this.getMockData("user_posts",s)||[]}getMockData(s,n){if(this.isServer)return null;try{const r=`${s}:${n}`,a=localStorage.getItem(r);if(!a)return null;const o=JSON.parse(a);return o.expires&&o.expires<Date.now()?(localStorage.removeItem(r),null):o.data}catch(r){return console.error("Error reading mock data:",r),null}}setMockData(s,n,r){if(!this.isServer)try{const a=`${s}:${n}`,o={data:r,timestamp:Date.now(),expires:Date.now()+5*60*1e3};localStorage.setItem(a,JSON.stringify(o))}catch(a){console.error("Error writing mock data:",a)}}async getLastIndexedBlock(s){if(!this.isServer)return 0;const n=`lastIndexedBlock:${s}`,r=localStorage.getItem(n);return r?Number(r):0}async updateLastIndexedBlock(s,n){if(!this.isServer){const r=`lastIndexedBlock:${n}`;localStorage.setItem(r,s.toString());return}}async createBlockEvent(s){return this.ensurePrisma().blockEvent.create({data:{blockNumber:BigInt(s.blockNumber),transactionHash:s.transactionHash,eventName:s.eventName,eventData:s.eventData,processed:!1,error:null}})}async markEventProcessed(s,n){await this.ensurePrisma().blockEvent.update({where:{id:s},data:{processed:!0,error:n,updatedAt:new Date}})}async getUnprocessedEvents(s=100){return this.ensurePrisma().blockEvent.findMany({where:{processed:!1},orderBy:{blockNumber:"asc"},take:s})}async createOrUpdatePost(s){if(!this.isServer)throw new Error("Cannot create/update post in browser environment");return this.ensurePrisma().post.upsert({where:{id:s.id},create:{...s,metadata:s.metadata||{},createdAt:new Date,updatedAt:new Date},update:{...s,metadata:s.metadata||{},updatedAt:new Date}})}async getUnindexedPosts(s=100){return this.isServer?this.ensurePrisma().post.findMany({where:{updatedAt:{equals:void 0}},orderBy:{createdAt:"asc"},take:s}):[]}async getPostsByBlockRange(s,n){return this.isServer?this.ensurePrisma().post.findMany({where:{createdAt:{gte:new Date(s*1e3),lte:new Date(n*1e3)}},orderBy:{createdAt:"asc"}}):[]}async updateIndexerState(s,n){await this.ensurePrisma().indexerState.upsert({where:{chainId:s},create:{chainId:s,lastIndexedBlock:n.lastIndexedBlock||BigInt(0),lastSyncTime:n.lastSyncTime||new Date},update:{...n}})}async getIndexerState(s){return this.ensurePrisma().indexerState.findFirst({where:{chainId:s}})}};L(Le,"instance");let Hs=Le,ys=null;const Ps=t=>(ys?t&&(ys=new Us(t)):ys=new Us(t||0),ys);class Xa{constructor(s){L(this,"cache");L(this,"maxSize");L(this,"keyTimestamps");this.cache=new Map,this.maxSize=s,this.keyTimestamps=new Map}get(s){if(this.cache.has(s))return this.keyTimestamps.set(s,Date.now()),this.cache.get(s)}set(s,n){if(this.cache.size>=this.maxSize&&!this.cache.has(s)){const r=this.getOldestKey();r&&(this.cache.delete(r),this.keyTimestamps.delete(r))}this.cache.set(s,n),this.keyTimestamps.set(s,Date.now())}has(s){return this.cache.has(s)}delete(s){return this.keyTimestamps.delete(s),this.cache.delete(s)}clear(){this.cache.clear(),this.keyTimestamps.clear()}getOldestKey(){if(this.keyTimestamps.size===0)return;let s,n=1/0;return this.keyTimestamps.forEach((r,a)=>{r<n&&(n=r,s=a)}),s}get size(){return this.cache.size}keys(){return this.cache.keys()}values(){return this.cache.values()}entries(){return this.cache.entries()}}const Be=class Be{constructor(){L(this,"postsCache");L(this,"tribePostsCache");L(this,"userPostsCache");L(this,"dbService",null);L(this,"indexerService",null);L(this,"queueService",null);L(this,"CACHE_TTL",5*60*1e3);L(this,"LOCAL_STORAGE_TTL",24*60*60*1e3);L(this,"MAX_CACHED_POSTS",250);L(this,"MAX_POSTS_PER_TRIBE",100);L(this,"isServer");L(this,"contract");L(this,"isSyncing",!1);L(this,"syncProgress",0);L(this,"syncTotal",0);L(this,"syncCallbacks",new Set);L(this,"lastSyncTime",0);L(this,"syncErrorCount",0);L(this,"lastError",null);L(this,"metrics",{hits:0,misses:0,source:{memory:0,localStorage:0,indexedDB:0,database:0,blockchain:0}});L(this,"cacheStats",new Map);this.postsCache=new Xa(this.MAX_CACHED_POSTS),this.tribePostsCache=new Map,this.userPostsCache=new Map,this.isServer=typeof window>"u",this.isServer?(this.dbService=Hs.getInstance(),this.indexerService=Ps(),this.setupEventListeners()):this.initializeCache()}static getInstance(){return Be.instance||(Be.instance=new Be),Be.instance}setupEventListeners(){var s;(s=this.indexerService)==null||s.onCacheUpdate((n,r)=>{if(n==="posts"){const{postId:a,post:o}=r;this.invalidateCache(a)}})}async initializeCache(){console.info("[Cache] Initializing frontend cache...");try{await this.loadFromIndexedDB(),await this.loadFromLocalStorage(),await this.fetchInitialData(),console.info("[Cache] Cache initialization complete")}catch(s){console.error("[Cache] Error initializing cache:",s)}}async loadFromIndexedDB(){if(window.indexedDB)try{const s=indexedDB.open("tribes_posts_cache",1);s.onsuccess=()=>{const r=s.result.transaction(["posts","tribes"],"readonly"),a=r.objectStore("posts"),o=r.objectStore("tribes");a.getAll().onsuccess=i=>{i.target.result.forEach(l=>{if(Date.now()-l._timestamp<this.LOCAL_STORAGE_TTL){const{_timestamp:f,...c}=l;this.setCache(l.id,c)}})},o.getAll().onsuccess=i=>{i.target.result.forEach(l=>{Date.now()-l.timestamp<this.LOCAL_STORAGE_TTL&&this.tribePostsCache.set(`tribe:${l.id}`,{data:l.postIds,timestamp:l.timestamp})})}},s.onupgradeneeded=n=>{const r=s.result;r.objectStoreNames.contains("posts")||r.createObjectStore("posts",{keyPath:"id"}),r.objectStoreNames.contains("tribes")||r.createObjectStore("tribes",{keyPath:"id"})}}catch(s){console.warn("[Cache] IndexedDB load failed:",s)}}async fetchInitialData(){try{const s=await this.getContract();if(!s){console.warn("[Cache] No contract available for initial data fetch");return}const[n,r]=await s.getPostsByTribe("0",BigInt(0),BigInt(20));if(!Array.isArray(n)){console.warn("[Cache] Invalid post IDs from blockchain");return}const o=(await Promise.all(n.map(async i=>{const u=await s.getPost(Number(i));return u?this.mapBlockchainPostToUIPost(u):null}))).filter(i=>i!==null);o.forEach(i=>{this.setCache(i.id,i)}),console.info("[Cache] Initial data loaded from blockchain:",o.length,"posts")}catch(s){console.error("[Cache] Error fetching initial data:",s)}}async getFromCacheOrDB(s){var o;const n=`posts:${s}`,r=this.postsCache.get(n);if(r&&!this.isCacheExpired(r))return this.logCacheAccess(n,!0,"memory"),r.data;if(!this.isServer){try{const u=await this.getFromIndexedDB(s);if(u)return this.logCacheAccess(n,!0,"indexedDB"),u}catch(u){console.warn("[Cache] IndexedDB access failed:",u)}const i=this.getFromLocalStorage(s);if(i)return this.logCacheAccess(n,!0,"localStorage"),i;try{const u=await fetch(`/api/posts/${s}`);if(u.ok){const l=await u.json();return this.setCache(s,l),l}}catch(u){console.error("[API] Error fetching post:",u)}return null}const a=await((o=this.dbService)==null?void 0:o.getPost(s));if(a){this.logCacheAccess(n,!0,"database");const i=await this.mapBlockchainPostToUIPost(a);if(i)return this.setCache(s,i),i}return this.isServer?(this.logCacheAccess(n,!1,"blockchain"),this.fetchFromBlockchain(s)):null}async getUserFeed(s,n=50,r=0){if(!s)return[];const a=`user_${s}`,o=this.userPostsCache.get(a);if(o&&!this.isCacheExpired(o)){const i=o.data.slice(r,r+n).map(f=>this.getFromCacheOrDB(f)),l=(await Promise.all(i)).filter(f=>f!==null);if(l.length>0)return l}try{const i=await this.getContract();if(!i)return console.warn("[Blockchain] No contract available for user feed"),[];const[u,l]=await i.getPostsByUser(s,BigInt(r),BigInt(n));if(!Array.isArray(u))return console.warn("[Blockchain] Invalid post IDs from blockchain"),[];const c=(await Promise.all(u.map(async p=>{const h=await i.getPost(Number(p));return h?this.mapBlockchainPostToUIPost(h):null}))).filter(p=>p!==null);if(c.length>0)return this.cacheUserPosts(s,c),console.info("[Blockchain] Retrieved",c.length,"posts for user",s),c}catch(i){console.error("[Blockchain] Error fetching user feed:",i)}return[]}cacheUserPosts(s,n){this.userPostsCache.set(`user_${s}`,{data:n.map(r=>r.id),timestamp:Date.now()}),n.forEach(r=>{this.setCache(r.id,r)})}async getPostsByTribe(s,n=20,r=0){const a=`tribe:${s}`,o=this.tribePostsCache.get(a);if(o&&!this.isCacheExpired(o)){const i=o.data.slice(r,r+n).map(f=>this.getFromCacheOrDB(f)),l=(await Promise.all(i)).filter(f=>f!==null);if(l.length>0)return l}try{const i=await this.getContract();if(!i)return console.warn("[Blockchain] No contract available for tribe posts"),[];const[u,l]=await i.getTribePosts(s,BigInt(r),BigInt(n));if(!Array.isArray(u))return console.warn("[Blockchain] Invalid post IDs from blockchain"),[];const c=(await Promise.all(u.map(async p=>{const h=await i.getPost(Number(p));return h?this.mapBlockchainPostToUIPost(h):null}))).filter(p=>p!==null);if(c.length>0)return this.cacheTribePosts(s,c),console.info("[Blockchain] Retrieved",c.length,"posts for tribe",s),c}catch(i){console.error("[Blockchain] Error fetching tribe posts:",i)}return[]}cacheTribePosts(s,n){this.tribePostsCache.set(`tribe:${s}`,{data:n.map(r=>r.id),timestamp:Date.now()}),n.forEach(r=>{this.setCache(r.id,r)})}async getFromIndexedDB(s){return window.indexedDB?new Promise((n,r)=>{const a=indexedDB.open("tribes_posts_cache",1);a.onerror=()=>r(a.error),a.onsuccess=()=>{const l=a.result.transaction(["posts"],"readonly").objectStore("posts").get(s);l.onsuccess=()=>{const f=l.result;f&&Date.now()-f._timestamp<this.LOCAL_STORAGE_TTL?(delete f._timestamp,n(f)):n(null)},l.onerror=()=>r(l.error)},a.onupgradeneeded=o=>{const i=a.result;i.objectStoreNames.contains("posts")||i.createObjectStore("posts",{keyPath:"id"})}}):null}async saveToIndexedDB(s,n){if(window.indexedDB)return new Promise((r,a)=>{const o=indexedDB.open("tribes_posts_cache",1);o.onerror=()=>a(o.error),o.onsuccess=()=>{const u=o.result.transaction(["posts"],"readwrite"),l=u.objectStore("posts"),f={...n,_timestamp:Date.now()};l.put(f).onsuccess=()=>r(),u.onerror=()=>a(u.error)}})}getCacheMetrics(){return{...this.metrics}}async clearExpiredCache(){const s=Date.now();for(const[n,r]of this.postsCache.entries())this.isCacheExpired(r)&&this.postsCache.delete(n);if(!this.isServer)try{const n=indexedDB.open("tribes_posts_cache",1);n.onsuccess=()=>{const o=n.result.transaction(["posts"],"readwrite").objectStore("posts"),i=IDBKeyRange.upperBound(s-this.LOCAL_STORAGE_TTL);o.index("timestamp").openCursor(i).onsuccess=u=>{const l=u.target.result;l&&(o.delete(l.primaryKey),l.continue())}}}catch(n){console.warn("[Cache] Error clearing IndexedDB:",n)}console.info("[Cache] Cleared expired entries")}async setCache(s,n){const r=`posts:${s}`;if(this.postsCache.set(r,{data:n,timestamp:Date.now()}),!this.isServer){try{await this.saveToIndexedDB(n.id,n)}catch(a){console.warn("[Cache] Failed to save to IndexedDB, falling back to localStorage:",a),this.saveToLocalStorage(n.id,n)}this.queueService&&await this.queueService.addToQueue("CACHE_POST",{postId:n.id,post:n},{priority:3})}}async fetchFromBlockchain(s){var n;try{const r=await this.getContract();if(!r)return console.warn("No blockchain contract available"),null;const a=await r.getPost(parseInt(s));if(a){const o=await this.mapBlockchainPostToUIPost(a);if(o){const i={id:o.id,authorId:o.author,content:o.content,type:o.type.toString(),tribeId:o.tribeId.toString(),metadata:o.metadata?JSON.stringify(o.metadata):{},blockchainId:parseInt(o.id),isConfirmed:!0};return await((n=this.dbService)==null?void 0:n.createOrUpdatePost(i)),this.setCache(s,o),this.isServer||this.saveToLocalStorage(s,o),o}}}catch(r){console.error("Error fetching post from blockchain:",r)}return null}getFromLocalStorage(s){try{const n=`post_${s}`,r=localStorage.getItem(n);if(r){const a=JSON.parse(r),o=a._timestamp||0;if(Date.now()-o<this.LOCAL_STORAGE_TTL){delete a._timestamp;const i=a;return this.setCache(s,i),Date.now()-o>this.CACHE_TTL/2&&this.queuePostRefresh(s),i}}}catch(n){console.warn("Error reading post from localStorage:",n)}return null}saveToLocalStorage(s,n){try{const r={...n,_timestamp:Date.now()};localStorage.setItem(`post_${s}`,JSON.stringify(r))}catch(r){console.warn("Error saving post to localStorage:",r)}}queuePostRefresh(s){this.isServer||this.queueService&&this.queueService.addToQueue("REFRESH_POST",{postId:s},{priority:3})}async getPost(s){return this.getFromCacheOrDB(s)}getSyncStatus(){return{isSyncing:this.isSyncing,progress:this.syncProgress,total:this.syncTotal,lastSyncTime:this.lastSyncTime,errorCount:this.syncErrorCount,lastError:this.lastError}}addSyncListener(s){return this.syncCallbacks.add(s),()=>this.syncCallbacks.delete(s)}isSyncingPosts(){return this.isSyncing}notifySyncListeners(){this.syncCallbacks.forEach(s=>s())}async startBackgroundSync(){if(this.isServer)return;const s=async()=>{if(!this.isSyncing)try{this.isSyncing=!0,this.syncProgress=0,this.syncTotal=0,this.lastError=null,this.notifySyncListeners();const n=Array.from(this.tribePostsCache.keys());if(this.syncTotal=n.length,n.length===0)try{const r=Object.keys(localStorage);for(const a of r)if(a.startsWith("tribe_posts_")){const o=a.replace("tribe_posts_","");n.includes(`tribe:${o}`)||n.push(`tribe:${o}`)}this.syncTotal=n.length}catch(r){console.warn("Error reading localStorage for tribe IDs:",r)}for(let r=0;r<n.length;r++){const o=n[r].replace("tribe:","");try{await this.syncTribePosts(o),this.syncProgress=r+1,this.notifySyncListeners()}catch(i){console.error(`Error syncing posts for tribe ${o}:`,i),this.syncErrorCount++,this.lastError=i instanceof Error?i:new Error("Unknown sync error")}}this.lastSyncTime=Date.now(),this.syncErrorCount>0&&this.syncProgress===this.syncTotal&&(this.syncErrorCount=0)}catch(n){console.error("Error in sync process:",n),this.syncErrorCount++,this.lastError=n instanceof Error?n:new Error("Unknown sync error")}finally{this.isSyncing=!1,this.notifySyncListeners()}};setTimeout(async()=>{await s()},5e3),setInterval(s,3e4)}async syncTribePosts(s){try{const n=await this.getContract();if(!n){console.warn("[Blockchain] No contract available for syncing tribe posts");return}const[r,a]=await n.getPostsByTribe(s,BigInt(0),BigInt(this.MAX_POSTS_PER_TRIBE));if(Array.isArray(r)){const i=(await Promise.all(r.map(async u=>{const l=await n.getPost(Number(u));return l?this.mapBlockchainPostToUIPost(l):null}))).filter(u=>u!==null);if(i.length>0){await Promise.all(i.map(async f=>{var c;this.setCache(f.id,f),await((c=this.dbService)==null?void 0:c.createPost({id:f.id,authorId:f.author,content:f.content,type:f.type.toString(),tribeId:f.tribeId.toString(),metadata:f.metadata?JSON.stringify(f.metadata):{},blockchainId:parseInt(f.id),isConfirmed:!0}))}));const u=i.map(f=>f.id),l=`tribe_${s}`;if(this.tribePostsCache.set(l,{data:u,timestamp:Date.now()}),!this.isServer)try{localStorage.setItem(l,JSON.stringify({data:u,timestamp:Date.now()}))}catch(f){console.warn("[Cache] Error saving tribe posts to localStorage:",f)}}}}catch(n){console.error("[Blockchain] Error syncing tribe posts:",n)}}clearPostFromCache(s){const n=`posts:${s}`;if(this.postsCache.delete(n),!this.isServer)try{localStorage.removeItem(`post_${s}`)}catch(r){console.warn("Error removing post from localStorage:",r)}}clearTribeCache(s){const n=`tribe:${s}`;if(this.tribePostsCache.delete(n),!this.isServer)try{localStorage.removeItem(`tribe_posts_${s}`)}catch(r){console.warn("Error removing tribe posts from localStorage:",r)}}invalidateCache(s){var r;this.clearPostFromCache(s);const n=(r=this.postsCache.get(`posts:${s}`))==null?void 0:r.data;n!=null&&n.tribeId&&this.clearTribeCache(n.tribeId.toString()),n!=null&&n.author&&this.clearUserCache(n.author)}clearUserCache(s){if(this.userPostsCache.delete(s),!this.isServer)try{localStorage.removeItem(`user_posts_${s}`)}catch(n){console.warn("[Cache] Error removing user posts from localStorage:",n)}}async getContract(){if(this.contract)return this.contract;try{await q.connect();const s=await q.getChainId();console.info("[Blockchain] Using chain ID:",s);const{postMinter:n}=J(s),r=Oe(s),a={address:n.address,abi:n.abi,callReadFunction:async(o,i=[])=>{try{return await r.readContract({address:n.address,abi:n.abi,functionName:o,args:i})}catch(u){throw console.error(`[Blockchain] Error calling ${o}:`,u),u}},getPostsByUser:async(o,i,u)=>a.callReadFunction("getPostsByUser",[o,i,u]),getPost:async o=>a.callReadFunction("getPost",[o]),getTribePosts:async(o,i,u)=>a.callReadFunction("getTribePosts",[o,i,u]),getUserPosts:async o=>(console.info("[Blockchain] getUserPosts not implemented, using fallback"),[])};return this.contract=a,a}catch(s){return console.error("[Blockchain] Error creating contract:",s),this.createMockContract()}}createMockContract(){return{getPostsByUser:async()=>(console.info("[Mock] Using mock contract getPostsByUser"),[[],0]),getUserPosts:async()=>(console.info("[Mock] Using mock contract getUserPosts"),[]),getPost:async()=>null,getTribePosts:async()=>(console.info("[Mock] Using mock contract getTribePosts"),[[],0])}}loadFromLocalStorage(){try{const s=localStorage.getItem("posts_cache");if(s){const r=JSON.parse(s),a=Date.now();Object.entries(r).forEach(([o,i])=>{i.timestamp&&a-i.timestamp<this.LOCAL_STORAGE_TTL&&this.postsCache.set(o,i)})}const n=localStorage.getItem("tribe_posts_cache");if(n){const r=JSON.parse(n),a=Date.now();Object.entries(r).forEach(([o,i])=>{i.timestamp&&a-i.timestamp<this.LOCAL_STORAGE_TTL&&this.tribePostsCache.set(o,i)})}}catch(s){console.error("[Cache] Error loading from localStorage:",s)}}isCacheExpired(s){return Date.now()-s.timestamp>this.CACHE_TTL}logCacheAccess(s,n,r){this.metrics[n?"hits":"misses"]++,n&&this.metrics.source[r]++;const a=this.cacheStats.get(s)||{lastAccess:0,accessCount:0,dataSource:r};a.lastAccess=Date.now(),a.accessCount++,this.cacheStats.set(s,a),(!n||a.accessCount%10===0)&&console.info(`[Cache ${n?"HIT":"MISS"}] ${s} from ${r} (Access #${a.accessCount})`)}async mapBlockchainPostToUIPost(s){var n,r;if(!s||!Array.isArray(s)&&typeof s!="object")return console.info("[Blockchain] Invalid post data received"),null;try{let a;try{a=typeof s[3]=="string"?JSON.parse(s[3]):s[3],typeof a=="string"&&(a=JSON.parse(a))}catch(f){console.warn("[Blockchain] Using default metadata due to parsing error:",f),a={title:"",content:"",type:"TEXT",tags:[],createdAt:new Date().toISOString()}}const o=this.getPostType(a.type||F.TEXT),i=s[1]||"0x0000000000000000000000000000000000000000",u=Number(s[2]);return!i||u===void 0?(console.warn("[Blockchain] Missing essential post data"),null):{id:((n=s[0])==null?void 0:n.toString())||"0",author:i,content:a.content||"",type:o,createdAt:a.createdAt?new Date(a.createdAt).getTime():Date.now(),tribeId:u,stats:{likeCount:Number(s[6])||0,commentCount:0,shareCount:0,viewCount:0,saveCount:0},metadata:{type:o,content:a.content||"",title:a.title||"",description:a.description||"",tags:a.tags||[],media:((r=a.mediaContent)==null?void 0:r.map(f=>({url:f.url,type:f.type,width:f.width,height:f.height})))||[],createdAt:a.createdAt||new Date().toISOString()}}}catch(a){return console.error("[Blockchain] Error mapping post:",a),null}}getPostType(s){const n=s.toUpperCase();return Object.values(F).includes(n)?n:F.TEXT}async processQueue(){this.queueService&&await this.queueService.processQueue()}async enqueueTask(s){this.queueService&&await this.queueService.addToQueue(s.type,s.data,{priority:s.priority})}};L(Be,"instance");let _e=Be;function Qa(){const t=ce(),{isConnected:s,address:n}=st(),{chainId:r}=Ve(),{getProfileByAddress:a}=us(),{showNotification:o}=Ss(),[i,u]=m.useState(!1),[l,f]=m.useState(!0),[c,p]=m.useState(null),[h,b]=m.useState([]),[w,g]=m.useState(!1),[d,N]=m.useState(null),k=_e.getInstance(),D=async()=>{try{if(!s||!n){console.log("[Profile] Not connected or no address, redirecting to connect"),t("/connect");return}if(!r){console.log("[Profile] No chain ID, showing network error"),o("Please connect to a supported network","error");return}if(f(!0),N(null),console.log(" Fetching profile from blockchain:",{address:n,chainId:r}),!a){console.error("[Profile] Profile service not available"),o("Profile service not available","error"),f(!1);return}const{profile:U,error:E}=await a(n);if((E==null?void 0:E.code)==="WRONG_CHAIN"){console.log("[Profile] Wrong chain detected"),o("Please connect to a supported network","error");return}if(U){console.log("[Profile] Profile found:",U);const C={avatar:"",bio:"",createdAt:Date.now()};let j;try{j=typeof U.metadata=="string"?JSON.parse(U.metadata):U.metadata||C}catch(y){console.warn("[Profile] Failed to parse metadata:",y),j=C}const M={tokenId:BigInt(U.tokenId),username:U.username,metadata:JSON.stringify(j),nftUri:j.avatar||`https://api.dicebear.com/7.x/avataaars/svg?seed=${U.username}`,owner:U.owner.toLowerCase()};console.log("[Profile] Setting profile data:",M),p(M),N(null);return}console.log("[Profile] No profile found, redirecting to setup"),t("/username-setup")}catch(U){console.error("[Profile] Error loading profile:",U),N(U instanceof Error?U.message:"Failed to load profile"),o("Failed to load profile","error")}finally{f(!1)}};m.useEffect(()=>{D()},[s,n,r]);const x=U=>U?`${U.slice(0,6)}...${U.slice(-4)}`:"";if(m.useEffect(()=>{async function U(){if(n){g(!0),N(null);try{console.log("Connecting to blockchain to fetch posts"),await q.connect();const E=r||1264453517;console.log("Using chain ID:",E);const C=Ha(E),j=q.getSigner(),M=new Qe(C.tribes,Ga);console.log("Fetching posts for user",n);const y=await M.getUserPosts(n);if(y&&Array.isArray(y)&&y.length>0){console.log("Found posts:",y);const T=y.map(v=>{try{return k.mapBlockchainPostToUIPost(v)}catch(P){return console.error("Failed to map post:",P),null}}).filter(Boolean);console.log("Processed posts:",T),b(T)}else console.log("No posts found"),b([])}catch(E){console.error("Error fetching user posts:",E),N("Failed to fetch posts")}finally{g(!1)}}}U()},[n,r,k]),l)return e.jsxDEV("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxDEV("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-monad-purple"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:175,columnNumber:9},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:174,columnNumber:7},this);if(!c||!c.owner)return e.jsxDEV("div",{className:"flex flex-col items-center justify-center min-h-screen",children:[e.jsxDEV("p",{className:"text-gray-400 mb-4",children:"No profile found"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:183,columnNumber:9},this),e.jsxDEV("button",{onClick:()=>t("/username-setup"),className:"px-6 py-3 bg-theme-primary text-white rounded-lg font-medium hover:bg-theme-primary/90 transition-colors",children:"Create Profile"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:184,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:182,columnNumber:7},this);const V=c.metadata?JSON.parse(c.metadata):{bio:""};return e.jsxDEV("div",{className:"max-w-6xl mx-auto px-4 pb-20",children:[e.jsxDEV("div",{className:"relative py-6 border-b border-white/10",children:e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 md:gap-8 items-center",children:[e.jsxDEV("div",{className:"flex items-start space-x-4",children:[e.jsxDEV("img",{src:c.nftUri||`https://api.dicebear.com/7.x/avataaars/svg?seed=${c.username}`,alt:"Profile",className:"w-20 h-20 rounded-full border-4 border-[#4ADE80]/20"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:203,columnNumber:13},this),e.jsxDEV("div",{className:"flex flex-col space-y-2",children:[e.jsxDEV("h1",{className:"text-xl font-bold text-white",children:["@",c.username]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:209,columnNumber:15},this),e.jsxDEV("div",{className:"flex items-center space-x-2",children:[e.jsxDEV("p",{className:"text-gray-400 text-sm",children:x(c.owner)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:211,columnNumber:17},this),e.jsxDEV("button",{onClick:()=>{c.owner&&(navigator.clipboard.writeText(c.owner),o("Address copied!","success"))},className:"text-gray-400 hover:text-white transition-colors",children:e.jsxDEV(Jn,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:221,columnNumber:19},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:212,columnNumber:17},this),e.jsxDEV("a",{href:`https://explorer-devnet.monadinfra.com/address/${c.owner}`,target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-white transition-colors",children:e.jsxDEV($e,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:229,columnNumber:19},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:223,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:210,columnNumber:15},this),e.jsxDEV("p",{className:"text-gray-200 text-sm",children:V.bio||"No bio yet"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:232,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:208,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:202,columnNumber:11},this),e.jsxDEV("div",{className:"flex items-center justify-center space-x-6",children:[e.jsxDEV("div",{className:"flex items-center space-x-2",children:[e.jsxDEV(Hn,{className:"w-5 h-5 text-[#4ADE80]"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:239,columnNumber:15},this),e.jsxDEV("span",{className:"text-lg font-bold text-white",children:"0"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:240,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:238,columnNumber:13},this),e.jsxDEV("div",{className:"flex items-center space-x-2",children:[e.jsxDEV(Gn,{className:"w-5 h-5 text-[#4ADE80]"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:243,columnNumber:15},this),e.jsxDEV("span",{className:"text-lg font-bold text-white",children:"0"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:244,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:242,columnNumber:13},this),e.jsxDEV("div",{className:"flex items-center space-x-2",children:[e.jsxDEV(Lt,{className:"w-5 h-5 text-yellow-400"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:247,columnNumber:15},this),e.jsxDEV("span",{className:"text-lg font-bold text-white",children:"0"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:248,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:246,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:237,columnNumber:11},this),e.jsxDEV("div",{className:"flex justify-end",children:e.jsxDEV("button",{onClick:()=>u(!0),className:"flex items-center space-x-2 px-4 py-2 bg-[#4ADE80] text-black rounded-lg hover:bg-[#4ADE80]/90 transition-colors",children:[e.jsxDEV(Yn,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:258,columnNumber:15},this),e.jsxDEV("span",{children:"Edit Profile"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:259,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:254,columnNumber:13},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:253,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:200,columnNumber:9},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:199,columnNumber:7},this),e.jsxDEV("div",{className:"mt-6",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:[e.jsxDEV("h2",{className:"text-lg font-bold text-white",children:"Your Collectibles"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:268,columnNumber:11},this),e.jsxDEV("button",{className:"text-[#4ADE80] hover:text-[#4ADE80]/80 transition-colors text-sm",children:"View All"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:269,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:267,columnNumber:9},this),e.jsxDEV("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-3",children:e.jsxDEV("div",{className:"aspect-square bg-white/5 backdrop-blur-xl rounded-lg border border-white/10 flex items-center justify-center",children:e.jsxDEV("p",{className:"text-gray-400 text-sm",children:"No collectibles"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:276,columnNumber:13},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:275,columnNumber:11},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:273,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:266,columnNumber:7},this),e.jsxDEV("div",{className:"mt-6",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:[e.jsxDEV("h2",{className:"text-lg font-bold text-white",children:"Recent Activity"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:284,columnNumber:11},this),e.jsxDEV("button",{className:"text-[#4ADE80] hover:text-[#4ADE80]/80 transition-colors text-sm",children:"View All"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:285,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:283,columnNumber:9},this),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:e.jsxDEV("div",{className:"bg-white/5 backdrop-blur-xl rounded-lg p-3 border border-white/10",children:e.jsxDEV("p",{className:"text-gray-400 text-sm text-center",children:"No recent activity"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:292,columnNumber:13},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:291,columnNumber:11},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:289,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:282,columnNumber:7},this),e.jsxDEV("div",{className:"mt-8",children:[e.jsxDEV("h2",{className:"text-2xl font-bold mb-4",children:"Your Posts"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:299,columnNumber:9},this),w&&e.jsxDEV("p",{children:"Loading posts..."},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:301,columnNumber:21},this),d&&e.jsxDEV("p",{className:"text-red-500",children:d},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:302,columnNumber:19},this),h.length===0&&!w&&!d&&e.jsxDEV("p",{className:"text-gray-500",children:"No posts found. Create your first post!"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:305,columnNumber:11},this),e.jsxDEV("div",{className:"space-y-4",children:h.map(U=>e.jsxDEV("div",{className:"p-4 bg-gray-800 rounded-lg",children:[e.jsxDEV("p",{className:"text-lg",children:U.content},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:311,columnNumber:15},this),e.jsxDEV("p",{className:"text-sm text-gray-400 mt-2",children:["Posted on ",new Date(U.createdAt).toLocaleDateString()]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:312,columnNumber:15},this)]},U.id,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:310,columnNumber:13},this))},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:308,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:298,columnNumber:7},this),i&&e.jsxDEV("div",{className:"fixed inset-y-0 right-0 w-full max-w-md bg-gray-900 shadow-xl transform transition-transform duration-300 ease-in-out z-50",children:e.jsxDEV("div",{className:"h-full overflow-y-auto p-6",children:[e.jsxDEV("button",{onClick:()=>u(!1),className:"absolute top-4 right-4 text-gray-400 hover:text-white",children:e.jsxDEV("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:329,columnNumber:17},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:328,columnNumber:15},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:324,columnNumber:13},this),e.jsxDEV(ln,{mode:"edit",existingProfile:c,onSuccess:()=>{u(!1),D()},onCancel:()=>u(!1)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:332,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:323,columnNumber:11},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:322,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:197,columnNumber:5},this)}function Za({tribe:t,showJoinButton:s=!0}){const n=ce(),{joinTribe:r,requestToJoinTribe:a}=Vs(),[o,i]=m.useState(!1),[u,l]=m.useState(null),[f,c]=m.useState(""),[p,h]=m.useState(""),[b,w]=m.useState(!1),[g,d]=m.useState(!1);m.useEffect(()=>{if(t){console.log("TribeCardEnhanced processing tribe:",{id:t.id,name:t.name,metadata:typeof t.metadata=="string"?t.metadata.length>100?`${t.metadata.substring(0,100)}...`:t.metadata:"Not a string",memberCount:t.memberCount});try{const v=rt(t);c(v),w(!1);const P=rn(t);h(P),d(!1)}catch(v){console.error("Error loading tribe media:",v)}}},[t]);const N=async v=>{if(v.stopPropagation(),!o){i(!0),l(null);try{if(Js(t)==="public")await r(Number(t.id));else{const I=t.entryFee||BigInt(0);await a(Number(t.id),I)}}catch(P){console.error("Failed to join tribe:",P),l(P instanceof Error?P.message:"Failed to join tribe")}finally{i(!1)}}},D=(()=>{const v=t.memberCount||0,I=v>0?0/v:0;return I>.3?"high":I>.1?"medium":"low"})(),x={low:"text-gray-400",medium:"text-yellow-500",high:"text-green-500"},{isMember:V,isPending:U,isAdmin:E}=Ia(t),C=Js(t),j=nn(t),M=at(t),y=()=>{console.warn(`Avatar load failed for tribe ${t.id}`),w(!0),c("/images/default-avatar.png")},T=()=>{console.warn(`Cover image load failed for tribe ${t.id}`),d(!0),h("/images/default-cover.png")};return e.jsxDEV(es,{className:"overflow-hidden hover:border-theme-primary/30 transition-colors cursor-pointer h-full flex flex-col",onClick:()=>n(`/tribes/${t.id}`),children:[p&&!g&&e.jsxDEV("div",{className:"h-28 relative",children:[e.jsxDEV("img",{src:p,alt:`${t.name} banner`,className:"w-full h-full object-cover",onError:T},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeCardEnhanced.tsx",lineNumber:143,columnNumber:11},this),C==="private"&&e.jsxDEV("div",{className:"absolute top-2 right-2 bg-black/60 text-white px-2 py-1 rounded-full text-xs flex items-center",children:[e.jsxDEV(He,{className:"w-3 h-3 mr-1"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeCardEnhanced.tsx",lineNumber:153,columnNumber:15},this),"Private"]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeCardEnhanced.tsx",lineNumber:152,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeCardEnhanced.tsx",lineNumber:142,columnNumber:9},this),e.jsxDEV(ss,{className:"flex-1 flex flex-col px-4 py-3",children:[e.jsxDEV("div",{className:"flex items-start",children:[e.jsxDEV("div",{className:"relative -mt-6 mr-3",children:[e.jsxDEV("img",{src:f,alt:t.name,className:"w-14 h-14 rounded-xl ring-2 ring-theme-bg shadow-lg bg-theme-bg",onError:y},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeCardEnhanced.tsx",lineNumber:164,columnNumber:13},this),V&&e.jsxDEV("div",{className:"absolute -bottom-1 -right-1 bg-green-500 text-white p-1 rounded-full",children:e.jsxDEV(Xn,{className:"w-3 h-3"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeCardEnhanced.tsx",lineNumber:174,columnNumber:17},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeCardEnhanced.tsx",lineNumber:173,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeCardEnhanced.tsx",lineNumber:163,columnNumber:11},this),e.jsxDEV("div",{className:"flex-1 mt-1",children:[e.jsxDEV("h3",{className:"font-bold text-lg text-white leading-tight flex items-center",children:t.name},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeCardEnhanced.tsx",lineNumber:180,columnNumber:13},this),e.jsxDEV("div",{className:"flex items-center space-x-3 mt-1 text-xs text-gray-400",children:[e.jsxDEV("div",{className:"flex items-center space-x-1",children:[C==="public"?e.jsxDEV(ts,{className:"w-3.5 h-3.5"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeCardEnhanced.tsx",lineNumber:188,columnNumber:19},this):e.jsxDEV(He,{className:"w-3.5 h-3.5"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeCardEnhanced.tsx",lineNumber:190,columnNumber:19},this),e.jsxDEV("span",{children:C==="public"?"Public":"Private"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeCardEnhanced.tsx",lineNumber:192,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeCardEnhanced.tsx",lineNumber:186,columnNumber:15},this),e.jsxDEV("div",{className:"flex items-center space-x-1",children:[e.jsxDEV(Pe,{className:"w-3.5 h-3.5"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeCardEnhanced.tsx",lineNumber:195,columnNumber:17},this),e.jsxDEV("span",{children:t.memberCount.toLocaleString()},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeCardEnhanced.tsx",lineNumber:196,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeCardEnhanced.tsx",lineNumber:194,columnNumber:15},this),e.jsxDEV("div",{className:"flex items-center space-x-1",children:[e.jsxDEV(Qn,{className:"w-3.5 h-3.5"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeCardEnhanced.tsx",lineNumber:199,columnNumber:17},this),e.jsxDEV("span",{children:"0"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeCardEnhanced.tsx",lineNumber:200,columnNumber:17},this)," "]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeCardEnhanced.tsx",lineNumber:198,columnNumber:15},this),e.jsxDEV("div",{className:`flex items-center space-x-1 ${x[D]}`,children:[e.jsxDEV(Zn,{className:"w-3.5 h-3.5"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeCardEnhanced.tsx",lineNumber:203,columnNumber:17},this),e.jsxDEV("span",{className:"capitalize",children:D},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeCardEnhanced.tsx",lineNumber:204,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeCardEnhanced.tsx",lineNumber:202,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeCardEnhanced.tsx",lineNumber:185,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeCardEnhanced.tsx",lineNumber:179,columnNumber:11},this),s&&!V&&!U&&!E&&e.jsxDEV("button",{onClick:N,disabled:o,className:`
                flex items-center rounded-lg px-3 py-1.5 text-sm font-medium 
                ${o?"bg-gray-700 text-gray-400":"bg-theme-primary text-black hover:bg-theme-primary/90"}
                transition-colors
              `,children:o?e.jsxDEV("span",{children:"Joining..."},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeCardEnhanced.tsx",lineNumber:221,columnNumber:17},this):e.jsxDEV(e.Fragment,{children:[e.jsxDEV(Ee,{className:"w-4 h-4 mr-1"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeCardEnhanced.tsx",lineNumber:224,columnNumber:19},this),e.jsxDEV("span",{children:"Join"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeCardEnhanced.tsx",lineNumber:225,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeCardEnhanced.tsx",lineNumber:223,columnNumber:17},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeCardEnhanced.tsx",lineNumber:211,columnNumber:13},this),U&&e.jsxDEV(xs,{variant:"outline",className:"border-yellow-500 text-yellow-500 ml-auto",children:"Pending"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeCardEnhanced.tsx",lineNumber:233,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeCardEnhanced.tsx",lineNumber:162,columnNumber:9},this),e.jsxDEV("p",{className:"mt-3 text-gray-300 line-clamp-2 text-sm",children:j},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeCardEnhanced.tsx",lineNumber:239,columnNumber:9},this),e.jsxDEV("div",{className:"mt-4 flex flex-wrap gap-2",children:M.length>0?e.jsxDEV(e.Fragment,{children:[M.slice(0,3).map(v=>e.jsxDEV(xs,{variant:"secondary",className:"bg-gray-800/80 text-gray-300 text-xs",children:v.name},v.id,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeCardEnhanced.tsx",lineNumber:245,columnNumber:17},this)),M.length>3&&e.jsxDEV(xs,{variant:"secondary",className:"bg-gray-800/80 text-gray-300 text-xs",children:["+",M.length-3," more"]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeCardEnhanced.tsx",lineNumber:254,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeCardEnhanced.tsx",lineNumber:243,columnNumber:13},this):e.jsxDEV(xs,{variant:"secondary",className:"bg-gray-800/80 text-gray-300 text-xs",children:"No topics"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeCardEnhanced.tsx",lineNumber:263,columnNumber:13},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeCardEnhanced.tsx",lineNumber:241,columnNumber:9},this),u&&e.jsxDEV("div",{className:"mt-3 text-red-500 text-xs",children:u},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeCardEnhanced.tsx",lineNumber:274,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeCardEnhanced.tsx",lineNumber:160,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeCardEnhanced.tsx",lineNumber:136,columnNumber:5},this)}function ei(t){return{id:t.id,name:t.name,metadata:t.metadata,owner:t.owner,admins:t.admins,memberCount:t.memberCount,createdAt:t.createdAt,joinType:t.joinType,entryFee:t.entryFee.toString(),nftRequirements:t.nftRequirements,privacy:"public",onlineCount:0,postCount:0,description:"",topics:[],userMembershipStatus:{isMember:!1,isPending:!1,isAdmin:!1}}}function si(){const{tribes:t,isLoading:s,error:n,refreshTribes:r}=nt();if(m.useEffect(()=>{console.log("TribeList - Tribes data:",{tribes:t,loading:s,error:n,tribesLength:t==null?void 0:t.length,tribesEmpty:!(t!=null&&t.length)}),!(t!=null&&t.length)&&!s&&!n&&(console.log("TribeList - No tribes found, triggering refresh"),r().catch(o=>{console.error("Failed to refresh tribes:",o)}))},[t,s,n,r]),s)return e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[...Array(6)].map((o,i)=>e.jsxDEV("div",{className:"animate-pulse bg-gray-800/30 rounded-xl h-48"},i,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeList.tsx",lineNumber:85,columnNumber:11},this))},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeList.tsx",lineNumber:83,columnNumber:7},this);if(n)return console.error("TribeList - Error loading tribes:",n),e.jsxDEV("div",{className:"text-center text-gray-400 py-8",children:["Failed to load tribes. Please try again later.",e.jsxDEV("pre",{className:"mt-2 text-xs text-left bg-gray-800/30 p-2 rounded overflow-auto",children:typeof n=="string"?n:JSON.stringify(n,null,2)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeList.tsx",lineNumber:96,columnNumber:9},this),e.jsxDEV("button",{className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded",onClick:()=>r(),children:"Retry"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeList.tsx",lineNumber:99,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeList.tsx",lineNumber:94,columnNumber:7},this);if(!(t!=null&&t.length))return e.jsxDEV("div",{className:"text-center text-gray-400 py-8",children:["No tribes found on this network.",e.jsxDEV("div",{className:"mt-4",children:e.jsxDEV("button",{className:"px-4 py-2 bg-blue-600 text-white rounded",onClick:()=>r(),children:"Refresh"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeList.tsx",lineNumber:114,columnNumber:11},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeList.tsx",lineNumber:113,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeList.tsx",lineNumber:111,columnNumber:7},this);console.log("TribeList - Rendering tribes:",t.map(o=>({id:o.id,name:o.name})));const a=t.map(ei);return e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:a.map(o=>e.jsxDEV(Za,{tribe:o},o.id,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeList.tsx",lineNumber:133,columnNumber:9},this))},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeList.tsx",lineNumber:131,columnNumber:5},this)}function ti(){const t=ce();Vs();const[s,n]=m.useState(""),[r,a]=m.useState("all"),o=()=>{t("/tribes/create")};return e.jsxDEV("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[e.jsxDEV("div",{className:"relative mb-10 rounded-2xl overflow-hidden",children:[e.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-900/90 to-purple-900/90 z-0"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Tribes.tsx",lineNumber:22,columnNumber:9},this),e.jsxDEV("div",{className:"absolute inset-0 bg-[url('/images/tribes-pattern.svg')] opacity-10 z-0"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Tribes.tsx",lineNumber:23,columnNumber:9},this),e.jsxDEV("div",{className:"relative z-10 px-6 py-12 md:py-16 md:px-10",children:[e.jsxDEV("h1",{className:"text-3xl md:text-4xl font-bold text-white mb-3",children:"Discover Tribes"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Tribes.tsx",lineNumber:26,columnNumber:11},this),e.jsxDEV("p",{className:"text-gray-300 text-lg max-w-2xl mb-6",children:"Join communities of like-minded individuals, share ideas, and collaborate on projects that matter to you."},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Tribes.tsx",lineNumber:27,columnNumber:11},this),e.jsxDEV("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxDEV("div",{className:"relative flex-1 max-w-xl",children:[e.jsxDEV("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsxDEV(er,{className:"h-5 w-5 text-gray-400"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Tribes.tsx",lineNumber:34,columnNumber:17},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Tribes.tsx",lineNumber:33,columnNumber:15},this),e.jsxDEV("input",{type:"text",placeholder:"Search tribes by name or description...",className:"block w-full pl-10 pr-3 py-2.5 bg-gray-900/50 border border-gray-700/50 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:s,onChange:i=>n(i.target.value)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Tribes.tsx",lineNumber:36,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Tribes.tsx",lineNumber:32,columnNumber:13},this),e.jsxDEV("button",{onClick:o,className:"flex items-center justify-center space-x-2 px-5 py-2.5 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors",children:[e.jsxDEV(Ee,{className:"w-5 h-5"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Tribes.tsx",lineNumber:49,columnNumber:15},this),e.jsxDEV("span",{children:"Create Tribe"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Tribes.tsx",lineNumber:50,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Tribes.tsx",lineNumber:45,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Tribes.tsx",lineNumber:31,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Tribes.tsx",lineNumber:25,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Tribes.tsx",lineNumber:21,columnNumber:7},this),e.jsxDEV("div",{className:"flex items-center justify-between mb-8",children:[e.jsxDEV("div",{className:"flex items-center space-x-2 overflow-x-auto scrollbar-hide",children:[e.jsxDEV("button",{onClick:()=>a("all"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${r==="all"?"bg-blue-600 text-white":"bg-gray-800/30 text-gray-300 hover:bg-gray-800/50"}`,children:"All Tribes"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Tribes.tsx",lineNumber:59,columnNumber:11},this),e.jsxDEV("button",{onClick:()=>a("popular"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors flex items-center space-x-2 ${r==="popular"?"bg-blue-600 text-white":"bg-gray-800/30 text-gray-300 hover:bg-gray-800/50"}`,children:[e.jsxDEV(sr,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Tribes.tsx",lineNumber:77,columnNumber:13},this),e.jsxDEV("span",{children:"Popular"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Tribes.tsx",lineNumber:78,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Tribes.tsx",lineNumber:69,columnNumber:11},this),e.jsxDEV("button",{onClick:()=>a("new"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${r==="new"?"bg-blue-600 text-white":"bg-gray-800/30 text-gray-300 hover:bg-gray-800/50"}`,children:"Newest"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Tribes.tsx",lineNumber:80,columnNumber:11},this),e.jsxDEV("button",{onClick:()=>a("joined"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors flex items-center space-x-2 ${r==="joined"?"bg-blue-600 text-white":"bg-gray-800/30 text-gray-300 hover:bg-gray-800/50"}`,children:[e.jsxDEV(Pe,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Tribes.tsx",lineNumber:98,columnNumber:13},this),e.jsxDEV("span",{children:"Joined"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Tribes.tsx",lineNumber:99,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Tribes.tsx",lineNumber:90,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Tribes.tsx",lineNumber:58,columnNumber:9},this),e.jsxDEV("button",{className:"p-2 bg-gray-800/30 border border-gray-700/50 rounded-lg text-gray-400 hover:text-white hover:bg-gray-700/50 transition-colors",children:e.jsxDEV(Bt,{className:"w-5 h-5"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Tribes.tsx",lineNumber:104,columnNumber:11},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Tribes.tsx",lineNumber:103,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Tribes.tsx",lineNumber:57,columnNumber:7},this),e.jsxDEV(si,{},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Tribes.tsx",lineNumber:109,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Tribes.tsx",lineNumber:19,columnNumber:5},this)}function ni({children:t,rightSidebar:s}){return e.jsxDEV("div",{className:"min-h-screen bg-background",children:e.jsxDEV("div",{className:"w-full max-w-[1200px] mx-auto px-4 sm:px-6 py-8",children:e.jsxDEV("div",{className:"flex gap-8",children:[e.jsxDEV("div",{className:"flex-1 min-w-0 max-w-[800px] mx-auto lg:mx-0",children:t},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/layout/FeedLayout.tsx",lineNumber:16,columnNumber:11},this),s&&e.jsxDEV("div",{className:"hidden lg:block w-[380px] flex-shrink-0",children:s},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/layout/FeedLayout.tsx",lineNumber:22,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/layout/FeedLayout.tsx",lineNumber:13,columnNumber:9},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/layout/FeedLayout.tsx",lineNumber:12,columnNumber:7},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/layout/FeedLayout.tsx",lineNumber:11,columnNumber:5},this)}function ri({members:t=[],topics:s=[],onTopicSelect:n,selectedTopicId:r}){const a=Array.isArray(t)?t:[],o=Array.isArray(s)?s:[];return e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV(es,{children:e.jsxDEV(ss,{className:"p-4",children:[e.jsxDEV("h3",{className:"text-lg font-medium mb-4 flex items-center gap-2",children:[e.jsxDEV(tr,{className:"w-4 h-4 text-green-500"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/sidebars/TribeSidebar.tsx",lineNumber:29,columnNumber:13},this),"Top Members"]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/sidebars/TribeSidebar.tsx",lineNumber:28,columnNumber:11},this),e.jsxDEV("div",{className:"space-y-2",children:a.slice(0,5).map(i=>e.jsxDEV($t,{to:`/profile/${i.username}`,className:"flex items-center space-x-3 group p-2 hover:bg-green-100/20 rounded-lg transition-colors",children:[e.jsxDEV("div",{className:"relative flex-shrink-0",children:[e.jsxDEV("img",{src:i.avatar,alt:i.username,className:"w-10 h-10 rounded-full object-cover"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/sidebars/TribeSidebar.tsx",lineNumber:40,columnNumber:19},this),i.role==="admin"&&e.jsxDEV(nr,{className:"w-3.5 h-3.5 text-green-500 absolute -right-0.5 -bottom-0.5 bg-black rounded-full p-0.5"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/sidebars/TribeSidebar.tsx",lineNumber:46,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/sidebars/TribeSidebar.tsx",lineNumber:39,columnNumber:17},this),e.jsxDEV("div",{className:"flex-grow min-w-0 pr-1",children:[e.jsxDEV("p",{className:"font-medium text-sm group-hover:text-green-500 truncate max-w-full",children:["@",i.username]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/sidebars/TribeSidebar.tsx",lineNumber:50,columnNumber:19},this),i.role&&e.jsxDEV("p",{className:"text-xs text-gray-400 truncate max-w-full",children:i.role==="admin"?"Admin":i.role},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/sidebars/TribeSidebar.tsx",lineNumber:54,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/sidebars/TribeSidebar.tsx",lineNumber:49,columnNumber:17},this)]},i.id,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/sidebars/TribeSidebar.tsx",lineNumber:34,columnNumber:15},this))},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/sidebars/TribeSidebar.tsx",lineNumber:32,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/sidebars/TribeSidebar.tsx",lineNumber:27,columnNumber:9},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/sidebars/TribeSidebar.tsx",lineNumber:26,columnNumber:7},this),e.jsxDEV(es,{children:e.jsxDEV(ss,{className:"p-4",children:[e.jsxDEV("h3",{className:"text-lg font-medium mb-4 flex items-center gap-2",children:[e.jsxDEV(Ts,{className:"w-4 h-4 text-green-500"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/sidebars/TribeSidebar.tsx",lineNumber:69,columnNumber:13},this),"Topics"]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/sidebars/TribeSidebar.tsx",lineNumber:68,columnNumber:11},this),e.jsxDEV("div",{className:"space-y-2",children:o.map(i=>e.jsxDEV("button",{onClick:()=>n==null?void 0:n(i),className:`w-full flex items-center space-x-2 px-3 py-2 rounded-lg transition-colors ${r===i.id?"bg-green-500 text-white":"hover:bg-green-100/20 text-gray-400 hover:text-white"}`,children:[e.jsxDEV(Ts,{className:"w-4 h-4 flex-shrink-0"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/sidebars/TribeSidebar.tsx",lineNumber:83,columnNumber:17},this),e.jsxDEV("span",{className:"text-sm truncate text-left",children:i.name},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/sidebars/TribeSidebar.tsx",lineNumber:84,columnNumber:17},this),i.postCount&&e.jsxDEV("span",{className:`text-xs ml-auto flex-shrink-0 px-1.5 py-0.5 rounded-full ${r===i.id?"bg-green-600 text-white":"bg-green-200/10 text-gray-400"}`,children:i.postCount},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/sidebars/TribeSidebar.tsx",lineNumber:86,columnNumber:19},this)]},i.id,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/sidebars/TribeSidebar.tsx",lineNumber:74,columnNumber:15},this))},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/sidebars/TribeSidebar.tsx",lineNumber:72,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/sidebars/TribeSidebar.tsx",lineNumber:67,columnNumber:9},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/sidebars/TribeSidebar.tsx",lineNumber:66,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/sidebars/TribeSidebar.tsx",lineNumber:24,columnNumber:5},this)}function ai({isOpen:t,onClose:s,tribeId:n}){return e.jsxDEV(sn,{mode:"dialog",isOpen:t,onClose:s,tribeId:n||""},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/CreatePost.tsx",lineNumber:16,columnNumber:5},this)}function ii(){const{address:t}=Qs();Ve();const[s,n]=m.useState({}),[r,a]=m.useState(!1),[o,i]=m.useState(null),u=m.useRef(null);m.useEffect(()=>{u.current=_e.getInstance(),console.log("PostsService initialized:",u.current)},[]);const l=()=>(u.current||(u.current=_e.getInstance()),u.current),f=m.useCallback(async h=>{try{a(!0);const b=l();console.log(`Fetching post with ID: ${h}`);const w=await b.getPost(h);return w?(console.log("Post retrieved:",w),n(g=>({...g,[w.id]:w}))):console.log("No post found with ID:",h),w}catch(b){console.error("Error fetching post:",b);const w=b instanceof Error?b:new Error("Failed to fetch post");return i(w),null}finally{a(!1)}},[]),c=m.useCallback(async h=>{try{a(!0);const b=l();console.log(`Fetching posts for tribe: ${h}`);const w=await b.getPostsByTribe(h);console.log(`Retrieved ${w.length} posts for tribe ${h}:`,w);const g=w.reduce((d,N)=>(d[N.id]=N,d),{});return n(d=>({...d,...g})),w}catch(b){console.error("Error fetching tribe posts:",b);const w=b instanceof Error?b:new Error("Failed to fetch tribe posts");return i(w),[]}finally{a(!1)}},[]),p=m.useCallback(async()=>{if(!t)return console.error("Cannot fetch feed: Wallet not connected"),i(new Error("Wallet not connected")),[];try{a(!0);const h=l();console.log(`Fetching feed for address: ${t}`);const b=await h.getUserFeed(t);console.log(`Retrieved ${b.length} posts for feed:`,b);const w=b.reduce((g,d)=>(g[d.id]=d,g),{});return n(g=>({...g,...w})),b}catch(h){console.error("Error fetching feed:",h);const b=h instanceof Error?h:new Error("Failed to fetch feed");return i(b),[]}finally{a(!1)}},[t]);return{posts:s,loading:r,error:o,fetchPost:f,fetchPostsByTribe:c,fetchFeed:p}}function oi(t){return t?`https://api.dicebear.com/7.x/identicon/svg?seed=${t.startsWith("0x")?t.substring(2,10):t.substring(0,8)}&backgroundColor=transparent`:(console.warn("No address provided for avatar generation, using default"),"https://api.dicebear.com/7.x/identicon/svg?seed=default&backgroundColor=transparent")}const We=({address:t,className:s=""})=>{const n=Y.useMemo(()=>oi(t),[t]);return e.jsxDEV("div",{className:`relative overflow-hidden rounded-full bg-neutral-200 dark:bg-neutral-800 ${s}`,title:t||"Unknown User",children:[e.jsxDEV("img",{src:n,alt:`Avatar for ${t||"Unknown User"}`,className:"w-full h-full object-cover",loading:"lazy"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/user/UserAvatar.tsx",lineNumber:19,columnNumber:7},void 0),e.jsxDEV("div",{className:"absolute inset-0 ring-1 ring-inset ring-black/10 dark:ring-white/10 rounded-full"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/user/UserAvatar.tsx",lineNumber:25,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/user/UserAvatar.tsx",lineNumber:15,columnNumber:5},void 0)},Q={text:{border:"border-neutral-800 hover:border-neutral-700",accent:"bg-neutral-800/30 text-neutral-200"},image:{border:"border-blue-900 hover:border-blue-800",accent:"bg-blue-900/30 text-blue-200"},video:{border:"border-purple-900 hover:border-purple-800",accent:"bg-purple-900/30 text-purple-200"},link:{border:"border-green-900 hover:border-green-800",accent:"bg-green-900/30 text-green-200"},event:{border:"border-yellow-900 hover:border-yellow-800",accent:"bg-yellow-900/30 text-yellow-200"},poll:{border:"border-orange-900 hover:border-orange-800",accent:"bg-orange-900/30 text-orange-200"},bounty:{border:"border-emerald-900 hover:border-emerald-800",accent:"bg-emerald-900/30 text-emerald-200"},project:{border:"border-indigo-900 hover:border-indigo-800",accent:"bg-indigo-900/30 text-indigo-200"}},ds=Ne("relative w-full rounded-xl border p-5 shadow-md transition-all hover:shadow-lg bg-neutral-900 text-white backdrop-blur-sm",{variants:{type:{text:Q.text.border,image:Q.image.border,video:Q.video.border,link:Q.link.border,event:Q.event.border,poll:Q.poll.border,bounty:Q.bounty.border,project:Q.project.border}},defaultVariants:{type:"text"}}),li=Ne("absolute top-4 right-4 inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium",{variants:{type:{text:Q.text.accent,image:Q.image.accent,video:Q.video.accent,link:Q.link.accent,event:Q.event.accent,poll:Q.poll.accent,bounty:Q.bounty.accent,project:Q.project.accent}},defaultVariants:{type:"text"}}),Gs=Ne("flex items-center justify-center w-10 h-10 rounded-full",{variants:{type:{text:Q.text.accent,image:Q.image.accent,video:Q.video.accent,link:Q.link.accent,event:Q.event.accent,poll:Q.poll.accent,bounty:Q.bounty.accent,project:Q.project.accent}},defaultVariants:{type:"text"}}),Ue=Ne("inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium transition-colors",{variants:{variant:{default:"bg-neutral-800 text-neutral-200 hover:bg-neutral-700",blue:"bg-blue-900/50 text-blue-200 hover:bg-blue-800/50",purple:"bg-purple-900/50 text-purple-200 hover:bg-purple-800/50",green:"bg-green-900/50 text-green-200 hover:bg-green-800/50",yellow:"bg-yellow-900/50 text-yellow-200 hover:bg-yellow-800/50",orange:"bg-orange-900/50 text-orange-200 hover:bg-orange-800/50",red:"bg-red-900/50 text-red-200 hover:bg-red-800/50",indigo:"bg-indigo-900/50 text-indigo-200 hover:bg-indigo-800/50",emerald:"bg-emerald-900/50 text-emerald-200 hover:bg-emerald-800/50"}},defaultVariants:{variant:"default"}}),ee=Ne("inline-flex items-center justify-center rounded-md p-2 text-sm font-medium transition-colors",{variants:{variant:{default:"text-neutral-400 hover:bg-neutral-800 hover:text-white",primary:"text-primary hover:bg-primary/20",destructive:"text-red-400 hover:bg-red-900/20 hover:text-red-200",success:"text-green-400 hover:bg-green-900/20 hover:text-green-200"},active:{true:"",false:""}},compoundVariants:[{variant:"default",active:!0,className:"text-white bg-neutral-800"},{variant:"primary",active:!0,className:"text-white bg-primary/20"},{variant:"destructive",active:!0,className:"text-red-200 bg-red-900/20"},{variant:"success",active:!0,className:"text-green-200 bg-green-900/20"}],defaultVariants:{variant:"default",active:!1}}),cs="mt-4 text-neutral-100 whitespace-pre-wrap break-words leading-relaxed text-base",ot="mt-4 overflow-hidden rounded-lg border border-neutral-800 shadow-sm",ms="flex items-center gap-3",fs="font-semibold text-white hover:text-accent transition-colors",ps="text-sm text-neutral-400",un="border-t border-neutral-800 my-4",Fe=Ne("inline-flex items-center justify-center rounded-lg px-4 py-2 font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-neutral-900",{variants:{variant:{primary:"bg-accent text-black hover:bg-accent/90 focus:ring-accent/50",secondary:"bg-neutral-800 text-white hover:bg-neutral-700 focus:ring-neutral-400/30",outline:"border border-neutral-700 text-white hover:bg-neutral-800 focus:ring-neutral-400/30",destructive:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-400/30",ghost:"text-white hover:bg-neutral-800 focus:ring-neutral-400/30"},size:{sm:"text-xs px-2.5 py-1.5",md:"text-sm px-4 py-2",lg:"text-base px-5 py-2.5"},fullWidth:{true:"w-full"}},defaultVariants:{variant:"primary",size:"md"}}),kt=({post:t,onLike:s,onComment:n,onShare:r,onReport:a,onClick:o,showActions:i=!0})=>{var c,p,h,b;const u=()=>{o&&o(t.id)},l=Y.useMemo(()=>{try{return ze(new Date(t.createdAt),{addSuffix:!0})}catch(w){return console.error("Error formatting date:",w),"some time ago"}},[t.createdAt]),f=w=>{const g=["blue","purple","green","yellow","orange"],d=w.split("").reduce((N,k)=>N+k.charCodeAt(0),0);return g[d%g.length]};return e.jsxDEV("article",{className:ds({type:"text"}),onClick:u,role:"button",tabIndex:0,children:[e.jsxDEV("div",{className:ms,children:[e.jsxDEV(We,{address:t.author,className:"h-10 w-10"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/TextPost.tsx",lineNumber:67,columnNumber:9},void 0),e.jsxDEV("div",{className:"flex flex-col",children:[e.jsxDEV("a",{href:`/profile/${t.author}`,className:fs,onClick:w=>w.stopPropagation(),children:t.author},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/TextPost.tsx",lineNumber:72,columnNumber:11},void 0),e.jsxDEV("time",{className:ps,children:l},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/TextPost.tsx",lineNumber:79,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/TextPost.tsx",lineNumber:71,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/TextPost.tsx",lineNumber:66,columnNumber:7},void 0),e.jsxDEV("div",{className:cs,children:t.content},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/TextPost.tsx",lineNumber:86,columnNumber:7},void 0),((c=t.metadata)==null?void 0:c.tags)&&t.metadata.tags.length>0&&e.jsxDEV("div",{className:"mt-3 flex flex-wrap gap-2",children:t.metadata.tags.map((w,g)=>e.jsxDEV("span",{className:Ue({variant:f(w)}),children:w},g,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/TextPost.tsx",lineNumber:94,columnNumber:13},void 0))},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/TextPost.tsx",lineNumber:92,columnNumber:9},void 0),i&&e.jsxDEV("div",{className:"mt-4 flex items-center justify-between border-t border-neutral-700 pt-3",children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("button",{className:ee({variant:"default"}),onClick:w=>{w.stopPropagation(),s==null||s()},children:[e.jsxDEV(rs,{className:"mr-1 h-4 w-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/TextPost.tsx",lineNumber:115,columnNumber:15},void 0),e.jsxDEV("span",{children:((p=t.stats)==null?void 0:p.likeCount)||0},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/TextPost.tsx",lineNumber:116,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/TextPost.tsx",lineNumber:108,columnNumber:13},void 0),e.jsxDEV("button",{className:ee({variant:"default"}),onClick:w=>{w.stopPropagation(),n==null||n()},children:[e.jsxDEV(as,{className:"mr-1 h-4 w-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/TextPost.tsx",lineNumber:125,columnNumber:15},void 0),e.jsxDEV("span",{children:((h=t.stats)==null?void 0:h.commentCount)||0},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/TextPost.tsx",lineNumber:126,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/TextPost.tsx",lineNumber:118,columnNumber:13},void 0),e.jsxDEV("button",{className:ee({variant:"default"}),onClick:w=>{w.stopPropagation(),r==null||r()},children:[e.jsxDEV(is,{className:"mr-1 h-4 w-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/TextPost.tsx",lineNumber:135,columnNumber:15},void 0),e.jsxDEV("span",{children:((b=t.stats)==null?void 0:b.shareCount)||0},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/TextPost.tsx",lineNumber:136,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/TextPost.tsx",lineNumber:128,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/TextPost.tsx",lineNumber:107,columnNumber:11},void 0),e.jsxDEV("button",{className:ee({variant:"destructive"}),onClick:w=>{w.stopPropagation(),a==null||a()},children:e.jsxDEV(os,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/TextPost.tsx",lineNumber:146,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/TextPost.tsx",lineNumber:139,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/TextPost.tsx",lineNumber:106,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/TextPost.tsx",lineNumber:59,columnNumber:5},void 0)},ui=({post:t,onLike:s,onComment:n,onShare:r,onReport:a,onClick:o,showActions:i=!0})=>{var w,g,d,N,k,D,x,V,U;const[u,l]=Y.useState(!1),f=()=>{o&&o(t.id)},c=E=>{E.stopPropagation(),l(!u)},p=Y.useMemo(()=>{try{return ze(new Date(t.createdAt),{addSuffix:!0})}catch(E){return console.error("Error formatting date:",E),"some time ago"}},[t.createdAt]),h=(g=(w=t.metadata)==null?void 0:w.media)==null?void 0:g[0],b=E=>{const C=["blue","purple","green","yellow","orange"],j=E.split("").reduce((M,y)=>M+y.charCodeAt(0),0);return C[j%C.length]};return e.jsxDEV("article",{className:ds({type:"image"}),onClick:f,role:"button",tabIndex:0,children:[e.jsxDEV("div",{className:ms,children:[e.jsxDEV(We,{address:t.author,className:"h-10 w-10"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ImagePost.tsx",lineNumber:78,columnNumber:9},void 0),e.jsxDEV("div",{className:"flex flex-col",children:[e.jsxDEV("a",{href:`/profile/${t.author}`,className:fs,onClick:E=>E.stopPropagation(),children:t.author},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ImagePost.tsx",lineNumber:83,columnNumber:11},void 0),e.jsxDEV("time",{className:ps,children:p},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ImagePost.tsx",lineNumber:90,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ImagePost.tsx",lineNumber:82,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ImagePost.tsx",lineNumber:77,columnNumber:7},void 0),((d=t.metadata)==null?void 0:d.title)&&e.jsxDEV("h3",{className:"text-lg font-semibold mt-3 text-white",children:t.metadata.title},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ImagePost.tsx",lineNumber:98,columnNumber:9},void 0),t.content&&e.jsxDEV("div",{className:cs,children:t.content},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ImagePost.tsx",lineNumber:105,columnNumber:9},void 0),h&&e.jsxDEV("div",{className:`${ot} relative group cursor-pointer`,onClick:c,children:[e.jsxDEV("div",{className:"relative aspect-video w-full overflow-hidden",children:e.jsxDEV("img",{src:h.url,alt:((N=t.metadata)==null?void 0:N.title)||"Post image",className:"w-full h-full object-cover transition-transform duration-200 group-hover:scale-105",loading:"lazy"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ImagePost.tsx",lineNumber:117,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ImagePost.tsx",lineNumber:116,columnNumber:11},void 0),e.jsxDEV("button",{className:"absolute top-2 right-2 p-1 rounded-full bg-black/50 text-white opacity-0 group-hover:opacity-100 transition-opacity",onClick:E=>{E.stopPropagation(),l(!0)},children:e.jsxDEV(ct,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ImagePost.tsx",lineNumber:131,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ImagePost.tsx",lineNumber:124,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ImagePost.tsx",lineNumber:112,columnNumber:9},void 0),((k=t.metadata)==null?void 0:k.tags)&&t.metadata.tags.length>0&&e.jsxDEV("div",{className:"mt-3 flex flex-wrap gap-2",children:t.metadata.tags.map((E,C)=>e.jsxDEV("span",{className:Ue({variant:b(E)}),children:E},C,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ImagePost.tsx",lineNumber:140,columnNumber:13},void 0))},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ImagePost.tsx",lineNumber:138,columnNumber:9},void 0),i&&e.jsxDEV("div",{className:"mt-4 flex items-center justify-between border-t border-neutral-700 pt-3",children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("button",{className:ee({variant:"default"}),onClick:E=>{E.stopPropagation(),s==null||s()},children:[e.jsxDEV(rs,{className:"mr-1 h-4 w-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ImagePost.tsx",lineNumber:161,columnNumber:15},void 0),e.jsxDEV("span",{children:((D=t.stats)==null?void 0:D.likeCount)||0},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ImagePost.tsx",lineNumber:162,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ImagePost.tsx",lineNumber:154,columnNumber:13},void 0),e.jsxDEV("button",{className:ee({variant:"default"}),onClick:E=>{E.stopPropagation(),n==null||n()},children:[e.jsxDEV(as,{className:"mr-1 h-4 w-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ImagePost.tsx",lineNumber:171,columnNumber:15},void 0),e.jsxDEV("span",{children:((x=t.stats)==null?void 0:x.commentCount)||0},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ImagePost.tsx",lineNumber:172,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ImagePost.tsx",lineNumber:164,columnNumber:13},void 0),e.jsxDEV("button",{className:ee({variant:"default"}),onClick:E=>{E.stopPropagation(),r==null||r()},children:[e.jsxDEV(is,{className:"mr-1 h-4 w-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ImagePost.tsx",lineNumber:181,columnNumber:15},void 0),e.jsxDEV("span",{children:((V=t.stats)==null?void 0:V.shareCount)||0},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ImagePost.tsx",lineNumber:182,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ImagePost.tsx",lineNumber:174,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ImagePost.tsx",lineNumber:153,columnNumber:11},void 0),e.jsxDEV("button",{className:ee({variant:"destructive"}),onClick:E=>{E.stopPropagation(),a==null||a()},children:e.jsxDEV(os,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ImagePost.tsx",lineNumber:192,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ImagePost.tsx",lineNumber:185,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ImagePost.tsx",lineNumber:152,columnNumber:9},void 0),u&&h&&e.jsxDEV("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80",onClick:()=>l(!1),children:e.jsxDEV("div",{className:"relative max-h-[90vh] max-w-[90vw]",children:[e.jsxDEV("img",{src:h.url,alt:((U=t.metadata)==null?void 0:U.title)||"Post image",className:"max-h-[90vh] max-w-[90vw] object-contain",loading:"lazy"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ImagePost.tsx",lineNumber:204,columnNumber:13},void 0),e.jsxDEV("button",{className:"absolute top-4 right-4 p-2 rounded-full bg-black/50 text-white",onClick:()=>l(!1),children:e.jsxDEV(ct,{className:"h-6 w-6"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ImagePost.tsx",lineNumber:214,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ImagePost.tsx",lineNumber:210,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ImagePost.tsx",lineNumber:203,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ImagePost.tsx",lineNumber:199,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ImagePost.tsx",lineNumber:70,columnNumber:5},void 0)},di=({post:t,onLike:s,onComment:n,onShare:r,onReport:a,onClick:o,showActions:i=!0})=>{var k,D,x,V,U,E;const u=Y.useRef(null),[l,f]=Y.useState(!1),[c,p]=Y.useState(!0),h=()=>{o&&o(t.id)},b=C=>{C.stopPropagation(),u.current&&(l?u.current.pause():u.current.play(),f(!l))},w=C=>{C.stopPropagation(),u.current&&(u.current.muted=!c,p(!c))},g=Y.useMemo(()=>{try{return ze(new Date(t.createdAt),{addSuffix:!0})}catch(C){return console.error("Error formatting date:",C),"some time ago"}},[t.createdAt]),d=(D=(k=t.metadata)==null?void 0:k.media)==null?void 0:D.find(C=>C.type==="video"),N=C=>{const j=["blue","purple","green","yellow","orange"],M=C.split("").reduce((y,T)=>y+T.charCodeAt(0),0);return j[M%j.length]};return e.jsxDEV("article",{className:ds({type:"video"}),onClick:h,role:"button",tabIndex:0,children:[e.jsxDEV("div",{className:ms,children:[e.jsxDEV(We,{address:t.author,className:"h-10 w-10"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/VideoPost.tsx",lineNumber:95,columnNumber:9},void 0),e.jsxDEV("div",{className:"flex flex-col",children:[e.jsxDEV("a",{href:`/profile/${t.author}`,className:fs,onClick:C=>C.stopPropagation(),children:t.author},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/VideoPost.tsx",lineNumber:100,columnNumber:11},void 0),e.jsxDEV("time",{className:ps,children:g},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/VideoPost.tsx",lineNumber:107,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/VideoPost.tsx",lineNumber:99,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/VideoPost.tsx",lineNumber:94,columnNumber:7},void 0),t.content&&e.jsxDEV("div",{className:cs,children:t.content},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/VideoPost.tsx",lineNumber:115,columnNumber:9},void 0),d&&e.jsxDEV("div",{className:`${ot} relative group`,children:[e.jsxDEV("video",{ref:u,src:d.url,className:"w-full aspect-video object-cover",loop:!0,muted:c,playsInline:!0,onClick:C=>C.stopPropagation()},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/VideoPost.tsx",lineNumber:123,columnNumber:11},void 0),e.jsxDEV("div",{className:"absolute inset-0 bg-black/20 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:e.jsxDEV("div",{className:"flex items-center gap-4",children:[e.jsxDEV("button",{className:"p-2 rounded-full bg-black/50 text-white hover:bg-black/70 transition-colors",onClick:b,children:l?e.jsxDEV(rr,{className:"h-6 w-6"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/VideoPost.tsx",lineNumber:139,columnNumber:19},void 0):e.jsxDEV(ar,{className:"h-6 w-6"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/VideoPost.tsx",lineNumber:141,columnNumber:19},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/VideoPost.tsx",lineNumber:134,columnNumber:15},void 0),e.jsxDEV("button",{className:"p-2 rounded-full bg-black/50 text-white hover:bg-black/70 transition-colors",onClick:w,children:c?e.jsxDEV(ir,{className:"h-6 w-6"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/VideoPost.tsx",lineNumber:149,columnNumber:19},void 0):e.jsxDEV(or,{className:"h-6 w-6"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/VideoPost.tsx",lineNumber:151,columnNumber:19},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/VideoPost.tsx",lineNumber:144,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/VideoPost.tsx",lineNumber:133,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/VideoPost.tsx",lineNumber:132,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/VideoPost.tsx",lineNumber:122,columnNumber:9},void 0),((x=t.metadata)==null?void 0:x.tags)&&t.metadata.tags.length>0&&e.jsxDEV("div",{className:"mt-3 flex flex-wrap gap-2",children:t.metadata.tags.map((C,j)=>e.jsxDEV("span",{className:Ue({variant:N(C)}),children:C},j,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/VideoPost.tsx",lineNumber:163,columnNumber:13},void 0))},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/VideoPost.tsx",lineNumber:161,columnNumber:9},void 0),i&&e.jsxDEV("div",{className:"mt-4 flex items-center justify-between border-t border-neutral-200 pt-3",children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("button",{className:ee({variant:"default"}),onClick:C=>{C.stopPropagation(),s==null||s()},children:[e.jsxDEV(rs,{className:"mr-1 h-4 w-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/VideoPost.tsx",lineNumber:184,columnNumber:15},void 0),e.jsxDEV("span",{children:((V=t.stats)==null?void 0:V.likeCount)||0},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/VideoPost.tsx",lineNumber:185,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/VideoPost.tsx",lineNumber:177,columnNumber:13},void 0),e.jsxDEV("button",{className:ee({variant:"default"}),onClick:C=>{C.stopPropagation(),n==null||n()},children:[e.jsxDEV(as,{className:"mr-1 h-4 w-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/VideoPost.tsx",lineNumber:194,columnNumber:15},void 0),e.jsxDEV("span",{children:((U=t.stats)==null?void 0:U.commentCount)||0},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/VideoPost.tsx",lineNumber:195,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/VideoPost.tsx",lineNumber:187,columnNumber:13},void 0),e.jsxDEV("button",{className:ee({variant:"default"}),onClick:C=>{C.stopPropagation(),r==null||r()},children:[e.jsxDEV(is,{className:"mr-1 h-4 w-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/VideoPost.tsx",lineNumber:204,columnNumber:15},void 0),e.jsxDEV("span",{children:((E=t.stats)==null?void 0:E.shareCount)||0},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/VideoPost.tsx",lineNumber:205,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/VideoPost.tsx",lineNumber:197,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/VideoPost.tsx",lineNumber:176,columnNumber:11},void 0),e.jsxDEV("button",{className:ee({variant:"destructive"}),onClick:C=>{C.stopPropagation(),a==null||a()},children:e.jsxDEV(os,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/VideoPost.tsx",lineNumber:215,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/VideoPost.tsx",lineNumber:208,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/VideoPost.tsx",lineNumber:175,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/VideoPost.tsx",lineNumber:87,columnNumber:5},void 0)},ci=({post:t,onLike:s,onComment:n,onShare:r,onReport:a,onClick:o,showActions:i=!0})=>{var p,h,b,w,g;const u=()=>{o&&o(t.id)},l=d=>{var N;d.stopPropagation(),(N=t.metadata)!=null&&N.link&&window.open(t.metadata.link,"_blank","noopener,noreferrer")},f=Y.useMemo(()=>{try{return ze(new Date(t.createdAt),{addSuffix:!0})}catch(d){return console.error("Error formatting date:",d),"some time ago"}},[t.createdAt]),c=d=>{const N=["blue","purple","green","yellow","orange"],k=d.split("").reduce((D,x)=>D+x.charCodeAt(0),0);return N[k%N.length]};return e.jsxDEV("article",{className:ds({type:"link"}),onClick:u,role:"button",tabIndex:0,children:[e.jsxDEV("div",{className:ms,children:[e.jsxDEV(We,{address:t.author,className:"h-10 w-10"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/LinkPost.tsx",lineNumber:75,columnNumber:9},void 0),e.jsxDEV("div",{className:"flex flex-col",children:[e.jsxDEV("a",{href:`/profile/${t.author}`,className:fs,onClick:d=>d.stopPropagation(),children:t.author},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/LinkPost.tsx",lineNumber:80,columnNumber:11},void 0),e.jsxDEV("time",{className:ps,children:f},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/LinkPost.tsx",lineNumber:87,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/LinkPost.tsx",lineNumber:79,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/LinkPost.tsx",lineNumber:74,columnNumber:7},void 0),t.content&&e.jsxDEV("div",{className:cs,children:t.content},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/LinkPost.tsx",lineNumber:95,columnNumber:9},void 0),((p=t.metadata)==null?void 0:p.link)&&e.jsxDEV("div",{className:`${ot} group cursor-pointer hover:border-neutral-300 transition-colors`,onClick:l,children:e.jsxDEV("div",{className:"p-4",children:[t.metadata.title&&e.jsxDEV("h3",{className:"text-lg font-semibold mb-2 group-hover:text-primary transition-colors",children:t.metadata.title},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/LinkPost.tsx",lineNumber:108,columnNumber:15},void 0),t.metadata.description&&e.jsxDEV("p",{className:"text-neutral-600 line-clamp-2",children:t.metadata.description},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/LinkPost.tsx",lineNumber:113,columnNumber:15},void 0),e.jsxDEV("div",{className:"mt-2 flex items-center text-neutral-500 text-sm",children:[e.jsxDEV($e,{className:"h-4 w-4 mr-1"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/LinkPost.tsx",lineNumber:118,columnNumber:15},void 0),e.jsxDEV("span",{className:"truncate",children:t.metadata.link},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/LinkPost.tsx",lineNumber:119,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/LinkPost.tsx",lineNumber:117,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/LinkPost.tsx",lineNumber:106,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/LinkPost.tsx",lineNumber:102,columnNumber:9},void 0),((h=t.metadata)==null?void 0:h.tags)&&t.metadata.tags.length>0&&e.jsxDEV("div",{className:"mt-3 flex flex-wrap gap-2",children:t.metadata.tags.map((d,N)=>e.jsxDEV("span",{className:Ue({variant:c(d)}),children:d},N,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/LinkPost.tsx",lineNumber:131,columnNumber:13},void 0))},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/LinkPost.tsx",lineNumber:129,columnNumber:9},void 0),i&&e.jsxDEV("div",{className:"mt-4 flex items-center justify-between border-t border-neutral-200 pt-3",children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("button",{className:ee({variant:"default"}),onClick:d=>{d.stopPropagation(),s==null||s()},children:[e.jsxDEV(rs,{className:"mr-1 h-4 w-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/LinkPost.tsx",lineNumber:152,columnNumber:15},void 0),e.jsxDEV("span",{children:((b=t.stats)==null?void 0:b.likeCount)||0},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/LinkPost.tsx",lineNumber:153,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/LinkPost.tsx",lineNumber:145,columnNumber:13},void 0),e.jsxDEV("button",{className:ee({variant:"default"}),onClick:d=>{d.stopPropagation(),n==null||n()},children:[e.jsxDEV(as,{className:"mr-1 h-4 w-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/LinkPost.tsx",lineNumber:162,columnNumber:15},void 0),e.jsxDEV("span",{children:((w=t.stats)==null?void 0:w.commentCount)||0},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/LinkPost.tsx",lineNumber:163,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/LinkPost.tsx",lineNumber:155,columnNumber:13},void 0),e.jsxDEV("button",{className:ee({variant:"default"}),onClick:d=>{d.stopPropagation(),r==null||r()},children:[e.jsxDEV(is,{className:"mr-1 h-4 w-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/LinkPost.tsx",lineNumber:172,columnNumber:15},void 0),e.jsxDEV("span",{children:((g=t.stats)==null?void 0:g.shareCount)||0},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/LinkPost.tsx",lineNumber:173,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/LinkPost.tsx",lineNumber:165,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/LinkPost.tsx",lineNumber:144,columnNumber:11},void 0),e.jsxDEV("button",{className:ee({variant:"destructive"}),onClick:d=>{d.stopPropagation(),a==null||a()},children:e.jsxDEV(os,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/LinkPost.tsx",lineNumber:183,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/LinkPost.tsx",lineNumber:176,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/LinkPost.tsx",lineNumber:143,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/LinkPost.tsx",lineNumber:67,columnNumber:5},void 0)},mi=t=>{var a,o,i;const s=(a=t.metadata)==null?void 0:a.eventDetails,n=(o=t.metadata)==null?void 0:o.event;return{...{title:((i=t.metadata)==null?void 0:i.title)||"",startDate:new Date().toISOString(),organizer:t.author,maxTickets:0,currentAttendees:0,speakers:[],agenda:[]},...n||{},...s||{}}},fi=t=>{var s,n,r;return t.type===4||((s=t.type)==null?void 0:s.toString().toLowerCase())==="event"||!!((n=t.metadata)!=null&&n.eventDetails)||!!((r=t.metadata)!=null&&r.event)};class Ct{static async getUserTickets(s,n){return console.log(`Getting tickets for event ${s} and user ${n}`),localStorage.getItem(`event-${s}-user-${n}-tickets`)?parseInt(localStorage.getItem(`event-${s}-user-${n}-tickets`)||"0"):0}static async purchaseTickets(s,n){console.log(`Purchasing ${n} tickets for event ${s}`),await new Promise(o=>setTimeout(o,1500));const r=localStorage.getItem("connectedWallet");if(!r)throw new Error("No wallet connected");const a=localStorage.getItem(`event-${s}-user-${r}-tickets`)?parseInt(localStorage.getItem(`event-${s}-user-${r}-tickets`)||"0"):0;return localStorage.setItem(`event-${s}-user-${r}-tickets`,(a+n).toString()),`0x${Math.random().toString(16).substring(2)}`}static async createEvent(s){console.log("Creating event:",s),await new Promise(r=>setTimeout(r,2e3));const n=Math.floor(Math.random()*1e3)+1;return{hash:`0x${Math.random().toString(16).substring(2)}`,eventId:n}}static async getEvent(s){return console.log(`Getting event ${s}`),{title:`Event #${s}`,startDate:new Date().toISOString(),endDate:new Date(Date.now()+864e5).toISOString(),location:"Mock Location",eventId:s,isOnChain:!0,organizer:"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266",maxTickets:100,ticketsSold:45,price:"0.05",active:!0,priceInWei:"50000000000000000"}}static async cancelEvent(s){return console.log(`Cancelling event ${s}`),await new Promise(n=>setTimeout(n,1e3)),`0x${Math.random().toString(16).substring(2)}`}}const dn=({post:t,postType:s,typeIcon:n,typeName:r,onLike:a,onComment:o,onShare:i,onReport:u,onClick:l,showActions:f=!0,className:c="",children:p})=>{var N,k,D;const[h,b]=m.useState(!1),w=x=>{x.stopPropagation(),b(!h),a==null||a()},g=()=>{l&&l(t.id)},d=Y.useMemo(()=>{try{return ze(new Date(t.createdAt),{addSuffix:!0})}catch(x){return console.error("Error formatting date:",x),"some time ago"}},[t.createdAt]);return e.jsxDEV("article",{className:`${ds({type:s})} ${c}`,onClick:g,role:"button",tabIndex:0,children:[n&&r&&e.jsxDEV("div",{className:li({type:s}),children:[n,e.jsxDEV("span",{children:r},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/BasePost.tsx",lineNumber:80,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/BasePost.tsx",lineNumber:78,columnNumber:9},void 0),e.jsxDEV("div",{className:ms,children:[e.jsxDEV(We,{address:t.author,className:"h-10 w-10"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/BasePost.tsx",lineNumber:86,columnNumber:9},void 0),e.jsxDEV("div",{className:"flex flex-col",children:[e.jsxDEV("a",{href:`/profile/${t.author}`,className:fs,onClick:x=>x.stopPropagation(),children:t.author},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/BasePost.tsx",lineNumber:91,columnNumber:11},void 0),e.jsxDEV("time",{className:ps,children:d},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/BasePost.tsx",lineNumber:98,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/BasePost.tsx",lineNumber:90,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/BasePost.tsx",lineNumber:85,columnNumber:7},void 0),t.content&&e.jsxDEV("div",{className:cs,children:t.content},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/BasePost.tsx",lineNumber:106,columnNumber:9},void 0),p,f&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:un},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/BasePost.tsx",lineNumber:117,columnNumber:11},void 0),e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("button",{className:ee({variant:"default",active:h}),onClick:w,children:[e.jsxDEV(rs,{className:"mr-1 h-4 w-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/BasePost.tsx",lineNumber:124,columnNumber:17},void 0),e.jsxDEV("span",{children:((N=t.stats)==null?void 0:N.likeCount)||0},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/BasePost.tsx",lineNumber:125,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/BasePost.tsx",lineNumber:120,columnNumber:15},void 0),e.jsxDEV("button",{className:ee({variant:"default"}),onClick:x=>{x.stopPropagation(),o==null||o()},children:[e.jsxDEV(as,{className:"mr-1 h-4 w-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/BasePost.tsx",lineNumber:134,columnNumber:17},void 0),e.jsxDEV("span",{children:((k=t.stats)==null?void 0:k.commentCount)||0},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/BasePost.tsx",lineNumber:135,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/BasePost.tsx",lineNumber:127,columnNumber:15},void 0),e.jsxDEV("button",{className:ee({variant:"default"}),onClick:x=>{x.stopPropagation(),i==null||i()},children:[e.jsxDEV(is,{className:"mr-1 h-4 w-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/BasePost.tsx",lineNumber:144,columnNumber:17},void 0),e.jsxDEV("span",{children:((D=t.stats)==null?void 0:D.shareCount)||0},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/BasePost.tsx",lineNumber:145,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/BasePost.tsx",lineNumber:137,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/BasePost.tsx",lineNumber:119,columnNumber:13},void 0),e.jsxDEV("button",{className:ee({variant:"destructive"}),onClick:x=>{x.stopPropagation(),u==null||u()},children:e.jsxDEV(os,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/BasePost.tsx",lineNumber:155,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/BasePost.tsx",lineNumber:148,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/BasePost.tsx",lineNumber:118,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/BasePost.tsx",lineNumber:116,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/BasePost.tsx",lineNumber:70,columnNumber:5},void 0)},pi=t=>{var E,C,j,M,y,T;const{post:s}=t,[n,r]=m.useState(!1),[a,o]=m.useState(!1),[i,u]=m.useState(0),[l,f]=m.useState(null),[c,p]=m.useState(1),[h,b]=m.useState(!1),[w,g]=m.useState(""),d=Y.useMemo(()=>mi(s),[s]),N=Y.useMemo(()=>{try{if(!d.startDate)return{display:"Date not specified",status:"unknown"};const v=new Date(d.startDate),P=d.endDate?new Date(d.endDate):null,I=we(v,"PPP"),O=P?we(P,"PPP"):null,B=we(v,"p"),_=P?we(P,"p"):null,S=I===O;let A="upcoming";lr(new Date,v)?A="upcoming":P&&ur(new Date,P)?A="past":A="ongoing";const R=new Date,H=v.getTime()-R.getTime(),X=Math.ceil(H/(1e3*60*60*24));let be="";return X>0?be=`${X} day${X!==1?"s":""} away`:X===0&&(be="Today!"),{startDate:I,startTime:B,endDate:O,endTime:_,isSameDay:S,status:A,daysRemaining:X,daysRemainingText:be,fullStartDate:v,fullEndDate:P}}catch(v){return console.error("Error formatting event dates:",v),{display:"Invalid date format",status:"unknown"}}},[d.startDate,d.endDate]),k=v=>{switch(v){case"upcoming":return{color:"bg-emerald-900/30 text-emerald-300 border-emerald-700/50",text:"Upcoming"};case"ongoing":return{color:"bg-blue-900/30 text-blue-300 border-blue-700/50",text:"Happening now"};case"past":return{color:"bg-neutral-800/50 text-neutral-400 border-neutral-700/50",text:"Past event"};default:return{color:"bg-neutral-800 text-neutral-400 border-neutral-700",text:"Date unknown"}}},D=v=>{const P=["blue","purple","green","yellow","orange","red","indigo","emerald"],I=v.split("").reduce((O,B)=>O+B.charCodeAt(0),0);return P[I%P.length]},x=()=>{var _;if(!N.fullStartDate)return"#";const v=encodeURIComponent(((_=s.metadata)==null?void 0:_.title)||"Event"),P=encodeURIComponent(N.fullStartDate.toISOString()),I=N.fullEndDate?encodeURIComponent(N.fullEndDate.toISOString()):P,O=encodeURIComponent(d.location||""),B=encodeURIComponent(s.content||"");return`https://calendar.google.com/calendar/render?action=TEMPLATE&text=${v}&dates=${P}/${I}&details=${B}&location=${O}`};m.useEffect(()=>{(async()=>{try{const P=localStorage.getItem("connectedWallet")||"0xMockAddress";if(f(P),localStorage.getItem("connectedWallet")||localStorage.setItem("connectedWallet",P),d.isOnChain&&d.eventId)try{const I=await Ct.getUserTickets(d.eventId,P);u(I),r(I>0)}catch(I){console.error("Error checking tickets, using mock data:",I),u(Math.random()>.7?2:0),r(Math.random()>.7)}}catch(P){console.error("Error checking user tickets:",P)}})()},[d.isOnChain,d.eventId]);const V=async v=>{v.stopPropagation(),d.isOnChain&&d.eventId?b(!0):r(!n)},U=async()=>{if(d.eventId){o(!0),g("");try{try{await Ct.purchaseTickets(d.eventId,c)}catch(v){console.error("Service error, using mock fallback:",v),await new Promise(O=>setTimeout(O,1500));const P=localStorage.getItem("connectedWallet")||"0xMockAddress",I=parseInt(localStorage.getItem(`event-${d.eventId}-user-${P}-tickets`)||"0");localStorage.setItem(`event-${d.eventId}-user-${P}-tickets`,(I+c).toString())}u(i+c),r(!0),b(!1)}catch(v){console.error("Error purchasing tickets:",v),g("Failed to purchase tickets. Please try again.")}finally{o(!1)}}};return console.log("EventPost rendering with:",{postType:s.type,metadataKeys:s.metadata?Object.keys(s.metadata):[],hasEventDetails:!!((E=s.metadata)!=null&&E.eventDetails),hasEventLegacy:!!((C=s.metadata)!=null&&C.event),extractedDetails:d,isOnChain:d.isOnChain,eventId:d.eventId}),e.jsxDEV(dn,{...t,postType:"event",typeIcon:e.jsxDEV(ft,{className:"mr-1 h-3 w-3"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:267,columnNumber:17},void 0),typeName:"Event",children:[N.status&&e.jsxDEV("div",{className:`mt-4 flex items-center justify-between rounded-md px-3 py-2 border ${k(N.status).color}`,children:[e.jsxDEV("div",{className:"flex items-center",children:e.jsxDEV("span",{className:"font-medium",children:k(N.status).text},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:274,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:273,columnNumber:11},void 0),N.daysRemainingText&&N.status==="upcoming"&&e.jsxDEV("span",{className:"text-sm",children:N.daysRemainingText},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:277,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:272,columnNumber:9},void 0),((j=s.metadata)==null?void 0:j.title)&&e.jsxDEV("h3",{className:"text-xl font-bold mt-4 text-white",children:s.metadata.title},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:284,columnNumber:9},void 0),d.isOnChain&&e.jsxDEV("div",{className:"mt-2 inline-flex items-center rounded-full bg-indigo-900/30 text-indigo-300 px-2.5 py-0.5 text-xs font-medium",children:[e.jsxDEV(mt,{className:"mr-1 h-3 w-3"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:292,columnNumber:11},void 0),e.jsxDEV("span",{children:"Blockchain Event"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:293,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:291,columnNumber:9},void 0),e.jsxDEV("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxDEV("div",{className:"rounded-lg border border-yellow-900/40 bg-yellow-900/10 p-4",children:e.jsxDEV("div",{className:"flex items-start gap-3",children:[e.jsxDEV("div",{className:Gs({type:"event"}),children:e.jsxDEV(ft,{className:"h-5 w-5 text-yellow-300"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:303,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:302,columnNumber:13},void 0),e.jsxDEV("div",{className:"space-y-1",children:[e.jsxDEV("h4",{className:"font-semibold text-white",children:"Date & Time"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:306,columnNumber:15},void 0),N.status!=="unknown"?e.jsxDEV(e.Fragment,{children:e.jsxDEV("div",{className:"flex items-center mt-2",children:[e.jsxDEV("div",{className:"flex flex-col items-center justify-center bg-neutral-800 border border-neutral-700 rounded-md min-w-[60px] h-[60px] mr-3",children:[e.jsxDEV("span",{className:"text-xs text-neutral-400",children:N.fullStartDate?we(N.fullStartDate,"MMM"):"N/A"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:313,columnNumber:23},void 0),e.jsxDEV("span",{className:"text-xl font-bold",children:N.fullStartDate?we(N.fullStartDate,"d"):"-"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:314,columnNumber:23},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:312,columnNumber:21},void 0),e.jsxDEV("div",{className:"flex flex-col",children:[e.jsxDEV("span",{className:"text-sm text-neutral-300",children:N.startDate||"N/A"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:317,columnNumber:23},void 0),e.jsxDEV("span",{className:"text-xs text-neutral-400",children:["From ",N.startTime||"N/A"]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:318,columnNumber:23},void 0),N.endDate&&!N.isSameDay&&e.jsxDEV("div",{className:"mt-1 text-xs text-neutral-400",children:["To ",N.endDate," at ",N.endTime]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:321,columnNumber:25},void 0),N.isSameDay&&N.endTime&&e.jsxDEV("div",{className:"text-xs text-neutral-400",children:["Until ",N.endTime]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:327,columnNumber:25},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:316,columnNumber:21},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:311,columnNumber:19},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:309,columnNumber:17},void 0):e.jsxDEV("span",{className:"text-sm text-neutral-400",children:"Date and time not specified"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:335,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:305,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:301,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:300,columnNumber:9},void 0),e.jsxDEV("div",{className:"rounded-lg border border-yellow-900/40 bg-yellow-900/10 p-4",children:e.jsxDEV("div",{className:"flex items-start gap-3",children:[e.jsxDEV("div",{className:Gs({type:"event"}),children:e.jsxDEV(dr,{className:"h-5 w-5 text-yellow-300"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:345,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:344,columnNumber:13},void 0),e.jsxDEV("div",{className:"space-y-1",children:[e.jsxDEV("h4",{className:"font-semibold text-white",children:"Location"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:348,columnNumber:15},void 0),d.location?e.jsxDEV("div",{className:"mt-2",children:[e.jsxDEV("p",{className:"text-sm text-neutral-300",children:d.location},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:352,columnNumber:19},void 0),e.jsxDEV("div",{className:"mt-2 h-[60px] w-full rounded-md bg-neutral-800 border border-neutral-700 flex items-center justify-center",children:e.jsxDEV("span",{className:"text-xs text-neutral-400",children:"Map view"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:356,columnNumber:21},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:355,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:351,columnNumber:17},void 0):e.jsxDEV("div",{className:"mt-2 text-sm text-neutral-400",children:d.virtualLink?"Online event":"Location not specified"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:360,columnNumber:17},void 0),d.virtualLink&&e.jsxDEV("a",{href:d.virtualLink,className:"mt-2 inline-flex items-center gap-1.5 text-sm text-blue-400 hover:text-blue-300 transition-colors",target:"_blank",rel:"noopener noreferrer",onClick:v=>v.stopPropagation(),children:[e.jsxDEV(cr,{className:"h-3.5 w-3.5"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:373,columnNumber:19},void 0),e.jsxDEV("span",{children:"Join virtually"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:374,columnNumber:19},void 0),e.jsxDEV($e,{className:"h-3 w-3"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:375,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:366,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:347,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:343,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:342,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:298,columnNumber:7},void 0),e.jsxDEV("div",{className:"mt-4 space-y-4",children:[e.jsxDEV("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxDEV("div",{className:"flex items-center gap-2 text-sm",children:[e.jsxDEV(pt,{className:"h-4 w-4 text-yellow-400"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:389,columnNumber:13},void 0),e.jsxDEV("span",{className:"text-neutral-400",children:"Organizer:"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:390,columnNumber:13},void 0),e.jsxDEV("span",{className:"text-white",children:d.organizer||s.author||"N/A"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:391,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:388,columnNumber:11},void 0),e.jsxDEV("div",{className:"flex items-center gap-2 text-sm",children:[e.jsxDEV(mr,{className:"h-4 w-4 text-yellow-400"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:396,columnNumber:13},void 0),e.jsxDEV("span",{className:"text-neutral-400",children:"Category:"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:397,columnNumber:13},void 0),d.category?e.jsxDEV("span",{className:Ue({variant:D(d.category)}),children:d.category},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:399,columnNumber:15},void 0):(M=s.metadata)!=null&&M.tags&&s.metadata.tags.length>0?e.jsxDEV("span",{className:Ue({variant:D(s.metadata.tags[0])}),children:s.metadata.tags[0]},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:403,columnNumber:15},void 0):e.jsxDEV("span",{className:"text-neutral-400",children:"N/A"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:407,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:395,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:386,columnNumber:9},void 0),e.jsxDEV("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxDEV("div",{className:"flex items-center gap-2 text-sm",children:[e.jsxDEV(fr,{className:"h-4 w-4 text-yellow-400"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:416,columnNumber:13},void 0),e.jsxDEV("span",{className:"text-neutral-400",children:"Cost:"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:417,columnNumber:13},void 0),d.isOnChain?e.jsxDEV("span",{className:"text-white",children:[d.price||"0"," ETH per ticket"]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:419,columnNumber:15},void 0):e.jsxDEV("span",{className:"text-white",children:d.cost||"Free / Not specified"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:421,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:415,columnNumber:11},void 0),e.jsxDEV("div",{className:"flex items-center gap-2 text-sm",children:[e.jsxDEV(pr,{className:"h-4 w-4 text-yellow-400"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:427,columnNumber:13},void 0),e.jsxDEV("span",{className:"text-neutral-400",children:"Accessibility:"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:428,columnNumber:13},void 0),e.jsxDEV("span",{className:"text-white",children:d.accessibility||"Not specified"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:429,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:426,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:413,columnNumber:9},void 0),e.jsxDEV("div",{className:"bg-neutral-800/60 rounded-lg p-4 border border-neutral-700/50",children:[e.jsxDEV("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxDEV("div",{className:"flex items-start gap-2",children:[e.jsxDEV(Pe,{className:"h-5 w-5 text-yellow-400 mt-0.5"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:437,columnNumber:15},void 0),e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"text-sm font-medium text-white",children:d.isOnChain?"Tickets":"Attendees"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:439,columnNumber:17},void 0),e.jsxDEV("div",{className:"text-xs text-neutral-400",children:d.isOnChain?e.jsxDEV(e.Fragment,{children:[e.jsxDEV("span",{className:"text-white text-sm",children:d.ticketsSold||0},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:445,columnNumber:23},void 0)," of ",e.jsxDEV("span",{className:"text-white text-sm",children:d.maxTickets},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:445,columnNumber:102},void 0)," tickets sold",i>0&&e.jsxDEV("div",{className:"mt-1 text-emerald-400",children:["You own ",i," ticket",i!==1?"s":""]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:447,columnNumber:25},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:444,columnNumber:21},void 0):d.currentAttendees!==void 0?e.jsxDEV(e.Fragment,{children:[e.jsxDEV("span",{className:"text-white text-sm",children:d.currentAttendees},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:453,columnNumber:25},void 0),d.maxAttendees?e.jsxDEV(e.Fragment,{children:[" of ",e.jsxDEV("span",{className:"text-white text-sm",children:d.maxAttendees},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:455,columnNumber:33},void 0)," spots filled"]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:455,columnNumber:27},void 0):e.jsxDEV(e.Fragment,{children:" attending"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:457,columnNumber:27},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:452,columnNumber:23},void 0):"Attendance not tracked"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:442,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:438,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:436,columnNumber:13},void 0),d.isOnChain?e.jsxDEV("div",{className:"w-full md:w-1/2 h-2 bg-neutral-700 rounded-full overflow-hidden",children:e.jsxDEV("div",{className:"h-full bg-yellow-500",style:{width:`${Math.min(100,(d.ticketsSold||0)/d.maxTickets*100)}%`}},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:471,columnNumber:17},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:470,columnNumber:15},void 0):d.maxAttendees&&d.currentAttendees!==void 0&&e.jsxDEV("div",{className:"w-full md:w-1/2 h-2 bg-neutral-700 rounded-full overflow-hidden",children:e.jsxDEV("div",{className:"h-full bg-yellow-500",style:{width:`${Math.min(100,d.currentAttendees/d.maxAttendees*100)}%`}},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:481,columnNumber:19},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:480,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:435,columnNumber:11},void 0),N.status!=="past"&&e.jsxDEV("div",{className:"mt-3 flex justify-end",children:d.isOnChain?e.jsxDEV("button",{className:Fe({variant:i>0?"outline":"primary",size:"sm"}),onClick:V,disabled:d.isOnChain&&!d.active,children:i>0?e.jsxDEV(e.Fragment,{children:["View My Ticket",i!==1?"s":""]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:505,columnNumber:21},void 0):e.jsxDEV(e.Fragment,{children:[e.jsxDEV(mt,{className:"mr-1 h-3.5 w-3.5"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:508,columnNumber:23},void 0),"Purchase Tickets"]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:507,columnNumber:21},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:496,columnNumber:17},void 0):e.jsxDEV("button",{className:Fe({variant:n?"outline":"primary",size:"sm"}),onClick:V,children:n?e.jsxDEV(e.Fragment,{children:"I'm attending"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:522,columnNumber:21},void 0):e.jsxDEV(e.Fragment,{children:[e.jsxDEV(Ee,{className:"mr-1 h-3.5 w-3.5"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:525,columnNumber:23},void 0),"Attend"]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:524,columnNumber:21},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:514,columnNumber:17},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:494,columnNumber:13},void 0),d.isOnChain&&!d.active&&e.jsxDEV("div",{className:"mt-3 flex items-center gap-2 text-red-400 text-sm",children:[e.jsxDEV(Ot,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:537,columnNumber:15},void 0),e.jsxDEV("span",{children:"This event has been cancelled by the organizer"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:538,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:536,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:434,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:384,columnNumber:7},void 0),s.content&&e.jsxDEV("div",{className:"mt-4",children:[e.jsxDEV("h4",{className:"text-sm font-medium text-white mb-2",children:"Description"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:547,columnNumber:11},void 0),e.jsxDEV("div",{className:"text-neutral-300 text-sm leading-relaxed whitespace-pre-wrap",children:s.content},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:548,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:546,columnNumber:9},void 0),d.speakers&&d.speakers.length>0&&e.jsxDEV("div",{className:"mt-4",children:[e.jsxDEV("h4",{className:"text-sm font-medium text-white mb-2",children:"Featured Speakers"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:557,columnNumber:11},void 0),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:d.speakers.map((v,P)=>e.jsxDEV("div",{className:"flex items-center gap-2 bg-neutral-800/50 rounded-md p-2",children:[e.jsxDEV("div",{className:"w-8 h-8 rounded-full bg-neutral-700 flex items-center justify-center",children:v.avatar?e.jsxDEV("img",{src:v.avatar,alt:v.name,className:"w-8 h-8 rounded-full"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:563,columnNumber:21},void 0):e.jsxDEV(pt,{className:"w-4 h-4 text-neutral-400"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:565,columnNumber:21},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:561,columnNumber:17},void 0),e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"text-sm font-medium text-white",children:v.name},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:569,columnNumber:19},void 0),v.role&&e.jsxDEV("div",{className:"text-xs text-neutral-400",children:v.role},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:570,columnNumber:36},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:568,columnNumber:17},void 0)]},P,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:560,columnNumber:15},void 0))},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:558,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:556,columnNumber:9},void 0),d.agenda&&d.agenda.length>0&&e.jsxDEV("div",{className:"mt-4",children:[e.jsxDEV("h4",{className:"text-sm font-medium text-white mb-2",children:"Event Agenda"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:581,columnNumber:11},void 0),e.jsxDEV("div",{className:"space-y-2",children:d.agenda.map((v,P)=>e.jsxDEV("div",{className:"bg-neutral-800/50 rounded-md p-3 border-l-2 border-yellow-500",children:[e.jsxDEV("div",{className:"flex justify-between",children:[e.jsxDEV("span",{className:"text-sm font-medium text-white",children:v.title},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:586,columnNumber:19},void 0),v.time&&e.jsxDEV("span",{className:"text-xs text-neutral-400",children:v.time},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:587,columnNumber:33},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:585,columnNumber:17},void 0),v.description&&e.jsxDEV("p",{className:"text-xs text-neutral-300 mt-1",children:v.description},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:590,columnNumber:19},void 0)]},P,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:584,columnNumber:15},void 0))},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:582,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:580,columnNumber:9},void 0),((y=s.metadata)==null?void 0:y.tags)&&s.metadata.tags.length>0&&e.jsxDEV("div",{className:"mt-4 flex flex-wrap gap-2",children:s.metadata.tags.map((v,P)=>e.jsxDEV("span",{className:Ue({variant:D(v)}),children:v},P,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:602,columnNumber:13},void 0))},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:600,columnNumber:9},void 0),e.jsxDEV("div",{className:un},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:613,columnNumber:7},void 0),e.jsxDEV("div",{className:"flex items-center justify-between",children:e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("a",{href:x(),className:Fe({variant:"outline",size:"sm"}),target:"_blank",rel:"noopener noreferrer",onClick:v=>v.stopPropagation(),children:[e.jsxDEV(br,{className:"mr-1.5 h-3.5 w-3.5"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:623,columnNumber:13},void 0),"Add to Calendar"]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:616,columnNumber:11},void 0),e.jsxDEV("button",{className:Fe({variant:"outline",size:"sm"}),onClick:v=>{var P,I;v.stopPropagation(),navigator.share?navigator.share({title:((P=s.metadata)==null?void 0:P.title)||"Event",text:s.content||"Check out this event",url:window.location.href}).catch(console.error):(I=t.onShare)==null||I.call(t)},children:[e.jsxDEV(hr,{className:"mr-1.5 h-3.5 w-3.5"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:643,columnNumber:13},void 0),"Share Event"]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:627,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:615,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:614,columnNumber:7},void 0),h&&d.isOnChain&&e.jsxDEV("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:()=>b(!1),children:e.jsxDEV("div",{className:"bg-neutral-900 rounded-lg p-6 max-w-md w-full mx-4",onClick:v=>v.stopPropagation(),children:[e.jsxDEV("h3",{className:"text-xl font-bold text-white mb-4",children:"Purchase Tickets"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:653,columnNumber:13},void 0),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-neutral-300 mb-1",children:"Event"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:657,columnNumber:17},void 0),e.jsxDEV("div",{className:"text-white",children:(T=s.metadata)==null?void 0:T.title},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:658,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:656,columnNumber:15},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-neutral-300 mb-1",children:"Price per Ticket"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:662,columnNumber:17},void 0),e.jsxDEV("div",{className:"text-white",children:[d.price||"0"," ETH"]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:663,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:661,columnNumber:15},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{htmlFor:"quantity",className:"block text-sm font-medium text-neutral-300 mb-1",children:"Quantity"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:667,columnNumber:17},void 0),e.jsxDEV("input",{id:"quantity",type:"number",min:"1",max:d.maxTickets-(d.ticketsSold||0),value:c,onChange:v=>p(Math.max(1,parseInt(v.target.value)||1)),className:"w-full rounded-md border border-neutral-700 bg-neutral-800 p-2 text-white"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:668,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:666,columnNumber:15},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-neutral-300 mb-1",children:"Total Price"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:680,columnNumber:17},void 0),e.jsxDEV("div",{className:"text-white font-bold",children:[d.price?(parseFloat(d.price)*c).toFixed(4):"0"," ETH"]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:681,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:679,columnNumber:15},void 0),w&&e.jsxDEV("div",{className:"bg-red-900/20 border border-red-900 text-red-300 p-3 rounded-md text-sm",children:w},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:687,columnNumber:17},void 0),e.jsxDEV("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsxDEV("button",{className:Fe({variant:"outline"}),onClick:()=>b(!1),disabled:a,children:"Cancel"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:693,columnNumber:17},void 0),e.jsxDEV("button",{className:Fe({variant:"primary"}),onClick:U,disabled:a||!d.active,children:a?"Processing...":"Purchase Tickets"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:701,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:692,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:655,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:652,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:651,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:264,columnNumber:5},void 0)},bi=({post:t,onLike:s,onComment:n,onShare:r,onReport:a,onClick:o,showActions:i=!0})=>{var B,_,S;const[u,l]=m.useState(!1),[f,c]=m.useState(!1),[p,h]=m.useState(null),[b,w]=m.useState(!1),g=(()=>{try{const A=t.createdAt;if(!A)return"Unknown time";const R=new Date(A);return isNaN(R.getTime())?"Invalid date":ze(R,{addSuffix:!0})}catch(A){return console.error("Error formatting date:",A,t),"Unknown time"}})(),d=((B=t.metadata)==null?void 0:B.poll)||{},N=d.question||t.content||"Poll",k=d.options||[],D=d.endDate?new Date(d.endDate):null,x=D?new Date>D:!1,V=k.reduce((A,R)=>A+(R.votes||0),0),U=(()=>{if(!D||x)return null;const A=new Date,R=D.getTime()-A.getTime(),H=Math.floor(R/(1e3*60*60*24)),X=Math.floor(R%(1e3*60*60*24)/(1e3*60*60));return H>0?`${H} day${H!==1?"s":""} left`:X>0?`${X} hour${X!==1?"s":""} left`:"Ending soon"})(),E=A=>{b||(h(A),w(!0))},C=A=>{A.stopPropagation(),l(!u),s&&s()},j=A=>{A.stopPropagation(),n&&n()},M=A=>{A.stopPropagation(),r&&r()},y=A=>{A.stopPropagation(),c(!f)},T=()=>{o&&o(t.id)},v=typeof t.author=="string"?`${t.author.slice(0,6)}...${t.author.slice(-4)}`:t.author,P=(typeof t.author=="string",t.author),I=((_=t.stats)==null?void 0:_.likeCount)||0,O=((S=t.stats)==null?void 0:S.commentCount)||0;return e.jsxDEV("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200 cursor-pointer",onClick:T,children:[e.jsxDEV("div",{className:"flex items-center mb-3",children:[e.jsxDEV("div",{className:"h-10 w-10 rounded-full bg-gradient-to-r from-blue-400 to-purple-500 flex items-center justify-center text-white font-bold",children:e.jsxDEV(We,{address:P,size:"md",showUsername:!1},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/PollPost.tsx",lineNumber:160,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/PollPost.tsx",lineNumber:159,columnNumber:9},void 0),e.jsxDEV("div",{className:"ml-2",children:[e.jsxDEV("div",{className:"font-medium",children:v},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/PollPost.tsx",lineNumber:167,columnNumber:11},void 0),e.jsxDEV("div",{className:"text-xs text-gray-500 flex",children:[g,t.tribeId&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV("span",{className:"mx-1",children:""},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/PollPost.tsx",lineNumber:172,columnNumber:17},void 0),e.jsxDEV("span",{children:["Tribe #",t.tribeId]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/PollPost.tsx",lineNumber:173,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/PollPost.tsx",lineNumber:171,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/PollPost.tsx",lineNumber:168,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/PollPost.tsx",lineNumber:166,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/PollPost.tsx",lineNumber:158,columnNumber:7},void 0),e.jsxDEV("h3",{className:"text-lg font-medium mb-3",children:N},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/PollPost.tsx",lineNumber:181,columnNumber:7},void 0),e.jsxDEV("div",{className:"space-y-2",children:k.map(A=>{const R=V>0?Math.round(A.votes/V*100):0,H=p===A.id;return e.jsxDEV("button",{onClick:()=>E(A.id),disabled:b&&!H,className:"w-full",children:e.jsxDEV("div",{className:"relative",children:[e.jsxDEV("div",{className:`w-full p-3 rounded-xl border ${H?"border-[#4ADE80] bg-[#4ADE80]/10":"border-gray-200 hover:bg-gray-50"}`,children:e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("span",{children:A.text},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/PollPost.tsx",lineNumber:205,columnNumber:21},void 0),b&&e.jsxDEV("span",{className:"text-sm text-gray-500",children:[R,"%"]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/PollPost.tsx",lineNumber:207,columnNumber:23},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/PollPost.tsx",lineNumber:204,columnNumber:19},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/PollPost.tsx",lineNumber:197,columnNumber:17},void 0),b&&e.jsxDEV("div",{className:"absolute top-0 left-0 h-full bg-[#4ADE80]/10 rounded-xl transition-all",style:{width:`${R}%`}},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/PollPost.tsx",lineNumber:212,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/PollPost.tsx",lineNumber:196,columnNumber:15},void 0)},A.id,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/PollPost.tsx",lineNumber:190,columnNumber:13},void 0)})},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/PollPost.tsx",lineNumber:184,columnNumber:7},void 0),e.jsxDEV("div",{className:"flex items-center justify-between text-sm text-gray-500 mt-3",children:[e.jsxDEV("span",{children:[V.toLocaleString()," votes"]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/PollPost.tsx",lineNumber:225,columnNumber:9},void 0),U&&e.jsxDEV("span",{children:U},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/PollPost.tsx",lineNumber:226,columnNumber:27},void 0),x&&e.jsxDEV("span",{children:"Poll ended"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/PollPost.tsx",lineNumber:227,columnNumber:25},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/PollPost.tsx",lineNumber:224,columnNumber:7},void 0),i&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:"flex items-center mt-4 text-gray-500 text-sm",children:[e.jsxDEV("div",{className:"flex items-center",children:[e.jsxDEV("span",{children:I},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/PollPost.tsx",lineNumber:235,columnNumber:15},void 0),e.jsxDEV("span",{className:"mx-1",children:"likes"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/PollPost.tsx",lineNumber:236,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/PollPost.tsx",lineNumber:234,columnNumber:13},void 0),e.jsxDEV("span",{className:"mx-1.5",children:""},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/PollPost.tsx",lineNumber:238,columnNumber:13},void 0),e.jsxDEV("div",{className:"flex items-center",children:[e.jsxDEV("span",{children:O},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/PollPost.tsx",lineNumber:240,columnNumber:15},void 0),e.jsxDEV("span",{className:"mx-1",children:"comments"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/PollPost.tsx",lineNumber:241,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/PollPost.tsx",lineNumber:239,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/PollPost.tsx",lineNumber:233,columnNumber:11},void 0),e.jsxDEV("div",{className:"flex items-center justify-between mt-3 pt-3 border-t border-gray-100",children:[e.jsxDEV("button",{onClick:C,className:"flex items-center text-gray-500 hover:text-red-600",children:[u?e.jsxDEV(_t,{className:"h-5 w-5 text-red-600"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/PollPost.tsx",lineNumber:252,columnNumber:17},void 0):e.jsxDEV(zt,{className:"h-5 w-5"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/PollPost.tsx",lineNumber:254,columnNumber:17},void 0),e.jsxDEV("span",{className:"ml-1.5 text-sm",children:I>0?I:""},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/PollPost.tsx",lineNumber:256,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/PollPost.tsx",lineNumber:247,columnNumber:13},void 0),e.jsxDEV("button",{onClick:j,className:"flex items-center text-gray-500 hover:text-blue-600",children:[e.jsxDEV(Wt,{className:"h-5 w-5"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/PollPost.tsx",lineNumber:263,columnNumber:15},void 0),e.jsxDEV("span",{className:"ml-1.5 text-sm",children:O>0?O:""},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/PollPost.tsx",lineNumber:264,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/PollPost.tsx",lineNumber:259,columnNumber:13},void 0),e.jsxDEV("button",{onClick:M,className:"flex items-center text-gray-500 hover:text-green-600",children:e.jsxDEV(Kt,{className:"h-5 w-5"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/PollPost.tsx",lineNumber:271,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/PollPost.tsx",lineNumber:267,columnNumber:13},void 0),e.jsxDEV("button",{onClick:y,className:"flex items-center text-gray-500 hover:text-yellow-600",children:f?e.jsxDEV(qt,{className:"h-5 w-5 text-yellow-600"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/PollPost.tsx",lineNumber:279,columnNumber:17},void 0):e.jsxDEV(Jt,{className:"h-5 w-5"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/PollPost.tsx",lineNumber:281,columnNumber:17},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/PollPost.tsx",lineNumber:274,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/PollPost.tsx",lineNumber:246,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/PollPost.tsx",lineNumber:232,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/PollPost.tsx",lineNumber:153,columnNumber:5},void 0)},hi=t=>{var o;const{post:s}=t,n=Y.useMemo(()=>{var i;return((i=s.metadata)==null?void 0:i.bounty)||{reward:"0",currency:"ETH",difficulty:"medium",deadline:void 0,tags:[],requirements:[],repository:void 0}},[(o=s.metadata)==null?void 0:o.bounty]),r=i=>{switch(i.toLowerCase()){case"easy":return"bg-green-500/20 text-green-500";case"medium":return"bg-yellow-500/20 text-yellow-500";case"hard":return"bg-red-500/20 text-red-500";default:return"bg-neutral-500/20 text-neutral-400"}},a=i=>{const u=["blue","purple","green","yellow","orange","red","indigo","emerald"],l=i.split("").reduce((f,c)=>f+c.charCodeAt(0),0);return u[l%u.length]};return e.jsxDEV(dn,{...t,postType:"bounty",typeIcon:e.jsxDEV(bt,{className:"mr-1 h-3 w-3"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/BountyPost.tsx",lineNumber:62,columnNumber:17},void 0),typeName:"Bounty",children:e.jsxDEV("div",{className:"space-y-4 mt-4",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{className:"flex items-center space-x-3",children:[e.jsxDEV("div",{className:Gs({type:"bounty"}),children:e.jsxDEV(bt,{className:"w-5 h-5 text-emerald-300"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/BountyPost.tsx",lineNumber:70,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/BountyPost.tsx",lineNumber:69,columnNumber:13},void 0),e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"text-2xl font-bold text-white",children:[n.reward," ",n.currency]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/BountyPost.tsx",lineNumber:73,columnNumber:15},void 0),e.jsxDEV("div",{className:"text-sm text-neutral-400",children:"Reward"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/BountyPost.tsx",lineNumber:76,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/BountyPost.tsx",lineNumber:72,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/BountyPost.tsx",lineNumber:68,columnNumber:11},void 0),e.jsxDEV("span",{className:`px-3 py-1 rounded-full text-sm ${r(n.difficulty)}`,children:n.difficulty.charAt(0).toUpperCase()+n.difficulty.slice(1)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/BountyPost.tsx",lineNumber:79,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/BountyPost.tsx",lineNumber:67,columnNumber:9},void 0),n.deadline&&e.jsxDEV("div",{className:"flex items-center space-x-2 text-sm text-neutral-400",children:[e.jsxDEV(Ht,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/BountyPost.tsx",lineNumber:88,columnNumber:13},void 0),e.jsxDEV("span",{children:["Deadline: ",new Date(n.deadline).toLocaleDateString()]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/BountyPost.tsx",lineNumber:89,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/BountyPost.tsx",lineNumber:87,columnNumber:11},void 0),n.requirements&&n.requirements.length>0&&e.jsxDEV("div",{className:"space-y-2 mt-3",children:[e.jsxDEV("h4",{className:"text-sm font-medium text-white",children:"Requirements"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/BountyPost.tsx",lineNumber:96,columnNumber:13},void 0),e.jsxDEV("ul",{className:"space-y-2",children:n.requirements.map((i,u)=>e.jsxDEV("li",{className:"flex items-start space-x-2 text-sm text-neutral-300",children:[e.jsxDEV("span",{className:"w-1.5 h-1.5 mt-1.5 rounded-full bg-emerald-500"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/BountyPost.tsx",lineNumber:100,columnNumber:19},void 0),e.jsxDEV("span",{children:i},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/BountyPost.tsx",lineNumber:101,columnNumber:19},void 0)]},u,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/BountyPost.tsx",lineNumber:99,columnNumber:17},void 0))},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/BountyPost.tsx",lineNumber:97,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/BountyPost.tsx",lineNumber:95,columnNumber:11},void 0),n.repository&&e.jsxDEV("a",{href:n.repository,target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-2 px-4 py-2 bg-neutral-800 rounded-full hover:bg-neutral-700 w-fit transition-colors",onClick:i=>i.stopPropagation(),children:[e.jsxDEV(wr,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/BountyPost.tsx",lineNumber:117,columnNumber:13},void 0),e.jsxDEV("span",{children:"View Repository"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/BountyPost.tsx",lineNumber:118,columnNumber:13},void 0),e.jsxDEV(xr,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/BountyPost.tsx",lineNumber:119,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/BountyPost.tsx",lineNumber:110,columnNumber:11},void 0),n.tags&&n.tags.length>0&&e.jsxDEV("div",{className:"mt-3 flex flex-wrap gap-2",children:n.tags.map((i,u)=>e.jsxDEV("span",{className:Ue({variant:a(i)}),children:i},u,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/BountyPost.tsx",lineNumber:127,columnNumber:15},void 0))},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/BountyPost.tsx",lineNumber:125,columnNumber:11},void 0),e.jsxDEV("button",{className:Fe({variant:"primary",fullWidth:!0}),onClick:i=>{i.stopPropagation()},children:"Apply for Bounty"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/BountyPost.tsx",lineNumber:138,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/BountyPost.tsx",lineNumber:66,columnNumber:7},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/BountyPost.tsx",lineNumber:59,columnNumber:5},void 0)},wi=({post:t,onLike:s,onComment:n,onShare:r,onReport:a,onClick:o,showActions:i=!0})=>{var U,E,C;const[u,l]=m.useState(!1),[f,c]=m.useState(!1),p=(()=>{try{const j=t.createdAt;if(!j)return"Unknown time";const M=new Date(j);return isNaN(M.getTime())?"Invalid date":ze(M,{addSuffix:!0})}catch(j){return console.error("Error formatting date:",j,t),"Unknown time"}})(),h=((U=t.metadata)==null?void 0:U.project)||{github:void 0,website:void 0},b=j=>{j.stopPropagation(),l(!u),s&&s()},w=j=>{j.stopPropagation(),n&&n()},g=j=>{j.stopPropagation(),r&&r()},d=j=>{j.stopPropagation(),c(!f)},N=()=>{o&&o(t.id)},k=typeof t.author=="string"?`${t.author.slice(0,6)}...${t.author.slice(-4)}`:t.author,D=(typeof t.author=="string",t.author),x=((E=t.stats)==null?void 0:E.likeCount)||0,V=((C=t.stats)==null?void 0:C.commentCount)||0;return e.jsxDEV("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200 cursor-pointer",onClick:N,children:[e.jsxDEV("div",{className:"flex items-center mb-3",children:[e.jsxDEV("div",{className:"h-10 w-10 rounded-full bg-gradient-to-r from-blue-400 to-purple-500 flex items-center justify-center text-white font-bold",children:e.jsxDEV(We,{address:D,size:"md",showUsername:!1},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ProjectPost.tsx",lineNumber:114,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ProjectPost.tsx",lineNumber:113,columnNumber:9},void 0),e.jsxDEV("div",{className:"ml-2",children:[e.jsxDEV("div",{className:"font-medium",children:k},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ProjectPost.tsx",lineNumber:121,columnNumber:11},void 0),e.jsxDEV("div",{className:"text-xs text-gray-500 flex",children:[p,t.tribeId&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV("span",{className:"mx-1",children:""},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ProjectPost.tsx",lineNumber:126,columnNumber:17},void 0),e.jsxDEV("span",{children:["Tribe #",t.tribeId]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ProjectPost.tsx",lineNumber:127,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ProjectPost.tsx",lineNumber:125,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ProjectPost.tsx",lineNumber:122,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ProjectPost.tsx",lineNumber:120,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ProjectPost.tsx",lineNumber:112,columnNumber:7},void 0),t.content&&e.jsxDEV("div",{className:"text-gray-800 whitespace-pre-line mb-4",children:t.content},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ProjectPost.tsx",lineNumber:136,columnNumber:9},void 0),e.jsxDEV("div",{className:"mt-4 rounded-xl border border-purple-500/20",children:[e.jsxDEV("div",{className:"flex items-center justify-between p-4 border-b border-purple-500/10",children:e.jsxDEV("div",{className:"text-gray-800 font-medium flex items-center gap-2",children:[e.jsxDEV(ht,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ProjectPost.tsx",lineNumber:145,columnNumber:13},void 0),e.jsxDEV("span",{children:"Project Repository"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ProjectPost.tsx",lineNumber:146,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ProjectPost.tsx",lineNumber:144,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ProjectPost.tsx",lineNumber:143,columnNumber:9},void 0),e.jsxDEV("div",{className:"p-4",children:e.jsxDEV("div",{className:"flex items-center gap-3 text-gray-600",children:[h.github&&e.jsxDEV("a",{href:h.github,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-3 py-1.5 rounded-lg hover:bg-purple-500/10 transition-colors",onClick:j=>j.stopPropagation(),children:[e.jsxDEV(ht,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ProjectPost.tsx",lineNumber:159,columnNumber:17},void 0),e.jsxDEV("span",{children:"GitHub"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ProjectPost.tsx",lineNumber:160,columnNumber:17},void 0),e.jsxDEV($e,{className:"w-3 h-3"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ProjectPost.tsx",lineNumber:161,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ProjectPost.tsx",lineNumber:152,columnNumber:15},void 0),h.website&&e.jsxDEV("a",{href:h.website,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-3 py-1.5 rounded-lg hover:bg-purple-500/10 transition-colors",onClick:j=>j.stopPropagation(),children:[e.jsxDEV(ts,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ProjectPost.tsx",lineNumber:172,columnNumber:17},void 0),e.jsxDEV("span",{children:"Website"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ProjectPost.tsx",lineNumber:173,columnNumber:17},void 0),e.jsxDEV($e,{className:"w-3 h-3"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ProjectPost.tsx",lineNumber:174,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ProjectPost.tsx",lineNumber:165,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ProjectPost.tsx",lineNumber:150,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ProjectPost.tsx",lineNumber:149,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ProjectPost.tsx",lineNumber:142,columnNumber:7},void 0),i&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:"flex items-center mt-4 text-gray-500 text-sm",children:[e.jsxDEV("div",{className:"flex items-center",children:[e.jsxDEV("span",{children:x},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ProjectPost.tsx",lineNumber:186,columnNumber:15},void 0),e.jsxDEV("span",{className:"mx-1",children:"likes"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ProjectPost.tsx",lineNumber:187,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ProjectPost.tsx",lineNumber:185,columnNumber:13},void 0),e.jsxDEV("span",{className:"mx-1.5",children:""},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ProjectPost.tsx",lineNumber:189,columnNumber:13},void 0),e.jsxDEV("div",{className:"flex items-center",children:[e.jsxDEV("span",{children:V},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ProjectPost.tsx",lineNumber:191,columnNumber:15},void 0),e.jsxDEV("span",{className:"mx-1",children:"comments"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ProjectPost.tsx",lineNumber:192,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ProjectPost.tsx",lineNumber:190,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ProjectPost.tsx",lineNumber:184,columnNumber:11},void 0),e.jsxDEV("div",{className:"flex items-center justify-between mt-3 pt-3 border-t border-gray-100",children:[e.jsxDEV("button",{onClick:b,className:"flex items-center text-gray-500 hover:text-red-600",children:[u?e.jsxDEV(_t,{className:"h-5 w-5 text-red-600"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ProjectPost.tsx",lineNumber:203,columnNumber:17},void 0):e.jsxDEV(zt,{className:"h-5 w-5"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ProjectPost.tsx",lineNumber:205,columnNumber:17},void 0),e.jsxDEV("span",{className:"ml-1.5 text-sm",children:x>0?x:""},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ProjectPost.tsx",lineNumber:207,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ProjectPost.tsx",lineNumber:198,columnNumber:13},void 0),e.jsxDEV("button",{onClick:w,className:"flex items-center text-gray-500 hover:text-blue-600",children:[e.jsxDEV(Wt,{className:"h-5 w-5"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ProjectPost.tsx",lineNumber:214,columnNumber:15},void 0),e.jsxDEV("span",{className:"ml-1.5 text-sm",children:V>0?V:""},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ProjectPost.tsx",lineNumber:215,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ProjectPost.tsx",lineNumber:210,columnNumber:13},void 0),e.jsxDEV("button",{onClick:g,className:"flex items-center text-gray-500 hover:text-green-600",children:e.jsxDEV(Kt,{className:"h-5 w-5"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ProjectPost.tsx",lineNumber:222,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ProjectPost.tsx",lineNumber:218,columnNumber:13},void 0),e.jsxDEV("button",{onClick:d,className:"flex items-center text-gray-500 hover:text-yellow-600",children:f?e.jsxDEV(qt,{className:"h-5 w-5 text-yellow-600"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ProjectPost.tsx",lineNumber:230,columnNumber:17},void 0):e.jsxDEV(Jt,{className:"h-5 w-5"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ProjectPost.tsx",lineNumber:232,columnNumber:17},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ProjectPost.tsx",lineNumber:225,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ProjectPost.tsx",lineNumber:197,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ProjectPost.tsx",lineNumber:183,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ProjectPost.tsx",lineNumber:107,columnNumber:5},void 0)},Ut={[F.TEXT]:"text",[F.IMAGE]:"image",[F.VIDEO]:"video",[F.LINK]:"link",[F.EVENT]:"event",[F.POLL]:"poll",6:"bounty",7:"project"},xi=({post:t,onLike:s,onComment:n,onShare:r,onReport:a,onClick:o,showActions:i=!0})=>(()=>{var w,g,d,N,k,D;const l=t.type!==void 0&&t.type!==null?String(t.type):"";console.log("PostTypeMapper rendering post:",{id:t.id,rawType:t.type,numericType:typeof t.type=="number"?t.type:parseInt(l,10),author:t.author,content:((w=t.content)==null?void 0:w.substring(0,30))+(t.content&&t.content.length>30?"...":""),hasMetadata:!!t.metadata,metadataKeys:t.metadata?Object.keys(t.metadata):[],hasMedia:((g=t.metadata)==null?void 0:g.media)&&t.metadata.media.length>0,mediaTypes:(N=(d=t.metadata)==null?void 0:d.media)==null?void 0:N.map(x=>x.type),componentType:typeof t.type=="number"?Ut[t.type]:l.toLowerCase()});const f=t.type===F.EVENT||t.type===3,c=l.toLowerCase()==="event",p=((k=t.metadata)==null?void 0:k.event)!==void 0;console.log("Event detection:",{eventDetails:(D=t.metadata)==null?void 0:D.event,isEventType:f,isEventString:c,hasEventMetadata:p});const h=typeof t.type=="number"?t.type:parseInt(l,10);switch(isNaN(h)?l.toLowerCase():Ut[h]){case"text":return e.jsxDEV(kt,{post:t,onLike:s,onComment:n,onShare:r,onReport:a,onClick:o,showActions:i},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeMapper.tsx",lineNumber:97,columnNumber:11},void 0);case"image":return e.jsxDEV(ui,{post:t,onLike:s,onComment:n,onShare:r,onReport:a,onClick:o,showActions:i},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeMapper.tsx",lineNumber:109,columnNumber:11},void 0);case"video":return e.jsxDEV(di,{post:t,onLike:s,onComment:n,onShare:r,onReport:a,onClick:o,showActions:i},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeMapper.tsx",lineNumber:121,columnNumber:11},void 0);case"link":return e.jsxDEV(ci,{post:t,onLike:s,onComment:n,onShare:r,onReport:a,onClick:o,showActions:i},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeMapper.tsx",lineNumber:133,columnNumber:11},void 0);case"event":return e.jsxDEV(pi,{post:t,onLike:s,onComment:n,onShare:r,onReport:a,onClick:o,showActions:i},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeMapper.tsx",lineNumber:145,columnNumber:11},void 0);case"poll":return e.jsxDEV(bi,{post:t,onLike:s,onComment:n,onShare:r,onReport:a,onClick:o,showActions:i},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeMapper.tsx",lineNumber:157,columnNumber:11},void 0);case"bounty":return e.jsxDEV(hi,{post:t,onLike:s,onComment:n,onShare:r,onReport:a,onClick:o,showActions:i},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeMapper.tsx",lineNumber:169,columnNumber:11},void 0);case"project":return e.jsxDEV(wi,{post:t,onLike:s,onComment:n,onShare:r,onReport:a,onClick:o,showActions:i},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeMapper.tsx",lineNumber:181,columnNumber:11},void 0);default:return console.warn(`Unknown post type: ${t.type}, falling back to TextPost`),e.jsxDEV(kt,{post:t,onLike:s,onComment:n,onShare:r,onReport:a,onClick:o,showActions:i},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeMapper.tsx",lineNumber:194,columnNumber:11},void 0)}})(),Ni=[{value:"ALL",label:"All"},{value:F.TEXT,label:"Text"},{value:F.IMAGE,label:"Image"},{value:F.VIDEO,label:"Video"},{value:F.POLL,label:"Polls"},{value:F.EVENT,label:"Events"},{value:F.LINK,label:"Links"}];function yi({items:t,loading:s=!1,showCreateButton:n=!0,showFilters:r=!0,onItemClick:a}){const o=ns(),[i,u]=m.useState("ALL"),[l,f]=m.useState("all"),[c,p]=m.useState("latest"),[h,b]=m.useState(!1);m.useEffect(()=>{},[t]);const w=[{value:"today",label:"Today"},{value:"week",label:"This Week"},{value:"month",label:"This Month"},{value:"all",label:"All Time"}],g=[{value:"trending",label:"Trending",icon:yr},{value:"latest",label:"Latest",icon:Ht},{value:"top",label:"Top",icon:Lt}],d=E=>{},N=E=>{},k=E=>{},D=E=>{},x=()=>{o(Ze(!0))},V=m.useMemo(()=>{if(!t||t.length===0)return[];let E=[...t];i!=="ALL"&&(E=E.filter(j=>{if("content"in j&&"type"in j){const M=j;if(i===F.EVENT)return fi(M);const y=String(M.type).toLowerCase(),T=String(i).toLowerCase();if(y===T||i===F.TEXT&&(M.type===0||y==="text"||y==="0"))return!0;if(typeof i=="number"){const v=parseInt(y,10);if(!isNaN(v)&&v===i)return!0;const P=F[i];if(P&&y===P.toLowerCase())return!0}return!1}return!1}));const C=new Date;switch(l!=="all"&&(E=E.filter(j=>{const M=("createdAt"in j,j.createdAt),y=new Date(M);switch(l){case"today":return y.getDate()===C.getDate()&&y.getMonth()===C.getMonth()&&y.getFullYear()===C.getFullYear();case"week":{const T=new Date(C.getTime()-6048e5);return y>=T}case"month":return y.getMonth()===C.getMonth()&&y.getFullYear()===C.getFullYear();default:return!0}})),c){case"trending":E.sort((j,M)=>{const y="stats"in j?j.stats:{likeCount:0,commentCount:0},T="stats"in M?M.stats:{likeCount:0,commentCount:0},v=((y==null?void 0:y.likeCount)||0)+((y==null?void 0:y.commentCount)||0)*2;return((T==null?void 0:T.likeCount)||0)+((T==null?void 0:T.commentCount)||0)*2-v});break;case"latest":E.sort((j,M)=>{const y="createdAt"in j?new Date(j.createdAt).getTime():new Date(j.createdAt).getTime();return("createdAt"in M?new Date(M.createdAt).getTime():new Date(M.createdAt).getTime())-y});break;case"top":E.sort((j,M)=>{const y="stats"in j?j.stats:{likeCount:0},T="stats"in M?M.stats:{likeCount:0};return((T==null?void 0:T.likeCount)||0)-((y==null?void 0:y.likeCount)||0)});break}return E},[t,i,l,c]),U=E=>"content"in E&&"type"in E?e.jsxDEV("div",{className:"mb-4",children:e.jsxDEV(xi,{post:E,onLike:()=>d(E.id),onComment:()=>N(E.id),onShare:()=>k(E.id),onReport:()=>D(E.id),onClick:()=>a==null?void 0:a(E)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/UnifiedFeed.tsx",lineNumber:204,columnNumber:11},this)},E.id,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/UnifiedFeed.tsx",lineNumber:203,columnNumber:9},this):null;return s?e.jsxDEV("div",{children:"Loading..."},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/UnifiedFeed.tsx",lineNumber:221,columnNumber:12},this):e.jsxDEV("div",{className:"space-y-2",children:[r&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:"flex items-center justify-between p-4 bg-transparent",children:[e.jsxDEV("div",{className:"flex items-center space-x-2 overflow-x-auto scrollbar-hide",children:e.jsxDEV("div",{className:"flex rounded-lg bg-gray-800/30 p-1",children:Ni.map(E=>e.jsxDEV("button",{onClick:()=>u(E.value),className:ne("px-4 py-2 rounded-md text-sm font-medium transition-colors duration-200",i===E.value?"bg-blue-600 text-white shadow-md":"text-gray-400 hover:text-gray-200 hover:bg-gray-700/30"),children:E.label},E.value,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/UnifiedFeed.tsx",lineNumber:233,columnNumber:19},this))},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/UnifiedFeed.tsx",lineNumber:231,columnNumber:15},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/UnifiedFeed.tsx",lineNumber:230,columnNumber:13},this),e.jsxDEV("button",{onClick:()=>b(!h),className:"p-2.5 bg-gray-800/30 border border-gray-700/50 rounded-lg text-gray-400 hover:text-white hover:bg-gray-700/50 transition-colors",children:e.jsxDEV(Nr,{className:"w-5 h-5"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/UnifiedFeed.tsx",lineNumber:253,columnNumber:15},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/UnifiedFeed.tsx",lineNumber:249,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/UnifiedFeed.tsx",lineNumber:229,columnNumber:11},this),h&&e.jsxDEV("div",{className:"px-4 py-3 bg-gray-800/20 border-t border-b border-gray-700/30",children:[e.jsxDEV("div",{className:"mb-3",children:[e.jsxDEV("h3",{className:"text-sm font-medium text-gray-300 mb-2",children:"Sort By"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/UnifiedFeed.tsx",lineNumber:261,columnNumber:17},this),e.jsxDEV("div",{className:"flex flex-wrap gap-2",children:g.map(({value:E,label:C,icon:j})=>e.jsxDEV("button",{onClick:()=>p(E),className:ne("px-3 py-1.5 rounded-full flex items-center space-x-2 text-sm transition-colors",c===E?"bg-blue-600 text-white":"text-gray-400 hover:text-white bg-gray-800/30 hover:bg-gray-700/50"),children:[e.jsxDEV(j,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/UnifiedFeed.tsx",lineNumber:274,columnNumber:23},this),e.jsxDEV("span",{children:C},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/UnifiedFeed.tsx",lineNumber:275,columnNumber:23},this)]},E,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/UnifiedFeed.tsx",lineNumber:264,columnNumber:21},this))},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/UnifiedFeed.tsx",lineNumber:262,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/UnifiedFeed.tsx",lineNumber:260,columnNumber:15},this),e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"text-sm font-medium text-gray-300 mb-2",children:"Time Range"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/UnifiedFeed.tsx",lineNumber:282,columnNumber:17},this),e.jsxDEV("div",{className:"flex flex-wrap gap-2",children:w.map(({value:E,label:C})=>e.jsxDEV("button",{onClick:()=>f(E),className:ne("px-3 py-1 rounded-full text-sm transition-colors",l===E?"bg-blue-600 text-white":"text-gray-400 hover:text-white bg-gray-800/30 hover:bg-gray-700/50"),children:C},E,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/UnifiedFeed.tsx",lineNumber:285,columnNumber:21},this))},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/UnifiedFeed.tsx",lineNumber:283,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/UnifiedFeed.tsx",lineNumber:281,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/UnifiedFeed.tsx",lineNumber:259,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/UnifiedFeed.tsx",lineNumber:227,columnNumber:9},this),e.jsxDEV("div",{className:"px-4 pb-4 space-y-4",children:[s?e.jsxDEV("div",{className:"flex flex-col items-center justify-center py-16",children:[e.jsxDEV(St,{className:"w-10 h-10 text-blue-500 animate-spin mb-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/UnifiedFeed.tsx",lineNumber:309,columnNumber:13},this),e.jsxDEV("p",{className:"text-gray-400",children:"Loading content..."},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/UnifiedFeed.tsx",lineNumber:310,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/UnifiedFeed.tsx",lineNumber:308,columnNumber:11},this):V.length>0?e.jsxDEV("div",{className:"space-y-4",children:V.map(U)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/UnifiedFeed.tsx",lineNumber:313,columnNumber:11},this):e.jsxDEV("div",{className:"flex flex-col items-center justify-center py-16 text-center",children:[e.jsxDEV("div",{className:"w-16 h-16 bg-gray-800/50 border border-gray-700/50 rounded-full flex items-center justify-center mb-4",children:e.jsxDEV(Bt,{className:"w-8 h-8 text-gray-500"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/UnifiedFeed.tsx",lineNumber:319,columnNumber:15},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/UnifiedFeed.tsx",lineNumber:318,columnNumber:13},this),e.jsxDEV("h3",{className:"text-lg font-medium text-white mb-1",children:"No content found"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/UnifiedFeed.tsx",lineNumber:321,columnNumber:13},this),e.jsxDEV("p",{className:"text-gray-400 mb-6 max-w-md",children:i==="ALL"?"No posts or content available.":`No ${i===F.EVENT?"event":i===F.POLL?"poll":i===F.TEXT?"text":i===F.IMAGE?"image":i===F.VIDEO?"video":i===F.LINK?"link":""} content found. Try a different filter or create a new post.`},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/UnifiedFeed.tsx",lineNumber:322,columnNumber:13},this),n&&e.jsxDEV("button",{onClick:x,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors shadow-md",children:[e.jsxDEV(Ee,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/UnifiedFeed.tsx",lineNumber:338,columnNumber:17},this),"Create Post"]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/UnifiedFeed.tsx",lineNumber:334,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/UnifiedFeed.tsx",lineNumber:317,columnNumber:11},this),n&&e.jsxDEV("div",{className:"fixed bottom-6 right-6 md:hidden",children:e.jsxDEV("button",{onClick:x,className:"w-12 h-12 rounded-full bg-blue-600 text-white shadow-lg flex items-center justify-center hover:bg-blue-700 transition-colors",children:e.jsxDEV(Ee,{className:"w-6 h-6"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/UnifiedFeed.tsx",lineNumber:352,columnNumber:15},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/UnifiedFeed.tsx",lineNumber:348,columnNumber:13},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/UnifiedFeed.tsx",lineNumber:347,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/UnifiedFeed.tsx",lineNumber:306,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/UnifiedFeed.tsx",lineNumber:225,columnNumber:5},this)}function gi(){const{tribeId:t}=Gt(),{tribes:s,isLoading:n}=nt(),{posts:r,loading:a,fetchFeed:o}=ii(),[i,u]=m.useState(null),[l,f]=m.useState(!1),[c,p]=m.useState(!1),[h,b]=m.useState(!1),[w,g]=m.useState("all"),{showNotification:d}=Ss(),N=m.useMemo(()=>s==null?void 0:s.find(y=>y.id.toString()===(t==null?void 0:t.toString())),[s,t]),k=m.useMemo(()=>N?{id:N.id,name:N.name,description:nn(N),avatar:rt(N),coverImage:rn(N),memberCount:N.memberCount,isVerified:N.isVerified||!1,members:N.members||[],topics:at(N)}:null,[N]);m.useEffect(()=>{(async()=>{if(t)try{await q.connect();const T=await q.getAddress(),v=await q.getCurrentChainId(),P=Je(v),I=await q.getProvider(),O=await q.getSigner();if(!O){console.error("No signer available");return}const _=await new Qe(P.TRIBE_CONTROLLER,le.TribeController,O).isMember(Number(t),T);console.log(`[TribeView]: isMember: ${_} ${T} ${t}`),f(_),console.log(`User ${T} is${_?"":" not"} a member of tribe ${t}`)}catch(T){console.error("Error checking tribe membership:",T)}})()},[t]);const D=async()=>{if(t)try{p(!0),await q.connect();const y=await q.getCurrentChainId(),T=Je(y),v=await q.getProvider(),P=await q.getSigner();if(!P)throw new Error("No signer available");const I=new Qe(T.TRIBE_CONTROLLER,le.TribeController,P);if(l){const O=await I.leaveTribe(Number(t),{gasLimit:3e5});d("Leaving tribe transaction has been sent","info"),console.log("Leave tribe transaction sent:",O.hash);const B=await O.wait();console.log("Leave tribe transaction confirmed:",B),f(!1),d("You have left the tribe","success")}else{console.log(`[TribeView]: Joining tribe ${t}`);const O=await I.getTribeDetails(Number(t));console.log(`[TribeView]: Tribe details: ${O}`,`[tribeDetailsJoinType]: joinType: ${O==null?void 0:O.joinType}`);const B=O.joinType;if(B==0){console.log(`[TribeView]: Joining open tribe ${t}`);const _=await I.joinTribe(Number(t),{gasLimit:3e5});console.log(`[TribeView]: Joining tribe ${t} with tx: ${_.hash}`),d("Joining tribe transaction has been sent","info"),console.log("Join tribe transaction sent:",_.hash);const S=await _.wait();console.log("Join tribe transaction confirmed:",S),f(!0),d("You have joined the tribe","success")}else if(B===1){console.log(`[TribeView]: Approval required for tribe ${t}`);const _=await I.requestToJoinTribe(Number(t),{gasLimit:3e5});d("Your request to join the tribe has been sent","info"),console.log("Request to join tribe sent:",_.hash);const S=await _.wait();console.log("Request to join tribe confirmed:",S),d("Your request is pending approval from tribe admins","info")}else console.log(`[TribeView]: Other join types (invite, NFT) for tribe ${t} ${B}`),d("This tribe requires an invitation or specific NFT to join","error")}}catch(y){console.error("Error toggling tribe membership:",y),d(`Failed to ${l?"leave":"join"} tribe: ${y.message}`,"error")}finally{p(!1)}};m.useEffect(()=>{N?(console.log("Found tribe:",N),console.log("Formatted tribe display:",k)):(s==null?void 0:s.length)>0&&(console.log("Tribes available but none match ID:",t),console.log("Available tribe IDs:",s.map(y=>y.id)))},[N,s,t]);const x=m.useMemo(()=>{if(!r||!t)return[];const y=Object.values(r);console.log(`[TribeView]: Filtering ${y.length} posts for tribe ${t}`);const T=y.filter(v=>{var B;const P=(B=v.tribeId)==null?void 0:B.toString(),I=t.toString(),O=P===I;return O&&console.log(`[TribeView]: Post ${v.id} matches tribe ${t}`),O});return console.log(`[TribeView]: Found ${T.length} posts for tribe ${t}`),T},[r,t]),V=m.useMemo(()=>w==="all"?x:w==="media"?x.filter(y=>{const T=y.type;return T===F.IMAGE||T===F.VIDEO}):w==="events"?x.filter(y=>y.type===F.EVENT):x,[x,w]),U=async y=>{if(t)try{await q.connect();const T=await q.getCurrentChainId(),v=Je(T),P=await q.getProvider(),I=await q.getSigner();if(!I){console.error("No signer available");return}const B=await new Qe(v.TRIBE_CONTROLLER,le.TribeController,I).getTribePosts(Number(t));console.log(`[TribeView]: Fetched ${B.length} posts for tribe ${t}`);let _=B;y==="media"?_=B.filter(A=>{const R=JSON.parse(A.metadata||"{}");return R.type==="IMAGE"||R.type==="VIDEO"||R.type==="RICH_MEDIA"}):y==="events"&&(_=B.filter(A=>JSON.parse(A.metadata||"{}").type==="EVENT"));const S=_.map(A=>{const R=JSON.parse(A.metadata||"{}");return{id:A.id.toString(),content:R.content||"",title:R.title||"",author:A.creator,tribeId:Number(t),createdAt:A.createdAt?Number(A.createdAt)*1e3:Date.now(),type:R.type||"TEXT",metadata:R}})}catch(T){console.error("Error fetching posts by type:",T)}};m.useEffect(()=>{U(w)},[w,t]);const E=y=>{g(y)};V.length>0,m.useEffect(()=>{console.log("[TribeView]: Fetching all posts using fetchFeed"),o().catch(y=>{console.error("Error fetching feed:",y)})},[o]);const C=y=>{console.log(`[TribeView]: Post created successfully with ID: ${y}`),o(),b(!1)};if(n)return e.jsxDEV("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxDEV("div",{className:"animate-pulse bg-accent/10 rounded-xl h-48 w-96"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/TribeView.tsx",lineNumber:388,columnNumber:9},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/TribeView.tsx",lineNumber:387,columnNumber:7},this);if(!N||!k)return e.jsxDEV("div",{className:"text-center py-12 text-muted-foreground",children:"Tribe not found"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/TribeView.tsx",lineNumber:395,columnNumber:7},this);const j=y=>{console.log("Clicked item:",y)},M=e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{className:"bg-card rounded-xl overflow-hidden",children:[e.jsxDEV("div",{className:"h-24 relative",children:[k.coverImage&&e.jsxDEV("img",{src:k.coverImage,alt:k.name,className:"w-full h-full object-cover",onError:y=>{y.target.src="/images/default-cover.png"}},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/TribeView.tsx",lineNumber:413,columnNumber:13},this),e.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-t from-background/60 to-transparent"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/TribeView.tsx",lineNumber:422,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/TribeView.tsx",lineNumber:411,columnNumber:9},this),e.jsxDEV("div",{className:"p-4",children:[e.jsxDEV("div",{className:"flex items-center space-x-3 mt-2",children:[e.jsxDEV("img",{src:k.avatar,alt:k.name,className:"w-16 h-16 rounded-xl border-4 border-background",onError:y=>{y.target.src="/images/default-avatar.png"}},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/TribeView.tsx",lineNumber:428,columnNumber:13},this),e.jsxDEV("div",{className:"flex-1 min-w-0",children:[e.jsxDEV("h3",{className:"font-semibold flex items-center gap-1",children:[k.name,k.isVerified&&e.jsxDEV("span",{className:"text-theme-primary text-sm",children:""},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/TribeView.tsx",lineNumber:440,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/TribeView.tsx",lineNumber:437,columnNumber:15},this),e.jsxDEV("div",{className:"flex items-center text-sm text-muted-foreground",children:[e.jsxDEV(Pe,{className:"w-4 h-4 mr-1"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/TribeView.tsx",lineNumber:444,columnNumber:17},this),e.jsxDEV("span",{children:[k.memberCount.toLocaleString()," members"]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/TribeView.tsx",lineNumber:445,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/TribeView.tsx",lineNumber:443,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/TribeView.tsx",lineNumber:436,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/TribeView.tsx",lineNumber:427,columnNumber:11},this),e.jsxDEV("p",{className:"mt-3 text-sm text-muted-foreground",children:k.description},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/TribeView.tsx",lineNumber:449,columnNumber:11},this),e.jsxDEV("button",{onClick:D,disabled:c,className:ne("w-full mt-4 px-4 py-2 rounded-lg text-sm font-medium transition-colors",c?"bg-gray-700/50 cursor-not-allowed":l?"bg-gray-700/10 hover:bg-gray-700/20 text-white":"bg-theme-primary hover:bg-theme-primary/90 text-white"),children:c?"Processing...":l?"Joined":"Join Tribe"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/TribeView.tsx",lineNumber:450,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/TribeView.tsx",lineNumber:426,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/TribeView.tsx",lineNumber:409,columnNumber:7},this),e.jsxDEV(ri,{members:k.members,topics:k.topics,onTopicSelect:u,selectedTopicId:i==null?void 0:i.id},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/TribeView.tsx",lineNumber:467,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/TribeView.tsx",lineNumber:407,columnNumber:5},this);return e.jsxDEV(ni,{rightSidebar:M,children:[e.jsxDEV("div",{className:"min-w-[320px] overflow-x-hidden",children:[e.jsxDEV("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-6",children:[e.jsxDEV("div",{className:"flex space-x-4 overflow-x-auto",children:[e.jsxDEV("button",{onClick:()=>E("all"),className:ne("px-4 py-2 rounded-full whitespace-nowrap",w==="all"?"bg-foreground/10 text-foreground":"text-muted-foreground hover:text-foreground"),children:"All Posts"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/TribeView.tsx",lineNumber:482,columnNumber:13},this),e.jsxDEV("button",{onClick:()=>E("media"),className:ne("px-4 py-2 rounded-full whitespace-nowrap",w==="media"?"bg-foreground/10 text-foreground":"text-muted-foreground hover:text-foreground"),children:"Media"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/TribeView.tsx",lineNumber:493,columnNumber:13},this),e.jsxDEV("button",{onClick:()=>E("events"),className:ne("px-4 py-2 rounded-full whitespace-nowrap",w==="events"?"bg-foreground/10 text-foreground":"text-muted-foreground hover:text-foreground"),children:"Events"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/TribeView.tsx",lineNumber:504,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/TribeView.tsx",lineNumber:481,columnNumber:11},this),e.jsxDEV("button",{onClick:()=>b(!0),className:"flex items-center justify-center space-x-2 px-4 py-2 bg-theme-primary text-white rounded-full font-medium hover:bg-theme-primary/90 transition-colors w-full sm:w-auto",children:[e.jsxDEV(Ee,{className:"w-5 h-5"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/TribeView.tsx",lineNumber:520,columnNumber:13},this),e.jsxDEV("span",{children:"Create Post"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/TribeView.tsx",lineNumber:521,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/TribeView.tsx",lineNumber:516,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/TribeView.tsx",lineNumber:480,columnNumber:9},this),e.jsxDEV("div",{className:"space-y-4",children:a?e.jsxDEV("div",{className:"flex justify-center py-8",children:e.jsxDEV("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-theme-primary"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/TribeView.tsx",lineNumber:529,columnNumber:15},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/TribeView.tsx",lineNumber:528,columnNumber:13},this):V.length>0?e.jsxDEV(yi,{items:V,loading:a,showCreateButton:!1,onItemClick:j},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/TribeView.tsx",lineNumber:532,columnNumber:13},this):e.jsxDEV("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsxDEV("h3",{className:"text-lg font-medium text-white mb-2",children:"No posts yet"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/TribeView.tsx",lineNumber:540,columnNumber:15},this),e.jsxDEV("p",{className:"text-gray-400 mb-6",children:"Be the first to create a post in this tribe!"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/TribeView.tsx",lineNumber:541,columnNumber:15},this),e.jsxDEV("button",{onClick:()=>b(!0),className:"inline-flex items-center px-4 py-2 bg-theme-primary text-white rounded-lg hover:bg-theme-primary/90 transition-colors",children:[e.jsxDEV(Ee,{className:"w-5 h-5 mr-2"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/TribeView.tsx",lineNumber:548,columnNumber:17},this),"Create Post"]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/TribeView.tsx",lineNumber:544,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/TribeView.tsx",lineNumber:539,columnNumber:13},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/TribeView.tsx",lineNumber:526,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/TribeView.tsx",lineNumber:478,columnNumber:7},this),h&&e.jsxDEV("div",{className:"fixed inset-0 bg-background/80 backdrop-blur-sm flex items-end sm:items-center justify-center z-50 p-4",children:e.jsxDEV("div",{className:"bg-card w-full max-w-[600px] rounded-t-xl sm:rounded-xl",children:e.jsxDEV(ai,{onClose:()=>b(!1),isOpen:h,tribeId:N.id,onSuccess:C},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/TribeView.tsx",lineNumber:560,columnNumber:13},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/TribeView.tsx",lineNumber:559,columnNumber:11},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/TribeView.tsx",lineNumber:558,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/TribeView.tsx",lineNumber:477,columnNumber:5},this)}function Di(){return e.jsxDEV(gi,{},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/TribeDetails.tsx",lineNumber:8,columnNumber:10},this)}function Ei(){const t=ce(),{createTribe:s}=Vs(),[n,r]=m.useState(""),[a,o]=m.useState(""),[i,u]=m.useState(!1),[l,f]=m.useState(null),[c,p]=m.useState(null),[h,b]=m.useState(null),[w,g]=m.useState(null),[d,N]=m.useState([]),[k,D]=m.useState(""),[x,V]=m.useState(null),[U,E]=m.useState(!1),[C,j]=m.useState(!1),M=I=>{if(I.target.files&&I.target.files[0]){const O=I.target.files[0];f(O);const B=new FileReader;B.onload=_=>{var S;p((S=_.target)==null?void 0:S.result)},B.readAsDataURL(O)}},y=I=>{if(I.target.files&&I.target.files[0]){const O=I.target.files[0];b(O);const B=new FileReader;B.onload=_=>{var S;g((S=_.target)==null?void 0:S.result)},B.readAsDataURL(O)}},T=()=>{k&&!d.includes(k)&&d.length<5&&(N([...d,k]),D(""))},v=I=>{N(d.filter(O=>O!==I))},P=async I=>{if(I.preventDefault(),V(null),!n.trim()){V("Tribe name is required");return}if(!a.trim()){V("Description is required");return}E(!0);try{const O={name:n.trim(),description:a,privacy:i?"private":"public",tags:d,avatar:c,coverImage:w,createdAt:new Date().toISOString()};console.log("Creating tribe with metadata:",O);const B=JSON.stringify(O),_=i?1:0;await s(n,B),j(!0),setTimeout(()=>{t("/tribes")},2e3)}catch(O){console.error("Error creating tribe:",O),V(O instanceof Error?O.message:"Failed to create tribe")}finally{E(!1)}};return e.jsxDEV("div",{className:"max-w-3xl mx-auto px-4 py-8",children:[e.jsxDEV("div",{className:"mb-8",children:[e.jsxDEV("h1",{className:"text-2xl font-bold text-white",children:"Create a New Tribe"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:112,columnNumber:9},this),e.jsxDEV("p",{className:"text-gray-400 mt-2",children:"Create a community around your interests, project, or organization."},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:113,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:111,columnNumber:7},this),C?e.jsxDEV("div",{className:"bg-green-500/20 border border-green-500/30 rounded-lg p-4 text-center",children:[e.jsxDEV("h3",{className:"text-xl font-semibold text-white mb-2",children:"Tribe Created Successfully!"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:118,columnNumber:11},this),e.jsxDEV("p",{className:"text-gray-300",children:"Redirecting you to the tribes page..."},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:119,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:117,columnNumber:9},this):e.jsxDEV("form",{onSubmit:P,className:"space-y-6",children:[e.jsxDEV("div",{className:"relative",children:[e.jsxDEV("div",{className:`h-48 w-full rounded-xl overflow-hidden bg-gray-800/50 border-2 border-dashed ${w?"border-transparent":"border-gray-700"}`,children:w?e.jsxDEV(e.Fragment,{children:[e.jsxDEV("img",{src:w,alt:"Cover Preview",className:"w-full h-full object-cover"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:128,columnNumber:19},this),e.jsxDEV("button",{type:"button",onClick:()=>{b(null),g(null)},className:"absolute top-2 right-2 bg-black/70 text-white p-1.5 rounded-full hover:bg-black/90",children:e.jsxDEV(De,{size:18},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:137,columnNumber:21},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:129,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:127,columnNumber:17},this):e.jsxDEV("div",{className:"flex flex-col items-center justify-center h-full text-gray-400",children:[e.jsxDEV(vs,{className:"w-10 h-10 mb-2"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:142,columnNumber:19},this),e.jsxDEV("p",{className:"text-sm",children:"Upload cover image (optional)"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:143,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:141,columnNumber:17},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:125,columnNumber:13},this),e.jsxDEV("input",{type:"file",id:"cover-image",accept:"image/*",onChange:y,className:"hidden"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:148,columnNumber:13},this),!w&&e.jsxDEV("label",{htmlFor:"cover-image",className:"absolute bottom-4 right-4 bg-gray-800 text-white px-3 py-2 rounded-lg flex items-center cursor-pointer hover:bg-gray-700",children:[e.jsxDEV(gr,{size:16,className:"mr-2"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:161,columnNumber:17},this),e.jsxDEV("span",{children:"Upload Cover"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:162,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:157,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:124,columnNumber:11},this),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxDEV("div",{className:"col-span-1",children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Avatar"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:171,columnNumber:15},this),e.jsxDEV("div",{className:"relative",children:[e.jsxDEV("div",{className:`w-24 h-24 rounded-xl overflow-hidden bg-gray-800/50 border-2 border-dashed ${c?"border-transparent":"border-gray-700"}`,children:c?e.jsxDEV("img",{src:c,alt:"Avatar Preview",className:"w-full h-full object-cover"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:175,columnNumber:21},this):e.jsxDEV("div",{className:"flex items-center justify-center h-full text-gray-400",children:e.jsxDEV(Ee,{size:24},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:178,columnNumber:23},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:177,columnNumber:21},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:173,columnNumber:17},this),e.jsxDEV("input",{type:"file",id:"avatar",accept:"image/*",onChange:M,className:"hidden"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:183,columnNumber:17},this),e.jsxDEV("label",{htmlFor:"avatar",className:"absolute -bottom-1 -right-1 bg-blue-600 text-white p-1.5 rounded-full cursor-pointer hover:bg-blue-700",children:e.jsxDEV(Ee,{size:14},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:195,columnNumber:19},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:191,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:172,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:170,columnNumber:13},this),e.jsxDEV("div",{className:"col-span-3 space-y-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-300 mb-2",children:"Tribe Name*"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:203,columnNumber:17},this),e.jsxDEV("input",{type:"text",id:"name",value:n,onChange:I=>r(I.target.value),className:"w-full px-3 py-2 bg-gray-800/50 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter a name for your tribe",maxLength:50},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:204,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:202,columnNumber:15},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-300 mb-2",children:"Description*"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:216,columnNumber:17},this),e.jsxDEV("textarea",{id:"description",value:a,onChange:I=>o(I.target.value),className:"w-full px-3 py-2 bg-gray-800/50 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none",placeholder:"What is your tribe about?",rows:3,maxLength:300},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:217,columnNumber:17},this),e.jsxDEV("p",{className:"text-gray-400 text-xs mt-1",children:[a.length,"/300 characters"]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:226,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:215,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:201,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:168,columnNumber:11},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Privacy"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:233,columnNumber:13},this),e.jsxDEV("div",{className:"flex space-x-4",children:[e.jsxDEV("button",{type:"button",onClick:()=>u(!1),className:`flex items-center space-x-3 p-3 rounded-lg border ${i?"border-gray-700 bg-gray-800/50 hover:bg-gray-800":"border-blue-500 bg-blue-500/10"}`,children:[e.jsxDEV(ts,{className:`w-5 h-5 ${i?"text-gray-400":"text-blue-500"}`},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:244,columnNumber:17},this),e.jsxDEV("div",{className:"text-left",children:[e.jsxDEV("div",{className:`font-medium ${i?"text-white":"text-blue-500"}`,children:"Public"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:246,columnNumber:19},this),e.jsxDEV("div",{className:"text-xs text-gray-400",children:"Anyone can join and view content"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:247,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:245,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:235,columnNumber:15},this),e.jsxDEV("button",{type:"button",onClick:()=>u(!0),className:`flex items-center space-x-3 p-3 rounded-lg border ${i?"border-blue-500 bg-blue-500/10":"border-gray-700 bg-gray-800/50 hover:bg-gray-800"}`,children:[e.jsxDEV(He,{className:`w-5 h-5 ${i?"text-blue-500":"text-gray-400"}`},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:260,columnNumber:17},this),e.jsxDEV("div",{className:"text-left",children:[e.jsxDEV("div",{className:`font-medium ${i?"text-blue-500":"text-white"}`,children:"Private"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:262,columnNumber:19},this),e.jsxDEV("div",{className:"text-xs text-gray-400",children:"Members must be approved to join"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:263,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:261,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:251,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:234,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:232,columnNumber:11},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Tags (up to 5)"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:271,columnNumber:13},this),e.jsxDEV("div",{className:"flex flex-wrap gap-2 mb-2",children:d.map(I=>e.jsxDEV("div",{className:"flex items-center bg-gray-800 text-white px-3 py-1 rounded-full",children:[e.jsxDEV("span",{className:"text-sm",children:I},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:275,columnNumber:19},this),e.jsxDEV("button",{type:"button",onClick:()=>v(I),className:"ml-2 text-gray-400 hover:text-white",children:e.jsxDEV(De,{size:14},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:281,columnNumber:21},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:276,columnNumber:19},this)]},I,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:274,columnNumber:17},this))},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:272,columnNumber:13},this),e.jsxDEV("div",{className:"flex",children:[e.jsxDEV("input",{type:"text",value:k,onChange:I=>D(I.target.value),onKeyDown:I=>{I.key==="Enter"&&(I.preventDefault(),T())},className:"flex-1 px-3 py-2 bg-gray-800/50 border border-r-0 border-gray-700 rounded-l-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Add a tag",disabled:d.length>=5},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:288,columnNumber:15},this),e.jsxDEV("button",{type:"button",onClick:T,disabled:d.length>=5||!k.trim(),className:"px-3 py-2 bg-gray-700 text-white rounded-r-lg hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed",children:"Add"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:302,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:287,columnNumber:13},this),e.jsxDEV("p",{className:"text-gray-400 text-xs mt-1",children:"Tags help people discover your tribe"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:311,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:270,columnNumber:11},this),x&&e.jsxDEV("div",{className:"bg-red-500/20 border border-red-500/30 text-red-200 px-4 py-3 rounded-lg",children:x},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:316,columnNumber:13},this),e.jsxDEV("div",{className:"flex items-center justify-end space-x-4 mt-8",children:[e.jsxDEV("button",{type:"button",onClick:()=>t("/tribes"),className:"px-4 py-2 text-gray-300 hover:text-white",children:"Cancel"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:323,columnNumber:13},this),e.jsxDEV("button",{type:"submit",disabled:U,className:"px-6 py-2.5 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors disabled:opacity-70 disabled:cursor-not-allowed",children:U?"Creating...":"Create Tribe"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:330,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:322,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:122,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:110,columnNumber:5},this)}var ae=(t=>(t.WALLET_CONNECTION="WALLET_CONNECTION",t.PROFILE_CREATION="PROFILE_CREATION",t.FOLLOW_SUGGESTIONS="FOLLOW_SUGGESTIONS",t.COMPLETED="COMPLETED",t))(ae||{});const gs="tribes_onboarding",$s={currentStep:"WALLET_CONNECTION",isCompleted:!1};async function Pt(t,s){if(!s){console.error(" Chain ID is undefined in getProfileByAddress, using fallback");try{const a=window.ethereum;if(a){const o=await a.request({method:"eth_chainId"});s=parseInt(o,16),console.log(" Retrieved chainId from provider:",s)}else s=20143,console.warn(" No provider, using fallback chainId:",s)}catch(a){console.error(" Failed to get chainId, using fallback:",a),s=20143}}const n=J(s),r=te(s);try{const a=s;console.log(" Checking profile on chain:",{chainId:a,address:t,contractAddress:n.profileNFTMinter.address,rpcUrl:r.transport.url});const o=await r.readContract({address:n.profileNFTMinter.address,abi:n.profileNFTMinter.abi,functionName:"balanceOf",args:[t]});if(console.log(" Balance check result:",{balance:o.toString(),chainId:a,address:t}),o===BigInt(0))return console.log(" No profile found - balance is 0",{chainId:a,address:t}),null;let i=null;for(let b=0;b<10;b++)try{console.log(" Checking token ownership:",{tokenId:b,chainId:a});const w=await r.readContract({address:n.profileNFTMinter.address,abi:n.profileNFTMinter.abi,functionName:"ownerOf",args:[BigInt(b)]});if(console.log(" Token owner:",{tokenId:b,owner:w,chainId:a}),w.toLowerCase()===t.toLowerCase()){i=b,console.log(" Found matching token:",{tokenId:b,chainId:a});break}}catch(w){console.log(" Token check error:",{tokenId:b,chainId:a,error:w});continue}if(i===null)return console.log(" No owned token found",{chainId:a,address:t}),null;console.log(" Fetching profile data:",{tokenId:i,chainId:a});const u=await r.readContract({address:n.profileNFTMinter.address,abi:n.profileNFTMinter.abi,functionName:"getProfileByTokenId",args:[BigInt(i)]}),[l,f,c]=u;if(console.log(" Raw profile data:",{username:l,metadataURI:f,owner:c,chainId:a}),c.toLowerCase()!==t.toLowerCase())return console.log(" Owner mismatch:",{expectedOwner:t.toLowerCase(),actualOwner:c.toLowerCase(),chainId:a}),null;let p;try{const b=JSON.parse(f);p={avatar:b.avatar||"",bio:b.bio||"",createdAt:b.createdAt||Date.now()},console.log(" Parsed metadata:",{metadata:p,chainId:a})}catch(b){console.warn(" Failed to parse metadata:",{metadataURI:f,error:b,chainId:a}),p={avatar:"",bio:"",createdAt:Date.now()}}const h={tokenId:i.toString(),owner:t,username:l,metadata:p};return console.log(" Profile found:",{profile:h,chainId:a}),h}catch(a){return console.error(" Profile fetch error:",{error:a,chainId:s,address:t,contractAddress:n.profileNFTMinter.address,rpcUrl:r.transport.url}),null}}const vi=3e3,Ti=3,lt=()=>{const[t,s]=m.useState(()=>{const c=localStorage.getItem(gs);return c?JSON.parse(c):$s}),n=m.useRef(0),r=m.useRef();m.useEffect(()=>{const c=async()=>{if(!window.ethereum){console.log(" No ethereum provider found");return}try{const p=new Promise((d,N)=>{r.current=setTimeout(()=>{N(new Error("Wallet check timeout"))},vi)}),h=await Promise.race([window.ethereum.request({method:"eth_accounts"}),p]);clearTimeout(r.current);const b=h&&h.length>0,w=b?h[0]:void 0,g=b?await window.ethereum.request({method:"eth_chainId"}):void 0;if(b&&w){const d=await Pt(w,g);s(k=>({...k,walletAddress:w,chainId:g?parseInt(g):void 0,currentStep:d?ae.COMPLETED:ae.PROFILE_CREATION,isCompleted:!!d,profileId:d==null?void 0:d.tokenId}));const N={isConnected:b,address:w,chainId:g,profileId:d==null?void 0:d.tokenId};localStorage.setItem("wallet_data",JSON.stringify(N)),n.current=0}else throw new Error("No wallet connected")}catch(p){console.error(" Error checking wallet connection:",p),r.current&&clearTimeout(r.current),n.current<Ti?(n.current++,setTimeout(c,1e3)):(console.log(" Max retries reached, resetting to initial state"),s(h=>({...h,walletAddress:void 0,chainId:void 0,currentStep:ae.WALLET_CONNECTION})))}};if(c(),window.ethereum)return window.ethereum.on("accountsChanged",c),window.ethereum.on("chainChanged",c),()=>{r.current&&clearTimeout(r.current),window.ethereum.removeListener("accountsChanged",c),window.ethereum.removeListener("chainChanged",c)}},[]),m.useEffect(()=>{localStorage.setItem(gs,JSON.stringify(t))},[t]),m.useEffect(()=>()=>{r.current&&clearTimeout(r.current)},[]);const a=m.useCallback(()=>{const c=localStorage.getItem("wallet_data"),{isConnected:p,address:h,profileId:b}=c?JSON.parse(c):{};return!p||!h?ae.WALLET_CONNECTION:b?t.isCompleted?ae.COMPLETED:ae.FOLLOW_SUGGESTIONS:ae.PROFILE_CREATION},[t]),o=m.useCallback(async(c,p)=>{const h=await Pt(c,p);s(b=>({...b,walletAddress:c,chainId:p,currentStep:h?ae.COMPLETED:ae.PROFILE_CREATION,isCompleted:!!h,profileId:h==null?void 0:h.tokenId})),localStorage.setItem("wallet_data",JSON.stringify({isConnected:!0,address:c,chainId:p,profileId:h==null?void 0:h.tokenId}))},[]),i=m.useCallback(()=>{s($s),localStorage.removeItem("wallet_data"),localStorage.removeItem(gs)},[]),u=m.useCallback(c=>{s(p=>({...p,profileId:c,currentStep:ae.FOLLOW_SUGGESTIONS}))},[]),l=m.useCallback(()=>{s(c=>({...c,currentStep:ae.COMPLETED,isCompleted:!0}))},[]),f=m.useCallback(()=>{s($s),localStorage.removeItem("wallet_data"),localStorage.removeItem(gs)},[]);return{...t,getCurrentStep:a,updateWalletInfo:o,clearWalletInfo:i,updateProfileId:u,completeOnboarding:l,resetOnboarding:f}},Se={base:`block w-full rounded-lg border-2 shadow-sm 
    focus:ring-2 focus:ring-opacity-50 focus:outline-none
    transition-colors duration-200`,default:`border-gray-700 bg-gray-900 text-white placeholder-gray-500
    focus:border-green-500 focus:ring-green-500/20`,disabled:"border-gray-600 bg-gray-800 text-gray-400 cursor-not-allowed"},Ae={base:`w-full flex justify-center items-center py-3 px-6 rounded-lg font-medium
    transition-all duration-200 ease-in-out transform`,primary:`bg-green-500 hover:bg-green-600 active:bg-green-700 
    text-white shadow-lg shadow-green-500/20 
    hover:shadow-green-500/30 hover:-translate-y-0.5`,secondary:`bg-gray-800 hover:bg-gray-700 active:bg-gray-600
    text-gray-300 hover:text-white border border-gray-700
    hover:border-gray-600`,disabled:"bg-gray-600 text-gray-300 cursor-not-allowed opacity-50"},ki=()=>{const t=ce(),{createProfile:s,skipProfileCreation:n,hasSkippedProfileCreation:r,checkProfileOwnership:a}=us(),{updateProfileId:o,completeOnboarding:i}=lt(),[u,l]=m.useState(!1),[f,c]=m.useState(!1),[p,h]=m.useState(null),[b,w]=m.useState({username:"",avatar:"",bio:""});m.useEffect(()=>{(async()=>{var x;const D=await((x=window.ethereum)==null?void 0:x.request({method:"eth_requestAccounts"}));if(D!=null&&D[0]){if(await r(D[0])){i(),t("/dashboard");return}const U=await a(D[0]);U&&(h({tokenId:U.tokenId,username:U.username}),w(E=>{var C,j;return{...E,username:U.username,avatar:((C=U.metadata)==null?void 0:C.avatar)||"",bio:((j=U.metadata)==null?void 0:j.bio)||""}}),o(U.tokenId),i(),t("/dashboard"))}})()},[r,a,i,t,o]);const g=async k=>{k.preventDefault(),l(!0);try{const D=JSON.stringify({avatar:b.avatar||`https://api.dicebear.com/7.x/avataaars/svg?seed=${b.username}`,bio:b.bio,createdAt:Date.now()}),x=await s(b.username,D);x&&(o(x.toString()),t("/onboarding/follow"))}finally{l(!1)}},d=async()=>{c(!0);try{await n()&&(i(),t("/dashboard"))}finally{c(!1)}},N=k=>{const{name:D,value:x}=k.target;w(V=>({...V,[D]:x}))};return p?e.jsxDEV("div",{className:"w-full max-w-lg mx-auto px-4 py-8",children:e.jsxDEV("div",{className:"bg-gray-800/50 backdrop-blur-sm p-8 rounded-xl border border-gray-700/50 shadow-xl",children:[e.jsxDEV("h2",{className:"text-3xl font-bold mb-8 text-white text-center",children:"Profile Already Exists"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/ProfileCreation.tsx",lineNumber:124,columnNumber:11},void 0),e.jsxDEV("p",{className:"text-gray-300 text-center mb-6",children:["You already have a profile with username: ",e.jsxDEV("span",{className:"text-green-500 font-semibold",children:p.username},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/ProfileCreation.tsx",lineNumber:128,columnNumber:55},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/ProfileCreation.tsx",lineNumber:127,columnNumber:11},void 0),e.jsxDEV("button",{onClick:()=>t("/dashboard"),className:Ae.primary,children:"Go to Dashboard"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/ProfileCreation.tsx",lineNumber:130,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/ProfileCreation.tsx",lineNumber:123,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/ProfileCreation.tsx",lineNumber:122,columnNumber:7},void 0):e.jsxDEV("div",{className:"w-full max-w-lg mx-auto px-4 py-8",children:e.jsxDEV("div",{className:"bg-gray-800/50 backdrop-blur-sm p-8 rounded-xl border border-gray-700/50 shadow-xl",children:[e.jsxDEV("h2",{className:"text-3xl font-bold mb-8 text-white text-center",children:"Create Your Profile"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/ProfileCreation.tsx",lineNumber:144,columnNumber:9},void 0),e.jsxDEV("form",{onSubmit:g,className:"space-y-6",children:[e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-200",children:"Username"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/ProfileCreation.tsx",lineNumber:150,columnNumber:13},void 0),e.jsxDEV("input",{type:"text",name:"username",id:"username",required:!0,value:b.username,onChange:N,disabled:!!p,className:`${Se.base} ${p?Se.disabled:Se.default}`,placeholder:"Enter your username"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/ProfileCreation.tsx",lineNumber:156,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/ProfileCreation.tsx",lineNumber:149,columnNumber:11},void 0),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-200",children:"Avatar"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/ProfileCreation.tsx",lineNumber:171,columnNumber:13},void 0),e.jsxDEV("div",{className:"flex items-center space-x-4",children:[e.jsxDEV("div",{className:"relative",children:[e.jsxDEV("img",{src:b.avatar||`https://api.dicebear.com/7.x/avataaars/svg?seed=${b.username||"default"}`,alt:"Avatar preview",className:"w-20 h-20 rounded-full bg-gray-700 ring-2 ring-green-500/20"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/ProfileCreation.tsx",lineNumber:178,columnNumber:17},void 0),e.jsxDEV("div",{className:"absolute inset-0 rounded-full shadow-inner"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/ProfileCreation.tsx",lineNumber:183,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/ProfileCreation.tsx",lineNumber:177,columnNumber:15},void 0),e.jsxDEV("input",{type:"text",name:"avatar",value:b.avatar,onChange:N,className:`${Se.base} ${Se.default}`,placeholder:"Avatar URL (optional)"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/ProfileCreation.tsx",lineNumber:185,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/ProfileCreation.tsx",lineNumber:176,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/ProfileCreation.tsx",lineNumber:170,columnNumber:11},void 0),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("label",{htmlFor:"bio",className:"block text-sm font-medium text-gray-200",children:"Bio"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/ProfileCreation.tsx",lineNumber:198,columnNumber:13},void 0),e.jsxDEV("textarea",{name:"bio",id:"bio",rows:3,value:b.bio,onChange:N,className:`${Se.base} ${Se.default} resize-none`,placeholder:"Tell us about yourself"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/ProfileCreation.tsx",lineNumber:204,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/ProfileCreation.tsx",lineNumber:197,columnNumber:11},void 0),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("button",{type:"submit",disabled:u||!!p,className:`${Ae.base} ${u||p?Ae.disabled:Ae.primary}`,children:u?e.jsxDEV(e.Fragment,{children:[e.jsxDEV("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsxDEV("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/ProfileCreation.tsx",lineNumber:227,columnNumber:21},void 0),e.jsxDEV("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/ProfileCreation.tsx",lineNumber:228,columnNumber:21},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/ProfileCreation.tsx",lineNumber:226,columnNumber:19},void 0),"Creating Profile..."]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/ProfileCreation.tsx",lineNumber:225,columnNumber:17},void 0):"Create Profile"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/ProfileCreation.tsx",lineNumber:217,columnNumber:13},void 0),!p&&e.jsxDEV("button",{type:"button",onClick:d,disabled:f,className:`${Ae.base} ${f?Ae.disabled:Ae.secondary}`,children:f?"Skipping...":"Skip for now"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/ProfileCreation.tsx",lineNumber:238,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/ProfileCreation.tsx",lineNumber:216,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/ProfileCreation.tsx",lineNumber:147,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/ProfileCreation.tsx",lineNumber:143,columnNumber:7},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/ProfileCreation.tsx",lineNumber:142,columnNumber:5},void 0)},Ci=[{id:"1",username:"alice",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=alice",bio:"Web3 Developer & DeFi enthusiast"},{id:"2",username:"bob",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=bob",bio:"NFT Artist & Collector"},{id:"3",username:"charlie",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=charlie",bio:"Blockchain Researcher"}],Ui=()=>{const t=ce(),{completeOnboarding:s}=lt(),[n,r]=m.useState(new Set),a=i=>{r(u=>{const l=new Set(u);return l.has(i)?l.delete(i):l.add(i),l})},o=()=>{s(),t("/dashboard")};return e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV("h2",{className:"text-2xl font-bold text-gray-900",children:"Follow some interesting people"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/FollowSuggestions.tsx",lineNumber:54,columnNumber:9},void 0),e.jsxDEV("p",{className:"mt-2 text-sm text-gray-600",children:"Follow at least 3 people to get started"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/FollowSuggestions.tsx",lineNumber:57,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/FollowSuggestions.tsx",lineNumber:53,columnNumber:7},void 0),e.jsxDEV("div",{className:"space-y-4",children:Ci.map(i=>e.jsxDEV("div",{className:`flex items-center justify-between p-4 rounded-lg border ${n.has(i.id)?"border-green-500 bg-green-50":"border-gray-200"}`,children:[e.jsxDEV("div",{className:"flex items-center space-x-4",children:[e.jsxDEV("img",{src:i.avatar,alt:i.username,className:"w-12 h-12 rounded-full"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/FollowSuggestions.tsx",lineNumber:73,columnNumber:15},void 0),e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"font-medium text-gray-900",children:["@",i.username]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/FollowSuggestions.tsx",lineNumber:79,columnNumber:17},void 0),e.jsxDEV("p",{className:"text-sm text-gray-500",children:i.bio},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/FollowSuggestions.tsx",lineNumber:80,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/FollowSuggestions.tsx",lineNumber:78,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/FollowSuggestions.tsx",lineNumber:72,columnNumber:13},void 0),e.jsxDEV("button",{onClick:()=>a(i.id),className:`px-4 py-2 rounded-full text-sm font-medium ${n.has(i.id)?"bg-green-500 text-white":"bg-gray-100 text-gray-900"}`,children:n.has(i.id)?"Following":"Follow"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/FollowSuggestions.tsx",lineNumber:83,columnNumber:13},void 0)]},i.id,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/FollowSuggestions.tsx",lineNumber:64,columnNumber:11},void 0))},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/FollowSuggestions.tsx",lineNumber:62,columnNumber:7},void 0),e.jsxDEV("div",{className:"flex justify-between",children:[e.jsxDEV("button",{onClick:()=>t("/dashboard"),className:"text-gray-600 hover:text-gray-900",children:"Skip for now"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/FollowSuggestions.tsx",lineNumber:98,columnNumber:9},void 0),e.jsxDEV("button",{onClick:o,disabled:n.size<3,className:`px-6 py-2 rounded-full font-medium ${n.size>=3?"bg-green-500 text-white hover:bg-green-600":"bg-gray-200 text-gray-500 cursor-not-allowed"}`,children:"Continue"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/FollowSuggestions.tsx",lineNumber:104,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/FollowSuggestions.tsx",lineNumber:97,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/FollowSuggestions.tsx",lineNumber:52,columnNumber:5},void 0)},Pi=()=>{const{getCurrentStep:t}=lt(),s=t();if(s===ae.COMPLETED)return e.jsxDEV(Yt,{to:"/dashboard",replace:!0},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Onboarding.tsx",lineNumber:16,columnNumber:12},void 0);const n=()=>{switch(s){case ae.WALLET_CONNECTION:return e.jsxDEV(on,{},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Onboarding.tsx",lineNumber:23,columnNumber:16},void 0);case ae.PROFILE_CREATION:return e.jsxDEV(ki,{},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Onboarding.tsx",lineNumber:25,columnNumber:16},void 0);case ae.FOLLOW_SUGGESTIONS:return e.jsxDEV(Ui,{},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Onboarding.tsx",lineNumber:27,columnNumber:16},void 0);default:return null}};return e.jsxDEV(e.Fragment,{children:[e.jsxDEV("style",{children:`
          body {
            background-color: #111827;
            min-height: 100vh;
            margin: 0;
          }
        `},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Onboarding.tsx",lineNumber:35,columnNumber:7},void 0),e.jsxDEV("div",{className:"min-h-screen flex flex-col bg-gradient-to-b from-gray-900 to-black",children:[e.jsxDEV(tt,{onMenuClick:()=>{}},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Onboarding.tsx",lineNumber:45,columnNumber:9},void 0),e.jsxDEV("main",{className:"flex-1 flex items-center justify-center",children:e.jsxDEV("div",{className:"w-full",children:n()},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Onboarding.tsx",lineNumber:47,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Onboarding.tsx",lineNumber:46,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Onboarding.tsx",lineNumber:44,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Onboarding.tsx",lineNumber:34,columnNumber:5},void 0)};function ji(){const{topicId:t}=Gt();return e.jsxDEV("div",{className:"min-h-screen",children:e.jsxDEV("div",{className:"max-w-7xl mx-auto px-4 py-8",children:e.jsxDEV("div",{className:"bg-gray-800/30 border border-gray-700/50 rounded-xl p-6 text-center",children:[e.jsxDEV(Ft,{className:"w-12 h-12 mx-auto text-blue-400 mb-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/topics/TopicsView.tsx",lineNumber:20,columnNumber:11},this),e.jsxDEV("h1",{className:"text-2xl font-bold mb-2",children:"Topics View"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/topics/TopicsView.tsx",lineNumber:21,columnNumber:11},this),e.jsxDEV("p",{className:"text-gray-300 mb-4",children:"This feature is currently under development. Topics will soon be mapped to post tags to provide a unified view of content across tribes."},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/topics/TopicsView.tsx",lineNumber:22,columnNumber:11},this),e.jsxDEV("p",{className:"text-gray-400",children:["Topic ID: ",t||"None selected"]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/topics/TopicsView.tsx",lineNumber:26,columnNumber:11},this),e.jsxDEV("div",{className:"mt-6",children:e.jsxDEV($t,{to:"/",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Return to Home"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/topics/TopicsView.tsx",lineNumber:30,columnNumber:13},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/topics/TopicsView.tsx",lineNumber:29,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/topics/TopicsView.tsx",lineNumber:19,columnNumber:9},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/topics/TopicsView.tsx",lineNumber:18,columnNumber:7},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/topics/TopicsView.tsx",lineNumber:17,columnNumber:5},this)}function Vi(){return e.jsxDEV(ji,{},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/TopicDetails.tsx",lineNumber:4,columnNumber:10},this)}const _s="tribes_auth_state",$=(t,s)=>{const n=new Date().toISOString().split("T")[1].split(".")[0];s?console.log(`[AuthGuard:${n}] ${t}`,s):console.log(`[AuthGuard:${n}] ${t}`)},Ii=({children:t})=>{const s=ce(),n=js(),{getProfileByAddress:r,isLoading:a}=us(),{chainId:o,switchNetwork:i}=Ve(),[u,l]=m.useState(!0),[f,c]=m.useState(),[p,h]=m.useState(0),b=m.useRef(!1),w=3,{sdk:g,isInitialized:d}=Is(),N=m.useRef(new Map),k=3,D=m.useRef(),x=()=>{var E;try{const C=localStorage.getItem(_s);if(C){const y=JSON.parse(C);if(Date.now()-y.timestamp<=36e5)return $("Found valid tribes_auth_state",{address:y.address,chainId:y.chainId}),y;localStorage.removeItem(_s),$("Removed expired tribes_auth_state")}const j=localStorage.getItem("tribes_auth"),M=localStorage.getItem("tribes_profile");if(j){const y=JSON.parse(j),T=M?JSON.parse(M):null;if(y.isConnected&&y.address){const v={address:y.address,chainId:o||0,profile:T?{tokenId:((E=T.tokenId)==null?void 0:E.toString())||"0",username:T.username||"",metadata:{uri:T.avatarNFT||""}}:void 0,timestamp:Date.now()};return $("Created auth state from tribes_auth/profile",{address:v.address}),v}}return $("No valid auth state found"),null}catch(C){return console.error("Failed to load stored auth state:",C),null}},V=E=>{try{localStorage.setItem(_s,JSON.stringify({...E,timestamp:Date.now()})),$("Saved auth state",{address:E.address,chainId:E.chainId})}catch(C){console.error("Failed to save auth state:",C)}},U=E=>{if(n.pathname===E){$(`Already at ${E}, not navigating`);return}const C=N.current.get(E)||0;if(C>=k){$(`Too many navigation attempts to ${E}, stopping`),l(!1);return}N.current.set(E,C+1),$(`Navigating to ${E} (attempt ${C+1})`),s(E)};return m.useEffect(()=>((async()=>{var C;if(n.pathname!=="/connect"&&N.current.delete("/connect"),a||!g||!d){$("SDK not ready, waiting...",{isSdkLoading:a,hasSdk:!!g,isInitialized:d});return}if(D.current&&clearTimeout(D.current),b.current){$("Profile check already in progress, skipping");return}try{if(b.current=!0,$(`Starting auth check on path: ${n.pathname}, chainId: ${o}`),["/connect","/create-profile","/username-setup"].includes(n.pathname)){$("On auth/profile page, skipping check"),l(!1);return}if(o===f&&p===0){$("Chain ID unchanged and not retrying, skipping check");return}l(!0);let j;try{$("Getting wallet client"),j=await et(o)}catch{$("No wallet connected, redirecting to connect"),U("/connect");return}const[M]=await j.getAddresses();if(!M){$("No address in wallet client, redirecting to connect"),U("/connect");return}$("Found wallet address",{address:M});const y=x();if(y!=null&&y.profile&&y.address===M&&y.chainId===o){$("Valid stored auth state found, proceeding"),(n.pathname==="/create-profile"||n.pathname==="/username-setup")&&($("On profile creation page with valid profile, redirecting to dashboard"),U("/dashboard")),l(!1);return}if(!o){if(p<w){$("No chainId, retrying",{retryCount:p}),h(P=>P+1);return}$("No chainId after max retries, switching network"),await i(se.id),h(0);return}c(o),$("Checking profile on chain",{chainId:o,address:M});const{profile:T,error:v}=await r(M);if(v&&($("Profile check returned error",{code:v.code}),v.code==="SDK_NOT_INITIALIZED"&&p<w)){$("SDK not initialized, retrying",{retryCount:p}),h(P=>P+1),D.current=setTimeout(()=>{h(P=>P+1)},1e3);return}if((v==null?void 0:v.code)==="WRONG_CHAIN"){if(p<w){$("Wrong chain, retrying",{retryCount:p}),h(P=>P+1);return}$("Wrong chain after max retries, redirecting to connect"),U("/connect"),h(0);return}if(h(0),(v==null?void 0:v.code)==="NO_PROFILE"){$("No profile found, redirecting to create-profile"),n.pathname!=="/create-profile"&&U("/create-profile"),l(!1);return}if(!T){$("No profile and no specific error, redirecting to connect"),U("/connect");return}$("Profile found, saving auth state",{username:T.username}),V({address:M,chainId:o,profile:{tokenId:T.tokenId,username:T.username,metadata:{uri:((C=T.metadata)==null?void 0:C.avatar)||""}},timestamp:Date.now()}),n.pathname==="/create-profile"&&($("On profile creation page with valid profile, redirecting to dashboard"),U("/dashboard")),l(!1)}catch(j){if(console.error("Auth check failed:",j),p<w){$("Auth check error, retrying",{retryCount:p}),h(M=>M+1);return}$("Auth check failed after max retries, redirecting to connect"),U("/connect"),h(0)}finally{b.current=!1,p>=w&&($("Max retries reached, stopping loading"),l(!1),h(0))}})(),()=>{D.current&&clearTimeout(D.current)}),[o,n.pathname,a,g,d]),u||a||!g||!d?($("Rendering loading state",{isLoading:u,isSdkLoading:a,hasSdk:!!g,isInitialized:d}),e.jsxDEV("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxDEV("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/AuthGuard.tsx",lineNumber:336,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/AuthGuard.tsx",lineNumber:335,columnNumber:7},void 0)):($("Rendering children"),e.jsxDEV(e.Fragment,{children:t},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/AuthGuard.tsx",lineNumber:342,columnNumber:10},void 0))},Si=`
:root {
  /* Blockchain brand colors */
  --monad-green: #4ADE80;
  --monad-dark-green: #22c55e;
  --monad-bg: #0F2416;
  --monad-bg-rgb: 15, 36, 22;
  --fuse-blue: #1E88FA;
  --fuse-gold: #F9C846;
  --fuse-dark-blue: #0D2B47;
  --fuse-bg: #0A1F35;
  --fuse-bg-rgb: 10, 31, 53;
  --text-primary: #FBFAF9;
  --text-secondary: rgba(251, 250, 249, 0.7);
  --text-disabled: rgba(251, 250, 249, 0.5);
  --success-main: #22c55e;
  --error-main: #ef4444;
  
  /* Set chain-specific colors - default to Monad */
  --chain-primary: var(--monad-green);
  --chain-secondary: var(--monad-dark-green);
  --chain-bg: var(--monad-bg);
  --chain-bg-rgb: var(--monad-bg-rgb);
  --chain-accent: rgba(74, 222, 128, 0.2);
}
`,cn=document.createElement("style");cn.textContent=Si;document.head.appendChild(cn);const Ai=20143,Mi=1264453517,Fi=t=>{if(t===Ai){document.documentElement.style.setProperty("--chain-primary","var(--monad-green)"),document.documentElement.style.setProperty("--chain-secondary","var(--monad-dark-green)"),document.documentElement.style.setProperty("--chain-bg","var(--monad-bg)"),document.documentElement.style.setProperty("--chain-bg-rgb","var(--monad-bg-rgb)"),document.documentElement.style.setProperty("--chain-accent","rgba(74, 222, 128, 0.2)"),document.documentElement.style.setProperty("--theme-color","#4ADE80");const s=document.querySelector('meta[name="theme-color"]');s&&s.setAttribute("content","#4ADE80")}else if(t===Mi){document.documentElement.style.setProperty("--chain-primary","var(--fuse-gold)"),document.documentElement.style.setProperty("--chain-secondary","var(--fuse-dark-blue)"),document.documentElement.style.setProperty("--chain-bg","var(--fuse-bg)"),document.documentElement.style.setProperty("--chain-bg-rgb","var(--fuse-bg-rgb)"),document.documentElement.style.setProperty("--chain-accent","rgba(249, 200, 70, 0.2)"),document.documentElement.style.setProperty("--theme-color","#F9C846");const s=document.querySelector('meta[name="theme-color"]');s&&s.setAttribute("content","#F9C846")}},Oi=3e4;async function Ri(){if(typeof window>"u"){console.log("Initializing server-side services");return}const s=new Promise((n,r)=>{setTimeout(()=>r(new Error("Initialization timed out")),Oi)});try{await Promise.race([Bi(),s])}catch(n){console.error("App initialization failed:",n),await Li()}}async function Li(){console.log("Initializing in fallback mode...");const t=K.id;console.log("Using default chain ID:",t),Ps(t);try{await new Ge(t).initialize().catch(n=>{console.warn("Failed to initialize TribesSDK in fallback mode",n)})}catch(s){console.warn("Error creating TribesSDK in fallback mode",s)}_e.getInstance(),console.log("Fallback initialization complete")}async function Bi(){try{console.log("Initializing client-side services");let t=K.id,s=Ps(t);console.log("[IndexerService] Pre-initializing with default chainId:",t);try{console.log("Connecting to blockchain..."),await q.connect();const n=await q.getChainId();console.log("Successfully connected to blockchain with chainId:",n),t=n,s=Ps(t),console.log("[IndexerService] Initializing with chainId:",t),new Ge(t).initialize().catch(o=>{console.warn("TribesSDK initialization had an error, but app will continue:",o)}),console.log("[TribesSDK] Initialization started with chainId:",t);const a=_e.getInstance();console.log("[PostsService] Initialized with chainId:",t),setTimeout(async()=>{try{const o=await q.getAddress();o&&s.setConnectedUser(o)}catch(o){console.warn("Failed to set connected user in indexer:",o)}},2e3)}catch(n){console.warn("Failed to connect to blockchain. Some features may not work:",n)}console.log("App services initialized successfully")}catch(t){throw console.error("Error initializing app services:",t),t}}const $i=()=>e.jsxDEV("div",{className:"fixed inset-0 bg-black flex flex-col items-center justify-center",children:[e.jsxDEV("div",{className:"animate-spin mb-4",children:e.jsxDEV(Rt,{size:48,className:"text-monad-purple"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/LoadingScreen.tsx",lineNumber:8,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/LoadingScreen.tsx",lineNumber:7,columnNumber:7},void 0),e.jsxDEV("h2",{className:"text-xl font-medium text-white",children:"Loading..."},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/LoadingScreen.tsx",lineNumber:10,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/LoadingScreen.tsx",lineNumber:6,columnNumber:5},void 0),_i=m.lazy(()=>Ds(()=>import("./Dashboard-ApMIErfF.js"),__vite__mapDeps([0,1]))),zi=()=>{const t=Zs(),[s,n]=m.useState(!1),[r,a]=m.useState(!0),[o,i]=m.useState(null);return m.useEffect(()=>{t&&Fi(t)},[t]),m.useEffect(()=>{(async()=>{try{a(!0),await Ri();const l=new Ge(t);await l.initialize(),i(l),n(!0)}catch(l){console.error("Failed to initialize app:",l),n(!0)}finally{a(!1)}})()},[t]),m.useEffect(()=>(console.log("App mounted"),window.addEventListener("error",u=>{console.error("Global error:",u.error)}),()=>{window.removeEventListener("error",()=>{})}),[]),r?e.jsxDEV("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxDEV("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/App.tsx",lineNumber:82,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/App.tsx",lineNumber:81,columnNumber:7},void 0):e.jsxDEV(Va,{sdk:o,isInitialized:s,children:e.jsxDEV(Dr,{children:e.jsxDEV(m.Suspense,{fallback:e.jsxDEV($i,{},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/App.tsx",lineNumber:90,columnNumber:29},void 0),children:e.jsxDEV(Er,{children:[e.jsxDEV(de,{path:"/",element:e.jsxDEV(Ba,{},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/App.tsx",lineNumber:93,columnNumber:38},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/App.tsx",lineNumber:93,columnNumber:13},void 0),e.jsxDEV(de,{path:"/connect",element:e.jsxDEV(on,{},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/App.tsx",lineNumber:94,columnNumber:45},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/App.tsx",lineNumber:94,columnNumber:13},void 0),e.jsxDEV(de,{path:"/create-profile",element:e.jsxDEV(Tt,{},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/App.tsx",lineNumber:95,columnNumber:52},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/App.tsx",lineNumber:95,columnNumber:13},void 0),e.jsxDEV(de,{path:"/username-setup",element:e.jsxDEV(Tt,{},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/App.tsx",lineNumber:96,columnNumber:52},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/App.tsx",lineNumber:96,columnNumber:13},void 0),e.jsxDEV(de,{element:e.jsxDEV(Ii,{children:e.jsxDEV(Aa,{},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/App.tsx",lineNumber:99,columnNumber:40},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/App.tsx",lineNumber:99,columnNumber:29},void 0),children:[e.jsxDEV(de,{path:"/dashboard",element:e.jsxDEV(_i,{},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/App.tsx",lineNumber:100,columnNumber:49},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/App.tsx",lineNumber:100,columnNumber:15},void 0),e.jsxDEV(de,{path:"/profile",element:e.jsxDEV(Qa,{},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/App.tsx",lineNumber:101,columnNumber:47},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/App.tsx",lineNumber:101,columnNumber:15},void 0),e.jsxDEV(de,{path:"/tribes",element:e.jsxDEV(ti,{},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/App.tsx",lineNumber:102,columnNumber:46},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/App.tsx",lineNumber:102,columnNumber:15},void 0),e.jsxDEV(de,{path:"/tribes/create",element:e.jsxDEV(Ei,{},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/App.tsx",lineNumber:103,columnNumber:53},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/App.tsx",lineNumber:103,columnNumber:15},void 0),e.jsxDEV(de,{path:"/tribes/:tribeId",element:e.jsxDEV(Di,{},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/App.tsx",lineNumber:104,columnNumber:55},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/App.tsx",lineNumber:104,columnNumber:15},void 0),e.jsxDEV(de,{path:"/tribes/:tribeId/topics/:topicId",element:e.jsxDEV(Vi,{},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/App.tsx",lineNumber:105,columnNumber:71},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/App.tsx",lineNumber:105,columnNumber:15},void 0),e.jsxDEV(de,{path:"/onboarding",element:e.jsxDEV(Pi,{},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/App.tsx",lineNumber:106,columnNumber:50},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/App.tsx",lineNumber:106,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/App.tsx",lineNumber:99,columnNumber:13},void 0),e.jsxDEV(de,{path:"*",element:e.jsxDEV(Yt,{to:"/dashboard",replace:!0},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/App.tsx",lineNumber:110,columnNumber:38},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/App.tsx",lineNumber:110,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/App.tsx",lineNumber:91,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/App.tsx",lineNumber:90,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/App.tsx",lineNumber:89,columnNumber:7},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/App.tsx",lineNumber:88,columnNumber:5},void 0)},Wi={chainId:void 0,isCorrectNetwork:!1,isChainSwitching:!1,lastValidChainId:K.id},mn=It({name:"chain",initialState:Wi,reducers:{setChainId:(t,s)=>{t.chainId=s.payload},setIsCorrectNetwork:(t,s)=>{t.isCorrectNetwork=s.payload},setIsChainSwitching:(t,s)=>{t.isChainSwitching=s.payload},setLastValidChainId:(t,s)=>{t.lastValidChainId=s.payload}}}),{setChainId:Zi,setIsCorrectNetwork:eo,setIsChainSwitching:so,setLastValidChainId:to}=mn.actions,Ki=mn.reducer,qi=vr({reducer:{chain:Ki,posts:Qr}}),Ji=new Tr,Hi=kr({chains:[K,se,ke,Ce,qe,xe],transports:{[K.id]:Me(K.rpcUrls.default.http[0]),[se.id]:Me(se.rpcUrls.default.http[0]),[ke.id]:Me(ke.rpcUrls.default.http[0]),[Ce.id]:Me(Ce.rpcUrls.default.http[0]),[qe.id]:Me(qe.rpcUrls.default.http[0]),[xe.id]:Me(xe.rpcUrls.default.http[0])}});Cr.createRoot(document.getElementById("root")).render(e.jsxDEV(Y.StrictMode,{children:e.jsxDEV(Ur,{store:qi,children:e.jsxDEV(Pr,{config:Hi,children:e.jsxDEV(jr,{client:Ji,children:e.jsxDEV(Wa,{children:e.jsxDEV(zi,{},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/main.tsx",lineNumber:58,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/main.tsx",lineNumber:57,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/main.tsx",lineNumber:55,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/main.tsx",lineNumber:53,columnNumber:7},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/main.tsx",lineNumber:51,columnNumber:5},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/main.tsx",lineNumber:50,columnNumber:3},void 0));export{Ua as C,ni as F,F as P,yi as U,ii as a,us as b,st as c,nt as d,Ze as e,yt as r,en as s,Ve as u};
//# sourceMappingURL=main-4GSVU9O0.js.map
