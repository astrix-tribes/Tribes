import{f as v,y as U,r,z as P,j as s,aj as w}from"./vendor-CwV3sy3V.js";import{u as V,a as T,b as S,c as A,d as F,s as I,P as L,e as E,r as O,F as B,C as M,U as $}from"./main-4GSVU9O0.js";import".prisma/client/index-browser";function Y(){var N;v();const l=U();V();const{posts:d,loading:h,error:b,fetchFeed:o}=T(),{profile:u}=S(),{address:c}=A(),{tribes:t,isLoading:f}=F(),[a,k]=r.useState(null),n=P(I);r.useEffect(()=>{(t==null?void 0:t.length)>0?console.log("Dashboard - Loaded Tribes:",t):console.log(f?"Dashboard - Tribes still loading...":"Dashboard - No tribes available or loading error")},[t,f]),r.useEffect(()=>{c&&(console.log("Fetching feed for address:",c),o().catch(e=>{console.error("Error fetching feed:",e)}))},[o,c]);const m=r.useMemo(()=>{if(!d)return[];console.log("Dashboard posts:",Object.values(d));let e=Object.values(d).map(i=>i.type===void 0?(console.warn(`Post ${i.id} has no type, defaulting to TEXT`),{...i,type:L.TEXT}):i);return a&&(e=e.filter(i=>{var g;return((g=i.tribeId)==null?void 0:g.toString())===a})),e},[d,a]),x=r.useCallback(()=>{console.log("[Dashboard]: Opening create post modal"),l(E(!0))},[l]),p=r.useCallback(e=>{console.log("Post clicked:",e)},[]),D=r.useCallback(e=>{k(e)},[]),y=r.useCallback(e=>{console.log("Post created successfully:",e),l(E(!1)),l(O()),o()},[l,o]);r.useEffect(()=>{n||o()},[n,o]),r.useEffect(()=>{console.log("[Dashboard]: isCreatingPost state changed:",n)},[n]),r.useEffect(()=>{if(localStorage.removeItem("dashboard_prefetch"),window.performance){const e=performance.getEntriesByType("navigation")[0];console.log("Dashboard load time:",e.domContentLoadedEventEnd-e.startTime,"ms")}},[]);const j=()=>f?s.jsxDEV("div",{className:"text-sm text-gray-400",children:"Loading tribes..."},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Dashboard.tsx",lineNumber:135,columnNumber:14},this):!t||t.length===0?s.jsxDEV("div",{className:"text-sm text-gray-400",children:"No tribes available"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Dashboard.tsx",lineNumber:139,columnNumber:14},this):s.jsxDEV("div",{className:"flex flex-wrap gap-2 mb-4",children:[s.jsxDEV("button",{onClick:()=>D(null),className:`px-3 py-1 rounded-full text-sm ${a===null?"bg-[#4ADE80] text-black":"bg-gray-800 text-gray-300 hover:bg-gray-700"}`,children:"All Tribes"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Dashboard.tsx",lineNumber:144,columnNumber:9},this),t.map(e=>s.jsxDEV("button",{onClick:()=>D(e.id.toString()),className:`px-3 py-1 rounded-full text-sm ${a===e.id.toString()?"bg-[#4ADE80] text-black":"bg-gray-800 text-gray-300 hover:bg-gray-700"}`,children:e.name},e.id,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Dashboard.tsx",lineNumber:155,columnNumber:11},this))]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Dashboard.tsx",lineNumber:143,columnNumber:7},this),C=()=>h?s.jsxDEV("div",{children:"Loading..."},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Dashboard.tsx",lineNumber:173,columnNumber:14},this):b?s.jsxDEV("div",{children:["Error: ",b.toString()]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Dashboard.tsx",lineNumber:177,columnNumber:14},this):m.length===0?s.jsxDEV("div",{className:"text-center py-12",children:[s.jsxDEV("h3",{className:"text-lg font-medium text-white mb-2",children:"No posts yet"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Dashboard.tsx",lineNumber:183,columnNumber:11},this),s.jsxDEV("p",{className:"text-gray-400 mb-6",children:a?"No posts in this tribe yet. Be the first to post!":"Your feed is empty. Start by creating a post or joining tribes."},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Dashboard.tsx",lineNumber:184,columnNumber:11},this),s.jsxDEV("button",{onClick:x,className:"inline-flex items-center px-4 py-2 bg-[#4ADE80] text-black rounded-lg hover:bg-[#4ADE80]/90 transition-colors",children:[s.jsxDEV(w,{className:"w-5 h-5 mr-2"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Dashboard.tsx",lineNumber:193,columnNumber:13},this),"Create Post"]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Dashboard.tsx",lineNumber:189,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Dashboard.tsx",lineNumber:182,columnNumber:9},this):s.jsxDEV($,{items:m,loading:h,showCreateButton:!0,onItemClick:p},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Dashboard.tsx",lineNumber:201,columnNumber:7},this);return console.log("[Dashboard]: Rendering with isCreatingPost =",n),s.jsxDEV(B,{children:[j(),C(),s.jsxDEV("div",{className:"fixed bottom-20 right-6 z-10",children:s.jsxDEV("button",{onClick:x,className:"flex items-center justify-center w-14 h-14 rounded-full bg-[#4ADE80] text-black shadow-lg hover:bg-[#4ADE80]/90 transition-colors","aria-label":"Create post",children:s.jsxDEV(w,{className:"w-6 h-6"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Dashboard.tsx",lineNumber:227,columnNumber:11},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Dashboard.tsx",lineNumber:222,columnNumber:9},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Dashboard.tsx",lineNumber:221,columnNumber:7},this),s.jsxDEV(M,{tribeId:a||((N=u==null?void 0:u.tokenId)==null?void 0:N.toString())||"1",onSuccess:y,isOpen:n},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Dashboard.tsx",lineNumber:231,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Dashboard.tsx",lineNumber:214,columnNumber:5},this)}export{Y as Dashboard,Y as default};
//# sourceMappingURL=Dashboard-ApMIErfF.js.map
